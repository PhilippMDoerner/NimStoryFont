(self.webpackChunknimstoryfont_gui=self.webpackChunknimstoryfont_gui||[]).push([[6307],{"./node_modules/@ngrx/operators/fesm2022/ngrx-operators.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Hn:()=>tapResponse});var rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/empty.js"),rxjs_operators__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/tap.js"),rxjs_operators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/catchError.js"),rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/finalize.js");function tapResponse(observerOrNext,error,complete){const observer="function"==typeof observerOrNext?{next:observerOrNext,error,complete}:observerOrNext;return source=>source.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_0__.M)({next:observer.next,complete:observer.complete}),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.W)((error=>(observer.error(error),rxjs__WEBPACK_IMPORTED_MODULE_2__.w))),observer.finalize?(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.j)(observer.finalize):source$=>source$)}},"./node_modules/@ngrx/signals/fesm2022/ngrx-signals-rxjs-interop.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{o:()=>rxMethod});var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),rxjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/Subject.js"),rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/util/noop.js"),rxjs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/util/isObservable.js");function rxMethod(generator,config){config?.injector||(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.assertInInjectionContext)(rxMethod);const sourceInjector=config?.injector??(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.inject)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.Injector),source$=new rxjs__WEBPACK_IMPORTED_MODULE_1__.B,sourceSub=generator(source$).subscribe();sourceInjector.get(_angular_core__WEBPACK_IMPORTED_MODULE_0__.DestroyRef).onDestroy((()=>sourceSub.unsubscribe()));const rxMethodFn=(input,config)=>{if(function isStatic(value){return!(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.isSignal)(value)&&!(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.A)(value)}(input))return source$.next(input),{destroy:rxjs__WEBPACK_IMPORTED_MODULE_2__.l};const instanceInjector=config?.injector??function getCallerInjector(){try{return(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.inject)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.Injector)}catch{return null}}()??sourceInjector;if((0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.isSignal)(input)){const watcher=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.effect)((()=>{const value=input();(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.untracked)((()=>source$.next(value)))}),{injector:instanceInjector});return sourceSub.add({unsubscribe:()=>watcher.destroy()}),watcher}const instanceSub=input.subscribe((value=>source$.next(value)));return sourceSub.add(instanceSub),instanceInjector!==sourceInjector&&instanceInjector.get(_angular_core__WEBPACK_IMPORTED_MODULE_0__.DestroyRef).onDestroy((()=>instanceSub.unsubscribe())),{destroy:()=>instanceSub.unsubscribe()}};return rxMethodFn.destroy=sourceSub.unsubscribe.bind(sourceSub),rxMethodFn}},"./node_modules/@ngrx/signals/fesm2022/ngrx-signals.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Eu:()=>signalStore,M8:()=>patchState,Mj:()=>signalStoreFeature,Q2:()=>withState,QO:()=>withComputed,RI:()=>withMethods,TK:()=>withHooks,pq:()=>withProps});var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs");function toDeepSignal(signal){const value=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.untracked)((()=>signal()));return function isRecord(value){if(null===value||"object"!=typeof value||function isIterable(value){return"function"==typeof value?.[Symbol.iterator]}(value))return!1;let proto=Object.getPrototypeOf(value);if(proto===Object.prototype)return!0;for(;proto&&proto!==Object.prototype;){if(nonRecords.includes(proto.constructor))return!1;proto=Object.getPrototypeOf(proto)}return proto===Object.prototype}(value)?new Proxy(signal,{get:(target,prop)=>prop in value?((0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.isSignal)(target[prop])||Object.defineProperty(target,prop,{value:(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.computed)((()=>target()[prop])),configurable:!0}),toDeepSignal(target[prop])):target[prop]}):signal}const nonRecords=[WeakSet,WeakMap,Promise,Date,Error,RegExp,ArrayBuffer,DataView,Function];const STATE_WATCHERS=new WeakMap,STATE_SOURCE=Symbol("STATE_SOURCE");function patchState(stateSource,...updaters){stateSource[STATE_SOURCE].update((currentState=>updaters.reduce(((nextState,updater)=>({...nextState,..."function"==typeof updater?updater(nextState):updater})),currentState))),function notifyWatchers(stateSource){const watchers=getWatchers(stateSource);for(const watcher of watchers){watcher((0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.untracked)((()=>getState(stateSource))))}}(stateSource)}function getState(stateSource){return stateSource[STATE_SOURCE]()}function getWatchers(stateSource){return STATE_WATCHERS.get(stateSource[STATE_SOURCE])||[]}function signalStore(...args){const signalStoreArgs=[...args],config="function"==typeof signalStoreArgs[0]?{}:signalStoreArgs.shift(),features=signalStoreArgs;class SignalStore{constructor(){const innerStore=features.reduce(((store,feature)=>feature(store)),function getInitialInnerStore(){return{[STATE_SOURCE]:(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.signal)({}),stateSignals:{},props:{},methods:{},hooks:{}}}()),{stateSignals,props,methods,hooks}=innerStore,storeMembers={...stateSignals,...props,...methods};this[STATE_SOURCE]=innerStore[STATE_SOURCE];for(const key of Reflect.ownKeys(storeMembers))this[key]=storeMembers[key];const{onInit,onDestroy}=hooks;onInit&&onInit(),onDestroy&&(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.inject)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.DestroyRef).onDestroy(onDestroy)}static ɵfac=function SignalStore_Factory(__ngFactoryType__){return new(__ngFactoryType__||SignalStore)};static ɵprov=_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({token:SignalStore,factory:SignalStore.ɵfac,providedIn:config.providedIn||null})}return("undefined"==typeof ngDevMode||ngDevMode)&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](SignalStore,[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Injectable,args:[{providedIn:config.providedIn||null}]}],(()=>[]),null),SignalStore}function signalStoreFeature(featureOrInput,...restFeatures){const features="function"==typeof featureOrInput?[featureOrInput,...restFeatures]:restFeatures;return inputStore=>features.reduce(((store,feature)=>feature(store)),inputStore)}function assertUniqueStoreMembers(store,newMemberKeys){if(!ngDevMode)return;const storeMembers={...store.stateSignals,...store.props,...store.methods},overriddenKeys=Reflect.ownKeys(storeMembers).filter((memberKey=>newMemberKeys.includes(memberKey)));overriddenKeys.length>0&&console.warn("@ngrx/signals: SignalStore members cannot be overridden.","Trying to override:",overriddenKeys.map((key=>String(key))).join(", "))}function withProps(propsFactory){return store=>{const props=propsFactory({[STATE_SOURCE]:store[STATE_SOURCE],...store.stateSignals,...store.props,...store.methods});return assertUniqueStoreMembers(store,Reflect.ownKeys(props)),{...store,props:{...store.props,...props}}}}function withComputed(signalsFactory){return withProps(signalsFactory)}function withHooks(hooksOrFactory){return store=>{const storeMembers={[STATE_SOURCE]:store[STATE_SOURCE],...store.stateSignals,...store.props,...store.methods},hooks="function"==typeof hooksOrFactory?hooksOrFactory(storeMembers):hooksOrFactory,createHook=name=>{const hook=hooks[name],currentHook=store.hooks[name];return hook?()=>{currentHook&&currentHook(),hook(storeMembers)}:currentHook};return{...store,hooks:{onInit:createHook("onInit"),onDestroy:createHook("onDestroy")}}}}function withMethods(methodsFactory){return store=>{const methods=methodsFactory({[STATE_SOURCE]:store[STATE_SOURCE],...store.stateSignals,...store.props,...store.methods});return assertUniqueStoreMembers(store,Reflect.ownKeys(methods)),{...store,methods:{...store.methods,...methods}}}}function withState(stateOrFactory){return store=>{const state="function"==typeof stateOrFactory?stateOrFactory():stateOrFactory,stateKeys=Reflect.ownKeys(state);assertUniqueStoreMembers(store,stateKeys),store[STATE_SOURCE].update((currentState=>({...currentState,...state})));const stateSignals=stateKeys.reduce(((acc,key)=>{const sliceSignal=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.computed)((()=>store[STATE_SOURCE]()[key]));return{...acc,[key]:toDeepSignal(sliceSignal)}}),{});return{...store,stateSignals:{...store.stateSignals,...stateSignals}}}}},"./node_modules/rxjs/dist/esm5/internal/operators/pairwise.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{J:()=>pairwise});var _util_lift__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/util/lift.js"),_OperatorSubscriber__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/OperatorSubscriber.js");function pairwise(){return(0,_util_lift__WEBPACK_IMPORTED_MODULE_0__.N)((function(source,subscriber){var prev,hasPrev=!1;source.subscribe((0,_OperatorSubscriber__WEBPACK_IMPORTED_MODULE_1__._)(subscriber,(function(value){var p=prev;prev=value,hasPrev&&subscriber.next([p,value]),hasPrev=!0})))}))}},"./node_modules/rxjs/dist/esm5/internal/operators/share.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{u:()=>share});var tslib__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),_observable_innerFrom__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/innerFrom.js"),_Subject__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/Subject.js"),_Subscriber__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/Subscriber.js"),_util_lift__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/util/lift.js");function share(options){void 0===options&&(options={});var _a=options.connector,connector=void 0===_a?function(){return new _Subject__WEBPACK_IMPORTED_MODULE_0__.B}:_a,_b=options.resetOnError,resetOnError=void 0===_b||_b,_c=options.resetOnComplete,resetOnComplete=void 0===_c||_c,_d=options.resetOnRefCountZero,resetOnRefCountZero=void 0===_d||_d;return function(wrapperSource){var connection,resetConnection,subject,refCount=0,hasCompleted=!1,hasErrored=!1,cancelReset=function(){null==resetConnection||resetConnection.unsubscribe(),resetConnection=void 0},reset=function(){cancelReset(),connection=subject=void 0,hasCompleted=hasErrored=!1},resetAndUnsubscribe=function(){var conn=connection;reset(),null==conn||conn.unsubscribe()};return(0,_util_lift__WEBPACK_IMPORTED_MODULE_1__.N)((function(source,subscriber){refCount++,hasErrored||hasCompleted||cancelReset();var dest=subject=null!=subject?subject:connector();subscriber.add((function(){0!==--refCount||hasErrored||hasCompleted||(resetConnection=handleReset(resetAndUnsubscribe,resetOnRefCountZero))})),dest.subscribe(subscriber),!connection&&refCount>0&&(connection=new _Subscriber__WEBPACK_IMPORTED_MODULE_2__.Ms({next:function(value){return dest.next(value)},error:function(err){hasErrored=!0,cancelReset(),resetConnection=handleReset(reset,resetOnError,err),dest.error(err)},complete:function(){hasCompleted=!0,cancelReset(),resetConnection=handleReset(reset,resetOnComplete),dest.complete()}}),(0,_observable_innerFrom__WEBPACK_IMPORTED_MODULE_3__.Tg)(source).subscribe(connection))}))(wrapperSource)}}function handleReset(reset,on){for(var args=[],_i=2;_i<arguments.length;_i++)args[_i-2]=arguments[_i];if(!0!==on){if(!1!==on){var onSubscriber=new _Subscriber__WEBPACK_IMPORTED_MODULE_2__.Ms({next:function(){onSubscriber.unsubscribe(),reset()}});return(0,_observable_innerFrom__WEBPACK_IMPORTED_MODULE_3__.Tg)(on.apply(void 0,(0,tslib__WEBPACK_IMPORTED_MODULE_4__.fX)([],(0,tslib__WEBPACK_IMPORTED_MODULE_4__.zs)(args)))).subscribe(onSubscriber)}}else reset()}},"./node_modules/rxjs/dist/esm5/internal/operators/shareReplay.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{t:()=>shareReplay});var _ReplaySubject__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/ReplaySubject.js"),_share__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/share.js");function shareReplay(configOrBufferSize,windowTime,scheduler){var _a,_b,_c,bufferSize,refCount=!1;return configOrBufferSize&&"object"==typeof configOrBufferSize?(_a=configOrBufferSize.bufferSize,bufferSize=void 0===_a?1/0:_a,_b=configOrBufferSize.windowTime,windowTime=void 0===_b?1/0:_b,refCount=void 0!==(_c=configOrBufferSize.refCount)&&_c,scheduler=configOrBufferSize.scheduler):bufferSize=null!=configOrBufferSize?configOrBufferSize:1/0,(0,_share__WEBPACK_IMPORTED_MODULE_0__.u)({connector:function(){return new _ReplaySubject__WEBPACK_IMPORTED_MODULE_1__.m(bufferSize,windowTime,scheduler)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:refCount})}},"./src/app/design/organisms/page/page.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>page_stories});var testing=__webpack_require__("./node_modules/@angular/router/fesm2022/testing.mjs"),dist=__webpack_require__("./node_modules/@storybook/angular/dist/index.mjs"),routing_mock_service=__webpack_require__("./src/app/_services/routing.mock.service.ts"),routing_service=__webpack_require__("./src/app/_services/routing.service.ts"),campaign_mock_service=__webpack_require__("./src/app/_services/utils/campaign.mock.service.ts"),tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),global_store=__webpack_require__("./src/app/global.store.ts");let FaviconService=class FaviconService{constructor(){this.serverUrl="",this.FAVICON_ELEMENT_ID="favicon",this.DEFAULT_FAVICON="assets/icons/icon-72x72.png",this.document=(0,core.inject)(common.DOCUMENT),this.globalStore=(0,core.inject)(global_store.v),(0,core.effect)((()=>{const newFavicon=this.globalStore.currentCampaign()?.icon,newFaviconUrl=newFavicon?`${this.serverUrl}${newFavicon}`:void 0;this.updateFavicon(newFaviconUrl)}))}updateFavicon(newFaviconUrl){if(!!!this.document)return;const faviconElement=this.document.querySelector(`#${this.FAVICON_ELEMENT_ID}`);faviconElement&&(faviconElement.href=newFaviconUrl??this.DEFAULT_FAVICON)}static{this.ctorParameters=()=>[]}};FaviconService=(0,tslib_es6.Cg)([(0,core.Injectable)({providedIn:"root"})],FaviconService);var page_componentngResource=__webpack_require__("./src/app/design/organisms/page/page.component.scss?ngResource"),page_componentngResource_default=__webpack_require__.n(page_componentngResource),a11y=__webpack_require__("./node_modules/@angular/cdk/fesm2022/a11y.mjs"),rxjs_interop=__webpack_require__("./node_modules/@angular/core/fesm2022/rxjs-interop.mjs"),router=__webpack_require__("./node_modules/@angular/router/fesm2022/router.mjs"),ng_bootstrap=__webpack_require__("./node_modules/@ng-bootstrap/ng-bootstrap/fesm2022/ng-bootstrap.mjs"),switchMap=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/switchMap.js"),fromEvent=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/fromEvent.js"),debounceTime=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/debounceTime.js"),map=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),filter=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/filter.js"),hotkey_directive=__webpack_require__("./src/app/_directives/hotkey.directive.ts"),screen_service=__webpack_require__("./src/app/_services/screen.service.ts"),swipe_service=__webpack_require__("./src/app/_services/swipe.service.ts"),app_constants=__webpack_require__("./src/app/app.constants.ts"),molecules=__webpack_require__("./src/app/design/molecules/index.ts"),navigation_store=__webpack_require__("./src/app/navigation.store.ts"),rxjs_operators=__webpack_require__("./src/utils/rxjs-operators.ts"),string=__webpack_require__("./src/utils/string.ts"),icon_component=__webpack_require__("./src/app/design/atoms/icon/icon.component.ts"),spinner_component=__webpack_require__("./src/app/design/atoms/spinner/spinner.component.ts");var mobile_header_componentngResource=__webpack_require__("./src/app/design/organisms/mobile-header/mobile-header.component.scss?ngResource"),mobile_header_componentngResource_default=__webpack_require__.n(mobile_header_componentngResource),online_service=__webpack_require__("./src/app/_services/online.service.ts"),button_component=__webpack_require__("./src/app/design/atoms/button/button.component.ts");let MobileHeaderComponent=class MobileHeaderComponent{constructor(){this.currentCampaignIconUrl=core.input.required(),this.title=core.input.required(),this.titleUrl=core.input.required(),this.canShowSidebar=core.input.required(),this.openSidebar=(0,core.output)(),this.serverUrl="",this.online$=(0,core.inject)(online_service.D).online$,this.modalService=(0,core.inject)(ng_bootstrap.Bq)}openModal(content){this.modalService.open(content,{ariaLabelledBy:"modal-title",modalDialogClass:"border border-info border-3 rounded mymodal"})}static{this.propDecorators={currentCampaignIconUrl:[{type:core.Input,args:[{isSignal:!0,alias:"currentCampaignIconUrl",required:!0,transform:void 0}]}],title:[{type:core.Input,args:[{isSignal:!0,alias:"title",required:!0,transform:void 0}]}],titleUrl:[{type:core.Input,args:[{isSignal:!0,alias:"titleUrl",required:!0,transform:void 0}]}],canShowSidebar:[{type:core.Input,args:[{isSignal:!0,alias:"canShowSidebar",required:!0,transform:void 0}]}],openSidebar:[{type:core.Output,args:["openSidebar"]}]}}};MobileHeaderComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"app-mobile-header",imports:[icon_component.R,router.Wk,common.AsyncPipe,ng_bootstrap.n8,button_component.Q],template:'<nav class="navbar bg-dark">\n  <div class="container-fluid">\n    @if (canShowSidebar()) {\n      <button\n        class="navbar-toggler"\n        type="button"\n        data-bs-toggle="offcanvas"\n        data-bs-target="#offcanvasNavbar"\n        aria-controls="sidebar"\n        aria-label="Toggle navigation"\n        (click)="openSidebar.emit()"\n      >\n        <app-icon [icon]="\'bars\'" />\n      </button>\n    }\n    <a class="navbar-brand" [routerLink]="titleUrl()" aria-label="To Home Page">\n      <strong>\n        <img\n          class="navbar-brand-icon"\n          [src]="serverUrl + currentCampaignIconUrl()"\n          alt="To Home Page"\n        />\n        {{ title() }}\n      </strong>\n    </a>\n\n    @if ((online$ | async) === false) {\n      <button\n        btn\n        aria-label="Toggle offline info modal"\n        [kind]="\'WARNING-OUTLINE\'"\n        [icon]="\'triangle-exclamation\'"\n        (clicked)="openModal(offlineInfoModal)"\n      ></button>\n    }\n  </div>\n</nav>\n\n<ng-template #tooltipContent>\n  <div class="m-0 p-0">You are currently offline</div>\n</ng-template>\n\n<ng-template #offlineInfoModal let-modal>\n  <div class="modal-header">\n    <h5 class="modal-title">You\'re Offline</h5>\n    <button\n      type="button"\n      class="btn-close"\n      aria-label="Close"\n      (click)="modal.dismiss()"\n    ></button>\n  </div>\n  <div class="modal-body">\n    <p>\n      Your device is currently offline. You will still be able to read most\n      content that you can while online, but some limitations apply:\n    </p>\n    <ul class="ps-3">\n      <li>\n        <strong> You can\'t create, update or delete articles. </strong><br />\n        Elements linking to such sites will be hidden.\n      </li>\n      <li><strong> You can\'t upload files such as images </strong></li>\n      <li>\n        <strong> You can\'t search </strong>\n      </li>\n      <li>\n        <strong> You can\'t visit sites requiring online access. </strong><br />\n        Typically this is because their data is too large to download (i.e.\n        Recordings), or their sole purpose is data modification which is\n        unavailable while offline.\n      </li>\n    </ul>\n  </div>\n</ng-template>\n',changeDetection:core.ChangeDetectionStrategy.OnPush,styles:[mobile_header_componentngResource_default()]})],MobileHeaderComponent);var sidebar_component=__webpack_require__("./src/app/design/organisms/sidebar/sidebar.component.ts");const showSidebarSignal=(0,core.signal)(!0);let PageComponent=class PageComponent{constructor(){this.contentId=core.input.required(),this.logout=(0,core.output)(),this.contentElement=core.viewChild.required("content"),this.innerContentElement=core.viewChild.required("innerContent"),this.sidebarTemplate=core.viewChild.required("sidebar"),this.sidebarElement=(0,core.viewChild)("sidebarElement"),this.titleService=(0,core.inject)(FaviconService),this.globalStore=(0,core.inject)(global_store.v),this.sidebarService=(0,core.inject)(ng_bootstrap.RS),this.swipeService=(0,core.inject)(swipe_service.I),this.screenService=(0,core.inject)(screen_service.i),this.routingService=(0,core.inject)(routing_service.O),this.host=(0,core.inject)(core.ElementRef),this.navStore=(0,core.inject)(navigation_store.A),this.mobileHeaderTitle=(0,core.computed)((()=>{const campaignName=this.globalStore.campaignName();return campaignName?(0,string.ZH)(campaignName):""})),this.isLoading=this.globalStore.isLoadingPage,this.contentScrollEvents$=(0,rxjs_interop.br)(this.innerContentElement).pipe((0,rxjs_operators.u5)(),(0,switchMap.n)((innerContent=>(0,fromEvent.R)(innerContent.nativeElement,"scroll",{passive:!0})))),this.showScrollupIndicator$=this.contentScrollEvents$.pipe((0,debounceTime.B)(100),(0,map.T)((event=>{const scrollTop=event.target?.scrollTop;return(scrollTop??0)>app_constants.MQ}))),this.showScrollUpIndicator=(0,core.signal)(!0),this.pageSwipesRight$=this.swipeService.getSwipeEvents(this.host).pipe((0,filter.p)((swipeDistance=>swipeDistance>app_constants.Mw))),this.hasCampaignAdminPrivileges=this.globalStore.canPerformActionsOfRole("admin"),this.showSidebar=(0,core.signal)(!this.screenService.isMobile()),this.canShowSidebar=(0,core.computed)((()=>{const hasCampaign=!!this.globalStore.currentCampaign();return showSidebarSignal()&&hasCampaign})),this.homeUrl=(0,core.computed)((()=>this.routingService.getRoutePath("home",{campaign:this.globalStore.campaignName()}))),this.campaignBackgroundImage$=(0,rxjs_interop.br)(this.globalStore.currentCampaign).pipe((0,map.T)((campaign=>campaign?.background_image)),(0,rxjs_operators.fC)(1e3));const liveAnouncer=(0,core.inject)(a11y.Ai);(0,core.effect)((()=>{const loading=this.isLoading(),title=(0,core.untracked)((()=>this.navStore.currentRoute()?.title));if(!title||loading)return;const loadingMessage="Loaded "+title;liveAnouncer.announce(loadingMessage)})),this.pageSwipesRight$.pipe((0,rxjs_interop.pQ)()).subscribe((()=>this.openSidebar())),this.contentScrollEvents$.pipe((0,debounceTime.B)(50),(0,rxjs_interop.pQ)()).subscribe((event=>this.dispatchCustomPageScrollEvent(event)))}closeSidebar(){this.screenService.isMobile()&&(this.sidebarService.dismiss(),this.showSidebar.set(!1))}openSidebar(){this.screenService.isMobile()&&this.canShowSidebar()&&(this.sidebarService.open(this.sidebarTemplate(),{ariaLabelledBy:"offcanvas-basic-title"}),this.showSidebar.set(!0))}scrollToTop(){this.innerContentElement().nativeElement.scrollTo({top:0,behavior:"instant"})}dispatchCustomPageScrollEvent(event){const pageScrollEvent=new CustomEvent("page.scroll",{...event,detail:{pageElement:this.innerContentElement()}});this.globalStore.fireScrollEvent(pageScrollEvent)}static{this.ctorParameters=()=>[]}static{this.propDecorators={contentId:[{type:core.Input,args:[{isSignal:!0,alias:"contentId",required:!0,transform:void 0}]}],logout:[{type:core.Output,args:["logout"]}],contentElement:[{type:core.ViewChild,args:["content",{isSignal:!0}]}],innerContentElement:[{type:core.ViewChild,args:["innerContent",{isSignal:!0}]}],sidebarTemplate:[{type:core.ViewChild,args:["sidebar",{isSignal:!0}]}],sidebarElement:[{type:core.ViewChild,args:["sidebarElement",{isSignal:!0}]}]}}};PageComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"app-page",template:'@let campaign = globalStore.currentCampaign();\n@if (campaign) {\n  <div class="mobile">\n    <app-mobile-header\n      [canShowSidebar]="canShowSidebar()"\n      [title]="mobileHeaderTitle()"\n      [currentCampaignIconUrl]="campaign.icon"\n      [titleUrl]="homeUrl()"\n      (openSidebar)="openSidebar()"\n    ></app-mobile-header>\n  </div>\n\n  @if (canShowSidebar()) {\n    <div class="desktop">\n      <ng-template *ngTemplateOutlet="sidebar" />\n    </div>\n  }\n}\n\n<div class="page" #content>\n  <div class="page__content">\n    <button\n      class="page__scrollup-indicator"\n      [class.page__scrollup-indicator--visible]="\n        (showScrollupIndicator$ | async) === true\n      "\n      (click)="scrollToTop()"\n      [ngbTooltip]="\'Scroll to top\'"\n      aria-label="Scroll to top"\n      [hotkey]="\'t\'"\n      (hotkeyPressed)="scrollToTop()"\n    >\n      <app-icon [icon]="\'arrow-up-long\'" />\n    </button>\n    <main\n      #innerContent\n      class="page__main"\n      [id]="contentId()"\n      [attr.aria-busy]="isLoading()"\n    >\n      @if (isLoading()) {\n        <div class="page__loading-container" aria-hidden="true">\n          <app-spinner class="page__loading-spinner"></app-spinner>\n        </div>\n      }\n      <router-outlet #routerOutlet></router-outlet>\n    </main>\n  </div>\n\n  <app-page-background\n    #background\n    class="page__background"\n    [imageUrl]="(campaignBackgroundImage$ | async) ?? undefined"\n  ></app-page-background>\n</div>\n\n<ng-template #sidebar>\n  <app-sidebar\n    #sidebarElement\n    id="sidebar"\n    class="sidebar"\n    [campaign]="campaign"\n    [hasCampaignAdminPrivileges]="hasCampaignAdminPrivileges()"\n    (logout)="logout.emit()"\n    (closeSidebar)="closeSidebar()"\n    (click)="closeSidebar()"\n  ></app-sidebar>\n</ng-template>\n',imports:[sidebar_component.k,molecules.dg,router.n3,common.AsyncPipe,common.NgTemplateOutlet,MobileHeaderComponent,icon_component.R,hotkey_directive.G,spinner_component.t,ng_bootstrap.md],providers:[ng_bootstrap.RS],styles:[page_componentngResource_default()]})],PageComponent);const page_stories={title:"DesignSystem/Organisms/PageComponent",component:PageComponent,decorators:[(0,dist.moduleMetadata)({imports:[testing.c],providers:[{provide:FaviconService,useValue:{currentPageTitle:()=>"Some Title"}},{provide:routing_service.O,useClass:routing_mock_service.W},global_store.v]})],parameters:{layout:"fullscreen"},args:{serverUrl:"https://www.aldrune.com",user:{accessToken:{token:"abc123",exp:1651345060,type:"access"},refreshToken:{token:"def456",exp:1651345090,type:"refresh"},userId:123,userName:"John Doe",isAdmin:!0,isSuperUser:!1,campaignMemberships:{"Campaign A":"member","Campaign B":"admin"}},campaign:campaign_mock_service.jr}},Default=(args=>({props:{...args}})).bind({});Default.args={};const __namedExportsOrder=["Default"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"args => ({\n  props: {\n    ...args\n  }\n})",...Default.parameters?.docs?.source}}}},"./src/app/design/organisms/mobile-header/mobile-header.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,".navbar {\n  --bs-navbar-padding-y: var(--spacer-1);\n  --bs-navbar-color: var(--bs-white);\n  --bs-navbar-brand-color: var(--bs-white);\n  --bs-navbar-brand-hover-color: var(--bs-white);\n  --bs-navbar-hover-color: var(--bs-white);\n  --bs-navbar-active-color: var(--bs-white);\n  --bs-navbar-toggler-padding-x: var(--spacer-3);\n  --bs-navbar-toggler-padding-y: var(--spacer-2);\n}\n.navbar .navbar-brand {\n  flex: 1;\n  max-width: 100%;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  text-align: center;\n  margin-right: unset;\n}\n.navbar .navbar-brand .navbar-brand-icon {\n  --brand-height: calc(var(--navbar-height) - 6px);\n  height: var(--brand-height);\n  width: var(--brand-height);\n  border-radius: var(--bs-border-radius);\n  margin-right: var(--spacer-2);\n  margin-left: var(--spacer-2);\n}\n.navbar__offline-indicator {\n  border: var(--bs-border-style) 2px var(--bs-border-color);\n}\n\n.navbar-toggler:focus {\n  box-shadow: none;\n}\n.navbar-toggler:focus-visible {\n  outline: var(--focus-outline);\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./src/app/design/organisms/page/page.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,":host {\n  --sb-width: 18rem;\n  --sb-margin: var(--sb-width);\n  --navbar-height: 52px;\n  height: 100dvh;\n  max-height: 100dvh;\n  width: 100vw;\n  display: flex;\n  flex-direction: column;\n}\n@media (min-width: 768px) {\n  :host {\n    overflow: hidden;\n    flex-direction: row;\n  }\n}\n\n.mobile {\n  width: 100%;\n  z-index: 2;\n}\n@media (min-width: 768px) {\n  .mobile {\n    display: none;\n  }\n}\n\n.desktop {\n  display: none;\n}\n.desktop .sidebar {\n  width: var(--sb-width);\n}\n@media (min-width: 768px) {\n  .desktop {\n    display: unset;\n  }\n}\n\n.page {\n  flex: 1;\n  transition: margin-left 0.1s ease-out;\n  position: relative;\n  max-height: calc(100mvh - var(--navbar-height));\n  overflow-y: auto;\n}\n@media (min-width: 768px) {\n  .page {\n    position: unset;\n    height: 100%;\n    max-height: unset;\n  }\n}\n.page__scrollup-indicator {\n  display: block;\n  position: fixed;\n  width: var(--spacer-5);\n  height: var(--spacer-5);\n  right: var(--spacer-2);\n  background-color: var(--bs-secondary);\n  border-radius: 0 0 var(--bs-border-radius-xl) var(--bs-border-radius-xl);\n  border: calc(2 * var(--bs-border-width)) var(--bs-border-style) var(--bs-border-color);\n  border-top-width: 0px;\n  transform: translateY(-1000%);\n  visibility: hidden;\n  transition: transform 0.2s ease-in-out;\n  z-index: 1;\n}\n.page__scrollup-indicator--visible {\n  visibility: visible;\n  transform: translateY(0%);\n}\n.page__content {\n  padding: var(--spacer-0);\n  width: 100%;\n  height: 100%;\n}\n.page__main {\n  padding: var(--spacer-0);\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n  position: relative;\n}\n.page__background {\n  position: fixed;\n  transition: margin-left 0.1s ease-out;\n  top: 0;\n  left: 0;\n  z-index: -2;\n  width: 100%;\n  height: 100vh;\n}\n.page__background--shift-right {\n  margin-left: var(--sb-margin);\n}\n.page__loading-container {\n  position: absolute;\n  width: calc(2 * var(--spacer-5));\n  height: calc(2 * var(--spacer-5));\n  top: 25%;\n  left: calc(50% - var(--spacer-5));\n  background-color: var(--bs-secondary);\n  border-radius: var(--bs-border-radius-xl);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  opacity: 0.75;\n}\n\n:host ::ng-deep router-outlet + * {\n  z-index: 1;\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()}}]);