(self.webpackChunknimstoryfont_gui=self.webpackChunknimstoryfont_gui||[]).push([[8650],{"./src/app/_services/formly/formly-service.service.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{$:()=>FormlyService});var tslib__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),_angular_core__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/of.js"),rxjs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),src_app_design_organisms_formly_select_disable_formly_select_disable_field_component__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/app/design/organisms/formly-select-disable/formly-select-disable-field.component.ts"),src_utils_array__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/utils/array.ts"),src_utils_string__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/utils/string.ts");let FormlyService=class FormlyService{buildOverviewSelectConfig(config){const options$=config.required??!0?config.options$:this.addEmptyOption(config.options$,config),sortedOptions$=this.sortOptions(options$,config),validators=this.getValidators(config);return{key:config.key,type:"select",className:config.className,wrappers:config.wrappers,hideExpression:config.hide,props:{label:config.label??(0,src_utils_string__WEBPACK_IMPORTED_MODULE_1__.ZH)(`${config.key}`),labelProp:config.labelProp,valueProp:config.valueProp??"pk",options:sortedOptions$,required:config.required??!0,disabled:config.disabled},validators:{validation:validators}}}buildDisableSelectConfig(config){const options$=config.required??!0?config.options$:this.addEmptyOption(config.options$,config),sortedOptions$=this.sortOptions(options$,config),validators=this.getValidators(config);return{key:config.key,type:"select-disable",className:config.className,wrappers:config.wrappers,hideExpression:config.hide??!1,props:{label:config.label??(0,src_utils_string__WEBPACK_IMPORTED_MODULE_1__.ZH)(`${config.key}`),labelProp:config.labelProp,valueProp:config.valueProp??"pk",options:sortedOptions$,required:config.required??!0,warningMessage:config.warningMessage,additionalProperties:{disabledExpression:config.disabledExpression,tooltipMessage:config.tooltipMessage??"",showWrapperLabel:config.showWrapperLabel??!0}},validators:{validation:validators}}}buildStaticSelectConfig(config){const validators=this.getValidators(config);return{key:config.key,type:"select",className:config.className,wrappers:config.wrappers,hideExpression:config.hide??!1,props:{label:config.label??(0,src_utils_string__WEBPACK_IMPORTED_MODULE_1__.ZH)(`${config.key}`),options:config.options,required:config.required??!0,disabled:config.disabled},validators:{validation:validators}}}buildStaticStringSelectConfig(partialConfig){const options=partialConfig.options.map((str=>({label:str,value:str}))),config={...partialConfig,options};return this.buildStaticSelectConfig(config)}buildInputConfig(config){const validators=this.getValidators(config);switch(config.inputKind){case"NUMBER":validators.push("notInteger");break;case"NAME":validators.push("hasSpecialCharacters");break;case"NUMBER_FRACTION":validators.push("notNumber")}let innerInputType;switch(config.inputKind){case"NUMBER":innerInputType="number";break;case"COLOR":innerInputType="color";break;default:innerInputType="string"}return{key:config.key,type:"input",className:config.className,wrappers:config.wrappers,hideExpression:config.hide??!1,parsers:config.parsers,props:{maxLength:config.maxLength,max:config.max,minLength:config.minLength,min:config.min,label:config.label??(0,src_utils_string__WEBPACK_IMPORTED_MODULE_1__.ZH)(`${config.key}`),type:innerInputType,required:config.required??!0,disabled:!!config.disabled,placeholder:config.placeholder??void 0},validators:{validation:validators}}}buildSinglePasswordConfig(config){const validators=this.getValidators(config);return{key:config.key,type:"input",className:config.className,fieldGroupClassName:config.fieldGroupClassName,props:{label:config.label??"Password",type:"password",required:!0,placeholder:"Your password",disabled:config.disabled},validators:{validation:validators}}}buildConfirmedPasswordConfig(config){const validators=config.validators??[];validators.push("required");return{validators:{validation:[{name:"fieldMatch",options:{errorPath:"passwordConfirm"}}]},fieldGroup:[{key:"password",type:"input",className:config.className,props:{label:config.label??"Password",type:"password",required:!0,placeholder:"Password, at least 7 characters",disabled:config.disabled},validators:{validation:validators}},{key:"passwordConfirm",type:"input",className:config.className,props:{label:config.label?"Confirm "+config.label:"Password Confirmation",type:"password",required:!0,placeholder:"Please re-enter your password",disabled:config.disabled}}]}}buildCheckboxConfig(config){return{key:config.key,type:"checkbox",className:config.className,wrappers:config.wrappers,defaultValue:config.defaultValue,hideExpression:config.hide,props:{label:config.label??(0,src_utils_string__WEBPACK_IMPORTED_MODULE_1__.ZH)(`${config.key}`),required:config.required??!0,disabled:config.disabled}}}buildDatepickerConfig(config){const validators=this.getValidators(config);return validators.push("date"),{key:config.key,type:"datepicker",className:config.className,wrappers:config.wrappers,hideExpression:config.hide,props:{label:config.label??(0,src_utils_string__WEBPACK_IMPORTED_MODULE_1__.ZH)(`${config.key}`),required:config.required??!0,disabled:config.disabled},validators:{validation:validators}}}buildFileFieldConfig(config){const validators=this.getValidators(config);return{key:config.key,type:"file",className:config.className,wrappers:config.wrappers,hideExpression:config.hide,props:{buttonType:config.fileButtonType??"SECONDARY",fileFieldKind:config.fileFieldKind??"IMAGE",label:config.label??(0,src_utils_string__WEBPACK_IMPORTED_MODULE_1__.ZH)(`${config.key}`),required:config.required??!0,disabled:!!config.disabled},validators:{validation:validators}}}buildEditorConfig(config){const validators=this.getValidators(config);return{key:config.key,type:"text-editor",className:config.className,wrappers:config.wrappers,hideExpression:config.hide,props:{label:config.label??(0,src_utils_string__WEBPACK_IMPORTED_MODULE_1__.ZH)(`${config.key}`),required:config.required??!0,disabled:config.disabled},validators:{validation:validators}}}buildTypeaheadConfig(config){const validators=this.getValidators(config);return{key:config.key,type:"typeahead",className:config.className,wrappers:[...config.wrappers??[],"form-field"],props:{label:config.label??(0,src_utils_string__WEBPACK_IMPORTED_MODULE_1__.ZH)(`${config.key}`),required:config.required??!0,disabled:config.disabled,placeholder:"Type to receive suggestions",additionalProperties:{getOptions:config.getOptions,optionLabelProp:config.optionLabelProp,optionValueProp:config.optionValueProp,initialOption$:config.initialOption$,formatSearchTerm:config.formatSearchTerm}},validators:{validation:validators}}}toUpdateForm(fields){return fields.filter((field=>!("file"===field.type)))}getValidators(config){const validators=config.validators??[];return config.required&&validators.push("required"),validators}addEmptyOption(list,config){return Array.isArray(list)?(0,rxjs__WEBPACK_IMPORTED_MODULE_2__.of)([this.createEmptyOption(config),...list]):list.pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_3__.T)((values=>[this.createEmptyOption(config),...values])))}createEmptyOption(config){const emptyOption={};emptyOption[config.labelProp]=src_app_design_organisms_formly_select_disable_formly_select_disable_field_component__WEBPACK_IMPORTED_MODULE_0__.D.EMPTY_OPTION_LABEL;return emptyOption[config.valueProp??config.key]=src_app_design_organisms_formly_select_disable_formly_select_disable_field_component__WEBPACK_IMPORTED_MODULE_0__.D.EMPTY_OPTION_VALUE,emptyOption}sortOptions(list$,config){const{sortProp,sortDirection}=config;return sortProp?list$.pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_3__.T)((list=>(0,src_utils_array__WEBPACK_IMPORTED_MODULE_4__.Z)(list,sortProp,sortDirection??"asc")))):list$}};FormlyService=(0,tslib__WEBPACK_IMPORTED_MODULE_5__.Cg)([(0,_angular_core__WEBPACK_IMPORTED_MODULE_6__.Injectable)({providedIn:"root"})],FormlyService)},"./src/app/design/atoms/html-text/html-text.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{m:()=>HtmlTextComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var html_text_componentngResource=__webpack_require__("./src/app/design/atoms/html-text/html-text.component.scss?ngResource"),html_text_componentngResource_default=__webpack_require__.n(html_text_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs");let HtmlTextComponent=class HtmlTextComponent{constructor(){this.text=core.input.required()}static{this.propDecorators={text:[{type:core.Input,args:[{isSignal:!0,alias:"text",required:!0,transform:void 0}]}]}}};HtmlTextComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"app-html-text",template:'<div [innerHTML]="text()"></div>\n',standalone:!0,changeDetection:core.ChangeDetectionStrategy.OnPush,styles:[html_text_componentngResource_default()]})],HtmlTextComponent)},"./src/app/design/molecules/_models/menu.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{D:()=>DEFAULT_DELETE_MODAL_DATA});const DEFAULT_DELETE_MODAL_DATA={heading:"Delete article",body:"Are you sure you want to delete this article?",submitLabel:"Delete",submitIcon:"trash",cancelLabel:"Cancel",kind:"DANGER"}},"./src/app/design/organisms/spell/spell.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{o:()=>SpellComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var spell_componentngResource=__webpack_require__("./src/app/design/organisms/spell/spell.component.scss?ngResource"),spell_componentngResource_default=__webpack_require__.n(spell_componentngResource),common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs");const SPELL_CASTING_TIME=[{label:"1 Action",value:"1 Action"},{label:"1 Bonus Action",value:"1 Bonus Action"},{label:"1 Reaction",value:"1 Reaction"},{label:"1 Minute",value:"1 Minute"},{label:"10 Minutes",value:"10 Minutes"},{label:"1 Hour",value:"1 Hour"},{label:"8 Hours",value:"8 Hours"},{label:"12 Hours",value:"12 Hours"},{label:"24 Hours",value:"24 Hours"}],SPELL_SAVES=[{value:"ATK",label:"Attack"},{value:"STR",label:"Strength"},{value:"CON",label:"Constitution"},{value:"DEX",label:"Dexterity"},{value:"INT",label:"Intelligence"},{value:"WIS",label:"Wisdom"},{value:"CHA",label:"Charisma"}],SPELL_LEVELS=[{value:0,label:"Cantrip"},{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4"},{value:5,label:"5"},{value:6,label:"6"},{value:7,label:"7"},{value:8,label:"8"},{value:9,label:"9"}],SPELL_DURATION=[{value:"Instantaneous",label:"Instantaneous"},{value:"1 Round",label:"1 Round"},{value:"6 Rounds",label:"6 Rounds"},{value:"1 Minute",label:"1 Minute"},{value:"10 Minutes",label:"10 Minutes"},{value:"1 Hour",label:"1 Hour"},{value:"2 Hours",label:"2 Hours"},{value:"8 Hours",label:"8 Hours"},{value:"24 Hours",label:"24 Hours"},{value:"1 Day",label:"1 Day"},{value:"7 Day",label:"7 Days"},{value:"10 Day",label:"10 Days"},{value:"30 Day",label:"30 Days"},{value:"Special",label:"Special"},{value:"Until Dispelled",label:"Until Dispelled"}],SPELL_RANGES=[{value:"Self",label:"Self"},{value:"5 Feet",label:"5 Feet"},{value:"10 Feet",label:"10 Feet"},{value:"15 Feet",label:"15 Feet"},{value:"30 Feet",label:"30 Feet"},{value:"60 Feet",label:"60 Feet"},{value:"90 Feet",label:"90 Feet"},{value:"100 Feet",label:"100 Feet"},{value:"120 Feet",label:"120 Feet"},{value:"150 Feet",label:"150 Feet"},{value:"1 Mile",label:"1 Mile"},{value:"3 Miles",label:"3 Miles"},{value:"10 Miles",label:"10 Miles"}],SPELL_COMPONENTS=[{value:"V",label:"V"},{value:"S",label:"S"},{value:"M",label:"M"},{value:"VS",label:"VS"},{value:"VM",label:"VM"},{value:"SM",label:"SM"},{value:"VSM",label:"VSM"},{value:"VSM*",label:"VSM*"}],SPELL_SCHOOLS=[{value:"Abjuration",label:"Abjuration"},{value:"Conjuration",label:"Conjuration"},{value:"Divination",label:"Divination"},{value:"Enchantment",label:"Enchantment"},{value:"Evocation",label:"Evocation"},{value:"Illusion",label:"Illusion"},{value:"Necromancy",label:"Necromancy"},{value:"Transmutation",label:"Transmutation"}];var formly_service_service=__webpack_require__("./src/app/_services/formly/formly-service.service.ts"),html_text_component=__webpack_require__("./src/app/design/atoms/html-text/html-text.component.ts"),separator_component=__webpack_require__("./src/app/design/atoms/separator/separator.component.ts"),molecules=__webpack_require__("./src/app/design/molecules/index.ts"),menu=__webpack_require__("./src/app/design/molecules/_models/menu.ts"),context_menu_component=__webpack_require__("./src/app/design/molecules/context-menu/context-menu.component.ts");let SpellComponent=class SpellComponent{constructor(formlyService){this.formlyService=formlyService,this.spell=core.input.required(),this.playerClasses=core.input.required(),this.canUpdate=core.input.required(),this.canDelete=core.input.required(),this.canCreate=core.input.required(),this.serverModel=core.input.required(),this.cancelButtonType=(0,core.input)("SECONDARY"),this.submitButtonType=(0,core.input)("PRIMARY"),this.disabledHotkeys=(0,core.input)(!1),this.spellDelete=(0,core.output)(),this.spellCreate=(0,core.output)(),this.spellUpdate=(0,core.output)(),this.spellCreateCancel=(0,core.output)(),this.connectionDelete=(0,core.output)(),this.connectionCreate=(0,core.output)(),this.userModel=(0,core.signal)(void 0),this.state=(0,core.signal)("DISPLAY"),this.playerClassConnections=(0,core.computed)((()=>(this.spell()?.player_class_connections??[]).map((con=>({badgeValue:con,text:con.player_class_details?.name,link:void 0}))))),this.playerClassOptions=(0,core.computed)((()=>{const playerClassInSpell=new Set(this.playerClassConnections().map((con=>con.badgeValue.player_class)));return this.playerClasses().filter((playerClass=>playerClass.pk&&!playerClassInSpell.has(playerClass.pk)))})),this.contextMenuItems=(0,core.computed)((()=>{const menuItems=[];return this.canUpdate()&&menuItems.push({kind:"BUTTON",actionName:"update",label:"Edit",icon:"pencil",active:"UPDATE"===this.state()||"OUTDATED_UPDATE"===this.state(),hotkey:this.disabledHotkeys()?void 0:"e"}),this.canDelete()&&menuItems.push({kind:"CONFIRM",actionName:"delete",label:"Delete",icon:"trash",hotkey:this.disabledHotkeys()?void 0:"d",modal:{...menu.D,heading:`Delete ${this.spell()?.name}`,body:`Are you sure you want to delete ${this.spell()?.name}?`}}),menuItems})),this.formlyFields=[this.formlyService.buildCheckboxConfig({key:"concentration",label:"Concentration",defaultValue:!1,required:!1}),this.formlyService.buildCheckboxConfig({key:"ritual",defaultValue:!1,required:!1}),this.formlyService.buildInputConfig({key:"name",inputKind:"NAME"}),this.formlyService.buildStaticSelectConfig({key:"spell_level",label:"Spell Level",options:SPELL_LEVELS}),this.formlyService.buildStaticSelectConfig({key:"casting_time",label:"Casting Time",options:SPELL_CASTING_TIME}),this.formlyService.buildStaticSelectConfig({key:"duration",options:SPELL_DURATION}),this.formlyService.buildStaticSelectConfig({key:"range",options:SPELL_RANGES}),this.formlyService.buildStaticSelectConfig({key:"components",options:SPELL_COMPONENTS}),this.formlyService.buildStaticSelectConfig({key:"school",options:SPELL_SCHOOLS}),this.formlyService.buildStaticSelectConfig({key:"saving_throw",label:"Saving Throw",options:SPELL_SAVES,required:!1}),this.formlyService.buildInputConfig({key:"damage",label:"Effect",maxLength:40,required:!1,inputKind:"STRING"}),this.formlyService.buildEditorConfig({key:"description",required:!1})]}ngOnInit(){null==this.spell()?.pk&&this.canCreate()&&this.changeState("CREATE",this.spell())}onActionTriggered(action){switch(action){case"update":this.toggleAwayFromState(this.state());break;case"delete":this.onSpellDelete()}}changeState(newState,newModel){this.state.set(newState),this.userModel.set({...newModel})}onSpellCreate(spell){this.spellCreate.emit(spell),this.changeState("DISPLAY",void 0)}onSpellDelete(){this.spellDelete.emit(this.spell())}onSpellUpdate(spell){this.spellUpdate.emit(spell),this.changeState("DISPLAY",void 0)}onConnectionCreate(selectedClass){const connection={spell:this.spell()?.pk,player_class:selectedClass.pk};this.connectionCreate.emit(connection)}onSpellCreateCancel(){this.changeState("DISPLAY",void 0),this.spellCreateCancel.emit()}toggleAwayFromState(state){switch(state){case"CREATE":this.onSpellCreateCancel();break;case"DISPLAY":this.changeState("UPDATE",{...this.spell()});break;case"UPDATE":case"OUTDATED_UPDATE":this.changeState("DISPLAY",void 0)}}static{this.ctorParameters=()=>[{type:formly_service_service.$}]}static{this.propDecorators={spell:[{type:core.Input,args:[{isSignal:!0,alias:"spell",required:!0,transform:void 0}]}],playerClasses:[{type:core.Input,args:[{isSignal:!0,alias:"playerClasses",required:!0,transform:void 0}]}],canUpdate:[{type:core.Input,args:[{isSignal:!0,alias:"canUpdate",required:!0,transform:void 0}]}],canDelete:[{type:core.Input,args:[{isSignal:!0,alias:"canDelete",required:!0,transform:void 0}]}],canCreate:[{type:core.Input,args:[{isSignal:!0,alias:"canCreate",required:!0,transform:void 0}]}],serverModel:[{type:core.Input,args:[{isSignal:!0,alias:"serverModel",required:!0,transform:void 0}]}],cancelButtonType:[{type:core.Input,args:[{isSignal:!0,alias:"cancelButtonType",required:!1,transform:void 0}]}],submitButtonType:[{type:core.Input,args:[{isSignal:!0,alias:"submitButtonType",required:!1,transform:void 0}]}],disabledHotkeys:[{type:core.Input,args:[{isSignal:!0,alias:"disabledHotkeys",required:!1,transform:void 0}]}],spellDelete:[{type:core.Output,args:["spellDelete"]}],spellCreate:[{type:core.Output,args:["spellCreate"]}],spellUpdate:[{type:core.Output,args:["spellUpdate"]}],spellCreateCancel:[{type:core.Output,args:["spellCreateCancel"]}],connectionDelete:[{type:core.Output,args:["connectionDelete"]}],connectionCreate:[{type:core.Output,args:["connectionCreate"]}]}}};SpellComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"app-spell",template:'@if (spell() || state() === "CREATE") {\n  <div class="card__heading-container">\n    <div class="h4 card__heading heading">\n      @switch (state()) {\n        @case ("DISPLAY") {\n          <ng-container [ngTemplateOutlet]="displayHeading" />\n        }\n        @case ("UPDATE") {\n          <ng-container [ngTemplateOutlet]="updateHeading" />\n        }\n        @case ("CREATE") {\n          <ng-container [ngTemplateOutlet]="createHeading" />\n        }\n        @case ("OUTDATED_UPDATE") {\n          <ng-container [ngTemplateOutlet]="updateHeading" />\n        }\n      }\n    </div>\n    @if (state() !== "CREATE" && contextMenuItems().length > 0) {\n      <app-context-menu\n        [menuItems]="contextMenuItems()"\n        [menuButtonIcon]="\'ellipsis-vertical\'"\n        [menuButtonKind]="\'NONE\'"\n        [menuButtonAriaLabel]="\'Spell actions\'"\n        (actionTriggered)="onActionTriggered($event)"\n      />\n    }\n  </div>\n\n  @switch (state()) {\n    @case ("DISPLAY") {\n      <ng-container [ngTemplateOutlet]="displayBody" />\n    }\n    @case ("UPDATE") {\n      <ng-container [ngTemplateOutlet]="updateBody" />\n    }\n    @case ("OUTDATED_UPDATE") {\n      <ng-container [ngTemplateOutlet]="outdatedUpdateBody" />\n    }\n    @case ("CREATE") {\n      <ng-container [ngTemplateOutlet]="createBody" />\n    }\n  }\n}\n\n<ng-template #displayHeading>\n  {{ spell()?.name }}\n</ng-template>\n\n<ng-template #displayBody>\n  \x3c!-- Spell Table --\x3e\n  <div class="container">\n    <div class="row spell">\n      \x3c!-- Spell Level --\x3e\n      <div class="col-lg-3 col-6 spell__entry">\n        <strong class="spell__heading"> SPELL LEVEL </strong>\n        <div class="spell__body">\n          {{ spell()?.spell_level }}\n        </div>\n      </div>\n\n      \x3c!-- Casting Time --\x3e\n      <div class="col-lg-3 col-6 spell__entry">\n        <strong class="spell__heading"> CASTING TIME </strong>\n        <div class="spell__body">\n          {{ spell()?.casting_time }}\n        </div>\n      </div>\n\n      \x3c!-- Range/Area --\x3e\n      <div class="col-lg-3 col-6 spell__entry">\n        <strong class="spell__heading"> RANGE/AREA </strong>\n        <div class="spell__body">\n          {{ spell()?.range }}\n        </div>\n      </div>\n\n      \x3c!-- Components --\x3e\n      <div class="col-lg-3 col-6 spell__entry">\n        <strong class="spell__heading"> COMPONENTS </strong>\n        <div class="spell__body">\n          {{ spell()?.components }}\n        </div>\n      </div>\n\n      \x3c!-- Duration --\x3e\n      <div class="col-lg-3 col-6 spell__entry">\n        <strong class="spell__heading"> DURATION </strong>\n        <div class="spell__body">\n          {{ spell()?.duration }}\n        </div>\n      </div>\n\n      \x3c!-- School --\x3e\n      <div class="col-lg-3 col-6 spell__entry">\n        <strong class="spell__heading">SCHOOL</strong>\n        <div class="spell__body">\n          {{ spell()?.school }}\n        </div>\n      </div>\n\n      \x3c!-- Attack/Save --\x3e\n      <div class="col-lg-3 col-6 spell__entry">\n        <strong class="spell__heading"> ATTACK/SAVE </strong>\n        <div class="spell__body">\n          {{ spell()?.saving_throw }}\n        </div>\n      </div>\n\n      \x3c!-- Damage/Effect --\x3e\n      <div class="col-lg-3 col-6 spell__entry">\n        <strong class="spell__heading">EFFECT</strong>\n        <div class="spell__body">\n          {{ spell()?.damage }}\n        </div>\n      </div>\n\n      \x3c!-- Description --\x3e\n      <div class="col-12 spell__entry">\n        <strong class="spell__heading">DESCRIPTION</strong>\n        <div class="spell__body">\n          <app-html-text [text]="spell()?.description ?? \'\'"></app-html-text>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <app-separator></app-separator>\n\n  <app-badge-list\n    [createOptions]="{\n      kind: \'SELECT\',\n      formFieldLabel: \'Classes\',\n      config: {\n        options: playerClassOptions(),\n        labelProp: \'name\',\n        valueProp: \'pk\',\n      },\n    }"\n    [entries]="playerClassConnections()"\n    [canCreate]="canCreate()"\n    [canDelete]="canDelete()"\n    [label]="\'Classes\'"\n    (entryDelete)="connectionDelete.emit($event)"\n    (entryCreate)="onConnectionCreate($event)"\n  ></app-badge-list>\n</ng-template>\n\n<ng-template #updateHeading> Update \'{{ spell()?.name }}\' </ng-template>\n\n<ng-template #updateBody>\n  <app-form\n    [model]="userModel()"\n    [fields]="formlyFields"\n    [cancelButtonType]="cancelButtonType()"\n    [submitButtonType]="submitButtonType()"\n    [disabledHotkeys]="disabledHotkeys()"\n    (formlySubmit)="onSpellUpdate($event)"\n    (formlyCancel)="changeState(\'DISPLAY\', undefined)"\n  ></app-form>\n</ng-template>\n\n<ng-template #createHeading> Create new Spell </ng-template>\n\n<ng-template #createBody>\n  @if (canCreate()) {\n    <app-form\n      [model]="userModel()"\n      [fields]="formlyFields"\n      [cancelButtonType]="cancelButtonType()"\n      [submitButtonType]="submitButtonType()"\n      (formlySubmit)="onSpellCreate($event)"\n      (formlyCancel)="onSpellCreateCancel()"\n    ></app-form>\n  }\n</ng-template>\n\n<ng-template #outdatedUpdateBody>\n  @let userModelVal = userModel();\n  @if (userModelVal) {\n    <app-compare-form\n      [fields]="formlyFields"\n      [modelFromUser]="userModelVal"\n      [modelFromServer]="serverModel()"\n      [displayVertically]="true"\n      (formlySubmit)="onSpellUpdate($event)"\n      (formlyCancel)="changeState(\'DISPLAY\', undefined)"\n    ></app-compare-form>\n  }\n</ng-template>\n',changeDetection:core.ChangeDetectionStrategy.OnPush,imports:[common.NgTemplateOutlet,html_text_component.m,separator_component.F,molecules.pn,molecules.s2,molecules.zx,context_menu_component.E],styles:[spell_componentngResource_default()]})],SpellComponent)},"./src/utils/array.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>sortByProp});const sortByProp=(list,prop,sortDirection="asc")=>{const newList=[...list];return newList.sort(((a,b)=>{const sortValue=a[prop]>b[prop]?1:-1;return"desc"===sortDirection?-1*sortValue:sortValue})),newList}},"./node_modules/@storybook/addon-actions/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{XI:()=>action});var external_STORYBOOK_MODULE_PREVIEW_API_=__webpack_require__("storybook/internal/preview-api"),external_STORYBOOK_MODULE_CORE_EVENTS_PREVIEW_ERRORS_=__webpack_require__("storybook/internal/preview-errors"),external_STORYBOOK_MODULE_GLOBAL_=__webpack_require__("@storybook/global"),v4=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js"),__defProp=Object.defineProperty,ADDON_ID="storybook/actions",EVENT_ID=`${ADDON_ID}/action-event`,config={depth:10,clearOnStoryChange:!0,limit:50},findProto=(obj,callback)=>{let proto=Object.getPrototypeOf(obj);return!proto||callback(proto)?proto:findProto(proto,callback)},serializeArg=a=>{if("object"==typeof(e=a)&&e&&findProto(e,(proto=>/^Synthetic(?:Base)?Event$/.test(proto.constructor.name)))&&"function"==typeof e.persist){let e=Object.create(a.constructor.prototype,Object.getOwnPropertyDescriptors(a));e.persist();let viewDescriptor=Object.getOwnPropertyDescriptor(e,"view"),view=viewDescriptor?.value;return"object"==typeof view&&"Window"===view?.constructor.name&&Object.defineProperty(e,"view",{...viewDescriptor,value:Object.create(view.constructor.prototype)}),e}var e;return a},generateId=()=>"object"==typeof crypto&&"function"==typeof crypto.getRandomValues?(0,v4.A)():Date.now().toString(36)+Math.random().toString(36).substring(2);function action(name,options={}){let actionOptions={...config,...options},handler=function(...args){if(options.implicit){let storyRenderer=("__STORYBOOK_PREVIEW__"in external_STORYBOOK_MODULE_GLOBAL_.global?external_STORYBOOK_MODULE_GLOBAL_.global.__STORYBOOK_PREVIEW__:void 0)?.storyRenders.find((render=>"playing"===render.phase||"rendering"===render.phase));if(storyRenderer){let deprecated=!globalThis?.FEATURES?.disallowImplicitActionsInRenderV8,error=new external_STORYBOOK_MODULE_CORE_EVENTS_PREVIEW_ERRORS_.ImplicitActionsDuringRendering({phase:storyRenderer.phase,name,deprecated});if(!deprecated)throw error;console.warn(error)}}let channel=external_STORYBOOK_MODULE_PREVIEW_API_.addons.getChannel(),id=generateId(),serializedArgs=args.map(serializeArg),normalizedArgs=args.length>1?serializedArgs:serializedArgs[0],actionDisplayToEmit={id,count:0,data:{name,args:normalizedArgs},options:{...actionOptions,maxDepth:5+(actionOptions.depth||3),allowFunction:actionOptions.allowFunction||!1}};channel.emit(EVENT_ID,actionDisplayToEmit)};return handler.isAction=!0,handler.implicit=options.implicit,handler}var preview_exports={};((target,all)=>{for(var name in all)__defProp(target,name,{get:all[name],enumerable:!0})})(preview_exports,{argsEnhancers:()=>argsEnhancers,loaders:()=>loaders});var isInInitialArgs=(name,initialArgs)=>typeof initialArgs[name]>"u"&&!(name in initialArgs),argsEnhancers=[context=>{let{initialArgs,argTypes,parameters:{actions:actions2}}=context;return actions2?.disable||!argTypes?{}:Object.entries(argTypes).filter((([name,argType])=>!!argType.action)).reduce(((acc,[name,argType])=>(isInInitialArgs(name,initialArgs)&&(acc[name]=action("string"==typeof argType.action?argType.action:name)),acc)),{})},context=>{let{initialArgs,argTypes,id,parameters:{actions:actions2}}=context;if(!actions2||actions2.disable||!actions2.argTypesRegex||!argTypes)return{};let argTypesRegex=new RegExp(actions2.argTypesRegex);return Object.entries(argTypes).filter((([name])=>!!argTypesRegex.test(name))).reduce(((acc,[name,argType])=>(isInInitialArgs(name,initialArgs)&&(acc[name]=action(name,{implicit:!0,id})),acc)),{})}],subscribed=!1,loaders=[context=>{let{parameters:{actions:actions2}}=context;if(!actions2?.disable&&!subscribed&&"__STORYBOOK_TEST_ON_MOCK_CALL__"in external_STORYBOOK_MODULE_GLOBAL_.global&&"function"==typeof external_STORYBOOK_MODULE_GLOBAL_.global.__STORYBOOK_TEST_ON_MOCK_CALL__){(0,external_STORYBOOK_MODULE_GLOBAL_.global.__STORYBOOK_TEST_ON_MOCK_CALL__)(((mock,args)=>{let name=mock.getMockName();"spy"!==name&&(!/^next\/.*::/.test(name)||["next/router::useRouter()","next/navigation::useRouter()","next/navigation::redirect","next/cache::","next/headers::cookies().set","next/headers::cookies().delete","next/headers::headers().set","next/headers::headers().delete"].some((prefix=>name.startsWith(prefix))))&&action(name)(args)})),subscribed=!0}}]},"./src/app/design/atoms/html-text/html-text.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,"",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./src/app/design/organisms/spell/spell.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,":host {\n  --spell-heading-bg-color: hsla(0, 0%, 100%, 0.05);\n  --spell-body-bg-color: rgba(27, 31, 34, 0.95);\n}\n\n.card__heading-container {\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: var(--spacer-3);\n}\n.card__body {\n  margin-bottom: var(--spacer-3);\n}\n.card__delete-confirmer {\n  padding-left: var(--spacer-0);\n  padding-right: var(--spacer-0);\n  display: flex;\n  justify-content: flex-end;\n  width: 100%;\n  --confirmation-bg-color: var(--bs-dark);\n}\n\n.spell__entry {\n  display: flex;\n  flex-direction: column;\n  padding: var(--spacer-0);\n}\n.spell__heading {\n  border-bottom: solid 1px var(--bs-gray);\n  background-color: var(--spell-heading-bg-color);\n  padding: var(--spacer-2);\n}\n.spell__body {\n  height: 100%;\n  background-color: var(--spell-body-bg-color);\n  padding: var(--spacer-2);\n}\n\n.heading__subtext {\n  --bs-text-opacity: 1;\n  color: #9b9a9a;\n}\n\n.body {\n  margin-bottom: var(--spacer-4);\n}\n.body__entry {\n  margin-bottom: var(--spacer-4);\n}\n.body__subheading {\n  margin-bottom: var(--spacer-1);\n}\n.body__subbody {\n  display: flex;\n  flex-direction: column;\n  margin-left: var(--spacer-4);\n}\n.body__subbody--list {\n  margin-left: var(--spacer-2);\n}\n.body__link {\n  width: fit-content;\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()}}]);