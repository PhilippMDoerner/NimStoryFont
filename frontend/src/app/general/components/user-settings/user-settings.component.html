<app-profile-tab-layout>
  <h1 class="cdk-visually-hidden">Settings</h1>

  @if ((isMobile$ | async) !== true) {
    <section [attr.aria-labelledby]="shortcutsSectionLabelId">
      <h2 [id]="shortcutsSectionLabelId">Shortcuts</h2>

      <div class="shortcut-table">
        <div class="container">
          <div class="shortcut-table__row row h4">
            <div class="col-4">Action</div>
            <div class="col-4">Shortcut</div>
            <div class="col-4">Edit Actions</div>
          </div>
        </div>
        <app-list
          class="container shortcut-table__body"
          [entries]="mappingEntries() ?? []"
          [listItemClasses]="['row', 'shortcut-table__row']"
        >
          <ng-template #entryTemplate let-context>
            <div class="col-4">
              <div class="cdk-visually-hidden">Shortcut Action</div>
              {{ context.data.actionLabel }}
            </div>
            <div class="col-4">
              <div class="cdk-visually-hidden">Shortcut Keys</div>

              {{ context.data.shortcut }}
              @if (context.data.modified) {
                <strong class="table__modified-column">*</strong>
              }
            </div>
            <div class="col-4">
              <div class="cdk-visually-hidden">Actions</div>

              <button
                btn
                [kind]="'SECONDARY'"
                [icon]="'pencil'"
                [size]="'SMALL'"
                [tabIndex]="context.isInFocus ? 0 : -1"
                [attr.aria-label]="
                  'Edit shortcut for action \'' +
                  context.data.actionLabel +
                  '\''
                "
                (clicked)="openEditShortcutDialog(editShortcutDialog)"
              ></button>

              <ng-template #editShortcutDialog>
                <app-edit-shortcut-dialog
                  [action]="context.data.action"
                  (cancelled)="modalService.dismissAll()"
                  (shortcutEdited)="
                    emitShortcutEdited($event.action, $event.shortcut)
                  "
                />
              </ng-template>

              <button
                btn
                [class.table__action-button--hidden]="!context.data.modified"
                [tabIndex]="context.isInFocus ? 0 : -1"
                [kind]="'INFO-OUTLINE'"
                [icon]="'arrow-rotate-left'"
                [attr.aria-label]="
                  'Reset shortcut for action ' + context.data.actionLabel
                "
                (clicked)="emitShortcutReset(context.data.action)"
              ></button>
            </div>
          </ng-template>
        </app-list>
      </div>
    </section>
  }
</app-profile-tab-layout>
