(self.webpackChunknimstoryfont_gui=self.webpackChunknimstoryfont_gui||[]).push([[3999],{"./src/app/_services/formly/formly-service.service.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{$:()=>FormlyService});var tslib__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),_angular_core__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/of.js"),rxjs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),src_app_design_organisms_formly_select_disable_formly_select_disable_field_component__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/app/design/organisms/formly-select-disable/formly-select-disable-field.component.ts"),src_utils_array__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/utils/array.ts"),src_utils_string__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/utils/string.ts");let FormlyService=class FormlyService{buildOverviewSelectConfig(config){const options$=config.required??!0?config.options$:this.addEmptyOption(config.options$,config),sortedOptions$=this.sortOptions(options$,config),validators=this.getValidators(config);return{key:config.key,type:"select",className:config.className,wrappers:config.wrappers,hideExpression:config.hide,props:{label:config.label??(0,src_utils_string__WEBPACK_IMPORTED_MODULE_1__.ZH)(`${config.key}`),labelProp:config.labelProp,valueProp:config.valueProp??"pk",options:sortedOptions$,required:config.required??!0,disabled:config.disabled},validators:{validation:validators}}}buildDisableSelectConfig(config){const options$=config.required??!0?config.options$:this.addEmptyOption(config.options$,config),sortedOptions$=this.sortOptions(options$,config),validators=this.getValidators(config);return{key:config.key,type:"select-disable",className:config.className,wrappers:config.wrappers,hideExpression:config.hide??!1,props:{label:config.label??(0,src_utils_string__WEBPACK_IMPORTED_MODULE_1__.ZH)(`${config.key}`),labelProp:config.labelProp,valueProp:config.valueProp??"pk",options:sortedOptions$,required:config.required??!0,warningMessage:config.warningMessage,additionalProperties:{disabledExpression:config.disabledExpression,tooltipMessage:config.tooltipMessage??"",showWrapperLabel:config.showWrapperLabel??!0}},validators:{validation:validators}}}buildStaticSelectConfig(config){const validators=this.getValidators(config);return{key:config.key,type:"select",className:config.className,wrappers:config.wrappers,hideExpression:config.hide??!1,props:{label:config.label??(0,src_utils_string__WEBPACK_IMPORTED_MODULE_1__.ZH)(`${config.key}`),options:config.options,required:config.required??!0,disabled:config.disabled},validators:{validation:validators}}}buildStaticStringSelectConfig(partialConfig){const options=partialConfig.options.map((str=>({label:str,value:str}))),config={...partialConfig,options};return this.buildStaticSelectConfig(config)}buildInputConfig(config){const validators=this.getValidators(config);switch(config.inputKind){case"NUMBER":validators.push("notInteger");break;case"NAME":validators.push("hasSpecialCharacters");break;case"NUMBER_FRACTION":validators.push("notNumber")}let innerInputType;switch(config.inputKind){case"NUMBER":innerInputType="number";break;case"COLOR":innerInputType="color";break;default:innerInputType="string"}return{key:config.key,type:"input",className:config.className,wrappers:config.wrappers,hideExpression:config.hide??!1,parsers:config.parsers,props:{maxLength:config.maxLength,max:config.max,minLength:config.minLength,min:config.min,label:config.label??(0,src_utils_string__WEBPACK_IMPORTED_MODULE_1__.ZH)(`${config.key}`),type:innerInputType,required:config.required??!0,disabled:!!config.disabled,placeholder:config.placeholder??void 0},validators:{validation:validators}}}buildSinglePasswordConfig(config){const validators=this.getValidators(config);return{key:config.key,type:"input",className:config.className,fieldGroupClassName:config.fieldGroupClassName,props:{label:config.label??"Password",type:"password",required:!0,placeholder:"Your password",disabled:config.disabled},validators:{validation:validators}}}buildConfirmedPasswordConfig(config){const validators=config.validators??[];validators.push("required");return{validators:{validation:[{name:"fieldMatch",options:{errorPath:"passwordConfirm"}}]},fieldGroup:[{key:"password",type:"input",className:config.className,props:{label:config.label??"Password",type:"password",required:!0,placeholder:"Password, at least 7 characters",disabled:config.disabled},validators:{validation:validators}},{key:"passwordConfirm",type:"input",className:config.className,props:{label:config.label?"Confirm "+config.label:"Password Confirmation",type:"password",required:!0,placeholder:"Please re-enter your password",disabled:config.disabled}}]}}buildCheckboxConfig(config){return{key:config.key,type:"checkbox",className:config.className,wrappers:config.wrappers,defaultValue:config.defaultValue,hideExpression:config.hide,props:{label:config.label??(0,src_utils_string__WEBPACK_IMPORTED_MODULE_1__.ZH)(`${config.key}`),required:config.required??!0,disabled:config.disabled}}}buildDatepickerConfig(config){const validators=this.getValidators(config);return validators.push("date"),{key:config.key,type:"datepicker",className:config.className,wrappers:config.wrappers,hideExpression:config.hide,props:{label:config.label??(0,src_utils_string__WEBPACK_IMPORTED_MODULE_1__.ZH)(`${config.key}`),required:config.required??!0,disabled:config.disabled},validators:{validation:validators}}}buildFileFieldConfig(config){const validators=this.getValidators(config);return{key:config.key,type:"file",className:config.className,wrappers:config.wrappers,hideExpression:config.hide,props:{buttonType:config.fileButtonType??"SECONDARY",fileFieldKind:config.fileFieldKind??"IMAGE",label:config.label??(0,src_utils_string__WEBPACK_IMPORTED_MODULE_1__.ZH)(`${config.key}`),required:config.required??!0,disabled:!!config.disabled},validators:{validation:validators}}}buildEditorConfig(config){const validators=this.getValidators(config);return{key:config.key,type:"text-editor",className:config.className,wrappers:config.wrappers,hideExpression:config.hide,props:{label:config.label??(0,src_utils_string__WEBPACK_IMPORTED_MODULE_1__.ZH)(`${config.key}`),required:config.required??!0,disabled:config.disabled},validators:{validation:validators}}}buildTypeaheadConfig(config){const validators=this.getValidators(config);return{key:config.key,type:"typeahead",className:config.className,wrappers:[...config.wrappers??[],"form-field"],props:{label:config.label??(0,src_utils_string__WEBPACK_IMPORTED_MODULE_1__.ZH)(`${config.key}`),required:config.required??!0,disabled:config.disabled,placeholder:"Type to receive suggestions",additionalProperties:{getOptions:config.getOptions,optionLabelProp:config.optionLabelProp,optionValueProp:config.optionValueProp,initialOption$:config.initialOption$,formatSearchTerm:config.formatSearchTerm}},validators:{validation:validators}}}toUpdateForm(fields){return fields.filter((field=>!("file"===field.type)))}getValidators(config){const validators=config.validators??[];return config.required&&validators.push("required"),validators}addEmptyOption(list,config){return Array.isArray(list)?(0,rxjs__WEBPACK_IMPORTED_MODULE_2__.of)([this.createEmptyOption(config),...list]):list.pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_3__.T)((values=>[this.createEmptyOption(config),...values])))}createEmptyOption(config){const emptyOption={};emptyOption[config.labelProp]=src_app_design_organisms_formly_select_disable_formly_select_disable_field_component__WEBPACK_IMPORTED_MODULE_0__.D.EMPTY_OPTION_LABEL;return emptyOption[config.valueProp??config.key]=src_app_design_organisms_formly_select_disable_formly_select_disable_field_component__WEBPACK_IMPORTED_MODULE_0__.D.EMPTY_OPTION_VALUE,emptyOption}sortOptions(list$,config){const{sortProp,sortDirection}=config;return sortProp?list$.pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_3__.T)((list=>(0,src_utils_array__WEBPACK_IMPORTED_MODULE_4__.Z)(list,sortProp,sortDirection??"asc")))):list$}};FormlyService=(0,tslib__WEBPACK_IMPORTED_MODULE_5__.Cg)([(0,_angular_core__WEBPACK_IMPORTED_MODULE_6__.Injectable)({providedIn:"root"})],FormlyService)},"./src/app/_services/utils/campaign.mock.service.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{_B:()=>dummyCampaigns,jr:()=>dummyCampaign,mE:()=>dummyStatistics});const dummyCampaigns=[{pk:1,name:"Aldrune",subtitle:"A campaign made by Samuel Day and recorded by Philipp Dörner<br>through the eyes of Relentless",background_image:"/media/campaign_backgrounds/bg.jpg",is_deactivated:!1,has_audio_recording_permission:!0,icon:"/media/campaign_icons/favicon-128x128.png",default_map:1,default_map_details:{icon:"map",image:"pic05_sMT2d6M.jpg",name:"Aldrune",id:1},duration:{start_date:"2020-04-07T00:00:00.000000Z",last_date:"2023-04-11T00:00:00.000000Z"}},{pk:2,name:"Jōzai Corp",subtitle:"Welcome to Jōzai Corp, please enjoy your employment.",background_image:"/media/campaign_backgrounds/shanghai_city_snlaYDd.jpg",is_deactivated:!1,has_audio_recording_permission:!1,icon:"/media/campaign_icons/icon.png",default_map:void 0,default_map_details:void 0,duration:{start_date:"2022-01-15T00:00:00.000000Z",last_date:"2022-02-19T00:00:00.000000Z"}}],dummyStatistics={character_count:265,item_count:142,location_count:229,creature_count:42,diaryentry_count:101,encounter_count:954,organization_count:46,quest_count:69,quote_count:203,session_audio_count:69,timestamp_count:1121,map_count:7,marker_count:136,spell_count:22,session_count:90,rule_count:17},dummyCampaign={name:"Aldrune",subtitle:"A campaign for testing",pk:1,background_image:"/assets/default_images/audio_pic_default.webp",icon:"https://www.aldrune.com/media/campaign_icons/favicon-128x128.png",default_map:123,default_map_details:{id:123,name:"Default Map",icon:"plus",image:"blub.jpg"},is_deactivated:!1,has_audio_recording_permission:!0,members:[{username:"isofruit",password:"password1",pk:1,api_permissions:["permission1","permission2"],groups:[1,2],group_details:[{name:"group1",pk:1},{name:"group2",pk:2}],is_staff:!0,is_superuser:!1,email:"user1@example.com",is_active:!0},{username:"user2",password:"password2",pk:2,api_permissions:["permission3","permission4"],groups:[1,3],group_details:[{name:"group1",pk:1},{name:"group3",pk:3}],is_staff:!1,is_superuser:!1,email:"user2@example.com",is_active:!0}],admins:[{username:"admin",password:"adminpassword",pk:3,api_permissions:["permission1","permission2","permission3","permission4"],groups:[1,2,3],group_details:[{name:"group1",pk:1},{name:"group2",pk:2},{name:"group3",pk:3}],is_staff:!0,is_superuser:!0,email:"admin@example.com",is_active:!0},{username:"user3",password:"password3",pk:4,api_permissions:["permission1"],groups:[1],group_details:[{name:"group1",pk:1}],is_staff:!1,is_superuser:!1,email:"user3@example.com",is_active:!0}],guests:[{username:"user4",password:"password4",pk:5,api_permissions:["permission2","permission3"],groups:[2,3],group_details:[{name:"group2",pk:2},{name:"group3",pk:3}],is_staff:!1,is_superuser:!1,email:"user4@example.com",is_active:!0},{username:"user5",password:"password5",pk:6,api_permissions:["permission4"],groups:[3],group_details:[{name:"group3",pk:3}],is_staff:!1,is_superuser:!1,email:"user5@example.com",is_active:!0}],member_group_name:"Members",admin_group_name:"Admins",guest_group_name:"Guests",emptySearchResponses:[{id:1,text:"Empty response 1",campaign:1},{id:2,text:"Empty response 2",campaign:1}]}},"./src/app/design/atoms/card/card.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{i:()=>CardComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var card_componentngResource=__webpack_require__("./src/app/design/atoms/card/card.component.scss?ngResource"),card_componentngResource_default=__webpack_require__.n(card_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs");let CardComponent=class CardComponent{};CardComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"app-card",template:'<div class="card">\n  <ng-content></ng-content>\n</div>',changeDetection:core.ChangeDetectionStrategy.OnPush,imports:[],styles:[card_componentngResource_default()]})],CardComponent)},"./src/app/design/atoms/html-text/html-text.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{m:()=>HtmlTextComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var html_text_componentngResource=__webpack_require__("./src/app/design/atoms/html-text/html-text.component.scss?ngResource"),html_text_componentngResource_default=__webpack_require__.n(html_text_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs");let HtmlTextComponent=class HtmlTextComponent{constructor(){this.text=core.input.required()}static{this.propDecorators={text:[{type:core.Input,args:[{isSignal:!0,alias:"text",required:!0,transform:void 0}]}]}}};HtmlTextComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"app-html-text",template:'<div [innerHTML]="text()"></div>\n',standalone:!0,changeDetection:core.ChangeDetectionStrategy.OnPush,styles:[html_text_componentngResource_default()]})],HtmlTextComponent)},"./src/app/design/organisms/page-container/page-container.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{i:()=>PageContainerComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var page_container_componentngResource=__webpack_require__("./src/app/design/organisms/page-container/page-container.component.scss?ngResource"),page_container_componentngResource_default=__webpack_require__.n(page_container_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),animations=__webpack_require__("./node_modules/@angular/animations/fesm2022/animations.mjs");const fadeIn=(0,animations.hZ)("fadeIn",[(0,animations.kY)(":enter",[(0,animations.iF)({opacity:0}),(0,animations.i0)("250ms ease-in",(0,animations.iF)({opacity:1}))]),(0,animations.kY)(":leave",[(0,animations.iF)({opacity:1}),(0,animations.i0)("250ms ease-out",(0,animations.iF)({opacity:0}))])]);(0,animations.hZ)("fadeOut",[(0,animations.kY)(":leave",[(0,animations.iF)({opacity:1}),(0,animations.i0)("250ms ease-out",(0,animations.iF)({opacity:0}))])]);let PageContainerComponent=class PageContainerComponent{};PageContainerComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"app-page-container",template:'<div class="page" [@fadeIn]>\n  <div class="page__foreground">\n    <ng-content></ng-content>\n  </div>\n</div>\n',imports:[],animations:[fadeIn],styles:[page_container_componentngResource_default()]})],PageContainerComponent)},"./src/utils/array.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>sortByProp});const sortByProp=(list,prop,sortDirection="asc")=>{const newList=[...list];return newList.sort(((a,b)=>{const sortValue=a[prop]>b[prop]?1:-1;return"desc"===sortDirection?-1*sortValue:sortValue})),newList}},"./node_modules/@storybook/addon-actions/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{XI:()=>action});var external_STORYBOOK_MODULE_PREVIEW_API_=__webpack_require__("storybook/internal/preview-api"),external_STORYBOOK_MODULE_CORE_EVENTS_PREVIEW_ERRORS_=__webpack_require__("storybook/internal/preview-errors"),external_STORYBOOK_MODULE_GLOBAL_=__webpack_require__("@storybook/global"),v4=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js"),__defProp=Object.defineProperty,ADDON_ID="storybook/actions",EVENT_ID=`${ADDON_ID}/action-event`,config={depth:10,clearOnStoryChange:!0,limit:50},findProto=(obj,callback)=>{let proto=Object.getPrototypeOf(obj);return!proto||callback(proto)?proto:findProto(proto,callback)},serializeArg=a=>{if("object"==typeof(e=a)&&e&&findProto(e,(proto=>/^Synthetic(?:Base)?Event$/.test(proto.constructor.name)))&&"function"==typeof e.persist){let e=Object.create(a.constructor.prototype,Object.getOwnPropertyDescriptors(a));e.persist();let viewDescriptor=Object.getOwnPropertyDescriptor(e,"view"),view=viewDescriptor?.value;return"object"==typeof view&&"Window"===view?.constructor.name&&Object.defineProperty(e,"view",{...viewDescriptor,value:Object.create(view.constructor.prototype)}),e}var e;return a},generateId=()=>"object"==typeof crypto&&"function"==typeof crypto.getRandomValues?(0,v4.A)():Date.now().toString(36)+Math.random().toString(36).substring(2);function action(name,options={}){let actionOptions={...config,...options},handler=function(...args){if(options.implicit){let storyRenderer=("__STORYBOOK_PREVIEW__"in external_STORYBOOK_MODULE_GLOBAL_.global?external_STORYBOOK_MODULE_GLOBAL_.global.__STORYBOOK_PREVIEW__:void 0)?.storyRenders.find((render=>"playing"===render.phase||"rendering"===render.phase));if(storyRenderer){let deprecated=!globalThis?.FEATURES?.disallowImplicitActionsInRenderV8,error=new external_STORYBOOK_MODULE_CORE_EVENTS_PREVIEW_ERRORS_.ImplicitActionsDuringRendering({phase:storyRenderer.phase,name,deprecated});if(!deprecated)throw error;console.warn(error)}}let channel=external_STORYBOOK_MODULE_PREVIEW_API_.addons.getChannel(),id=generateId(),serializedArgs=args.map(serializeArg),normalizedArgs=args.length>1?serializedArgs:serializedArgs[0],actionDisplayToEmit={id,count:0,data:{name,args:normalizedArgs},options:{...actionOptions,maxDepth:5+(actionOptions.depth||3),allowFunction:actionOptions.allowFunction||!1}};channel.emit(EVENT_ID,actionDisplayToEmit)};return handler.isAction=!0,handler.implicit=options.implicit,handler}var preview_exports={};((target,all)=>{for(var name in all)__defProp(target,name,{get:all[name],enumerable:!0})})(preview_exports,{argsEnhancers:()=>argsEnhancers,loaders:()=>loaders});var isInInitialArgs=(name,initialArgs)=>typeof initialArgs[name]>"u"&&!(name in initialArgs),argsEnhancers=[context=>{let{initialArgs,argTypes,parameters:{actions:actions2}}=context;return actions2?.disable||!argTypes?{}:Object.entries(argTypes).filter((([name,argType])=>!!argType.action)).reduce(((acc,[name,argType])=>(isInInitialArgs(name,initialArgs)&&(acc[name]=action("string"==typeof argType.action?argType.action:name)),acc)),{})},context=>{let{initialArgs,argTypes,id,parameters:{actions:actions2}}=context;if(!actions2||actions2.disable||!actions2.argTypesRegex||!argTypes)return{};let argTypesRegex=new RegExp(actions2.argTypesRegex);return Object.entries(argTypes).filter((([name])=>!!argTypesRegex.test(name))).reduce(((acc,[name,argType])=>(isInInitialArgs(name,initialArgs)&&(acc[name]=action(name,{implicit:!0,id})),acc)),{})}],subscribed=!1,loaders=[context=>{let{parameters:{actions:actions2}}=context;if(!actions2?.disable&&!subscribed&&"__STORYBOOK_TEST_ON_MOCK_CALL__"in external_STORYBOOK_MODULE_GLOBAL_.global&&"function"==typeof external_STORYBOOK_MODULE_GLOBAL_.global.__STORYBOOK_TEST_ON_MOCK_CALL__){(0,external_STORYBOOK_MODULE_GLOBAL_.global.__STORYBOOK_TEST_ON_MOCK_CALL__)(((mock,args)=>{let name=mock.getMockName();"spy"!==name&&(!/^next\/.*::/.test(name)||["next/router::useRouter()","next/navigation::useRouter()","next/navigation::redirect","next/cache::","next/headers::cookies().set","next/headers::cookies().delete","next/headers::headers().set","next/headers::headers().delete"].some((prefix=>name.startsWith(prefix))))&&action(name)(args)})),subscribed=!0}}]},"./src/app/design/templates/campaign-admin/campaign-admin.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>campaign_admin_stories});var animations=__webpack_require__("./node_modules/@angular/platform-browser/fesm2022/animations.mjs"),testing=__webpack_require__("./node_modules/@angular/router/fesm2022/testing.mjs"),dist=__webpack_require__("./node_modules/@storybook/addon-actions/dist/index.mjs"),angular_dist=__webpack_require__("./node_modules/@storybook/angular/dist/index.mjs"),formly_constants=__webpack_require__("./src/app/_modules/formly_constants.ts"),campaign_mock_service=__webpack_require__("./src/app/_services/utils/campaign.mock.service.ts"),tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var campaign_admin_componentngResource=__webpack_require__("./src/app/design/templates/campaign-admin/campaign-admin.component.scss?ngResource"),campaign_admin_componentngResource_default=__webpack_require__.n(campaign_admin_componentngResource),common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),rxjs_interop=__webpack_require__("./node_modules/@angular/core/fesm2022/rxjs-interop.mjs"),router=__webpack_require__("./node_modules/@angular/router/fesm2022/router.mjs"),map=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),formly_service_service=__webpack_require__("./src/app/_services/formly/formly-service.service.ts"),routing_service=__webpack_require__("./src/app/_services/routing.service.ts"),button_component=__webpack_require__("./src/app/design/atoms/button/button.component.ts"),card_component=__webpack_require__("./src/app/design/atoms/card/card.component.ts"),html_text_component=__webpack_require__("./src/app/design/atoms/html-text/html-text.component.ts"),icon_component=__webpack_require__("./src/app/design/atoms/icon/icon.component.ts"),info_circle_tooltip_component=__webpack_require__("./src/app/design/atoms/info-circle-tooltip/info-circle-tooltip.component.ts"),ng_bootstrap=__webpack_require__("./node_modules/@ng-bootstrap/ng-bootstrap/fesm2022/ng-bootstrap.mjs"),molecules=__webpack_require__("./src/app/design/molecules/index.ts"),page_container_component=__webpack_require__("./src/app/design/organisms/page-container/page-container.component.ts"),button_link_component=__webpack_require__("./src/app/design/atoms/button-link/button-link.component.ts");let CampaignAdminComponent=class CampaignAdminComponent{constructor(routingService,formlyService){this.routingService=routingService,this.formlyService=formlyService,this.users=(0,core.input)(),this.removeMember=(0,core.output)(),this.removeAdmin=(0,core.output)(),this.removeGuest=(0,core.output)(),this.addMember=(0,core.output)(),this.addAdmin=(0,core.output)(),this.addGuest=(0,core.output)(),this.removeEmptySearchResponse=(0,core.output)(),this.addEmptySearchResponse=(0,core.output)(),this.deactivateCampaign=(0,core.output)(),this.users$=(0,rxjs_interop.br)(this.users).pipe((0,map.T)((x=>x??[]))),this.showMemberAddForm=!1,this.memberTooltip='Allows creating, reading, updating and deleting articles in this campaign. Also makes the person a possible "author" for diaryentries.',this.memberFormlyFields=(0,core.computed)((()=>[this.formlyService.buildDisableSelectConfig({key:"pk",labelProp:"username",sortProp:"username",label:"User",options$:this.users$,disabledExpression:selectOptions$=>selectOptions$.pipe((0,map.T)((selectOptions=>selectOptions.map((opt=>this.isInGroup(opt,this.campaign.member_group_name)))))),tooltipMessage:"Members typically represent the individual player characters + the GM(s)",warningMessage:"The user you selected is already member of this campaign"})])),this.showAdminAddForm=!1,this.adminTooltip='Allows adding admins, members and guests to a campaign. Does not add the person to the list of possible "authors" for diaryentries.',this.adminFormlyFields=(0,core.computed)((()=>[this.formlyService.buildDisableSelectConfig({key:"pk",labelProp:"username",sortProp:"username",label:"User",options$:this.users$,disabledExpression:selectOptions$=>selectOptions$.pipe((0,map.T)((selectOptions=>selectOptions.map((opt=>this.isInGroup(opt,this.campaign.admin_group_name)))))),tooltipMessage:"Keep in mind that being an admin only represents being the one administering this campaign, not being a member of it!",warningMessage:"The user you selected is already admin of this campaign"})])),this.showGuestAddForm=!1,this.guestTooltip="Allows only reading articles in this campaign.",this.guestFormlyFields=(0,core.computed)((()=>[this.formlyService.buildDisableSelectConfig({key:"pk",labelProp:"username",sortProp:"username",label:"User",options$:this.users$,disabledExpression:selectOptions$=>selectOptions$.pipe((0,map.T)((selectOptions=>selectOptions.map((opt=>{const isAdmin=this.isInGroup(opt,this.campaign.admin_group_name),isMember=this.isInGroup(opt,this.campaign.member_group_name),isGuest=this.isInGroup(opt,this.campaign.guest_group_name);return isAdmin||isMember||isGuest}))))),tooltipMessage:"Keep in mind that there's no point in being a guest when you're already a member or admin.",warningMessage:"The user you selected is already guest of this campaign"})])),this.showResponseForm=!1,this.responseFormlyFields=[this.formlyService.buildInputConfig({key:"text",placeholder:"Text to show for empty searches",maxLength:400,inputKind:"STRING"})]}ngOnChanges(){this.setUrls()}changeState(role,showForm){switch(role){case"member":case"globalmember":this.showMemberAddForm=showForm,this.memberModel={};break;case"admin":this.showAdminAddForm=showForm,this.adminModel={};break;case"guest":case"globalguest":this.showGuestAddForm=showForm,this.guestModel={}}}onAddUser(role,model){const userPk=model.pk,user=this.users()?.find((usr=>usr.pk===userPk));switch(role){case"member":case"globalmember":this.addMember.emit(user);break;case"admin":this.addAdmin.emit(user);break;case"guest":case"globalguest":this.addGuest.emit(user)}this.changeState(role,!1)}toggleResponseAddForm(){this.showResponseForm=!this.showResponseForm,this.showResponseForm&&(this.responseModel={campaign:this.campaign.pk})}onAddResponse(model){this.addEmptySearchResponse.emit(model),this.toggleResponseAddForm()}setUrls(){this.updateUrl=this.routingService.getRoutePath("campaign-update",{campaign:this.campaign.name}),this.homeUrl=this.routingService.getRoutePath("home",{campaign:this.campaign.name})}isInGroup(selectOption,groupName){const groupsOfUser=selectOption.group_details,isMember=groupsOfUser?.some((group=>group.name.toLowerCase()===groupName));return isMember??!1}static{this.ctorParameters=()=>[{type:routing_service.O},{type:formly_service_service.$}]}static{this.propDecorators={campaign:[{type:core.Input}],serverUrl:[{type:core.Input}],campaignStatistics:[{type:core.Input}],users:[{type:core.Input,args:[{isSignal:!0,alias:"users",required:!1,transform:void 0}]}],removeMember:[{type:core.Output,args:["removeMember"]}],removeAdmin:[{type:core.Output,args:["removeAdmin"]}],removeGuest:[{type:core.Output,args:["removeGuest"]}],addMember:[{type:core.Output,args:["addMember"]}],addAdmin:[{type:core.Output,args:["addAdmin"]}],addGuest:[{type:core.Output,args:["addGuest"]}],removeEmptySearchResponse:[{type:core.Output,args:["removeEmptySearchResponse"]}],addEmptySearchResponse:[{type:core.Output,args:["addEmptySearchResponse"]}],deactivateCampaign:[{type:core.Output,args:["deactivateCampaign"]}]}}};CampaignAdminComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"app-campaign-admin",template:'<app-page-container>\n  <article class="container campaign">\n    <div class="campaign__edit-container">\n      <a\n        btn\n        [routerLink]="updateUrl"\n        [icon]="\'pencil\'"\n        [kind]="\'SECONDARY\'"\n        aria-label="Update Campaign"\n      >\n      </a>\n    </div>\n\n    \x3c!-- Heading --\x3e\n    <div class="row">\n      <h1 class="text-center col campaign__heading">{{ campaign.name }}</h1>\n    </div>\n\n    \x3c!-- Image Fields of Campaign --\x3e\n    <h3>\n      <app-icon [icon]="\'cog\'"></app-icon>\n      Campaign Settings\n    </h3>\n\n    <app-card class="campaign__settings settings">\n      <div class="settings__images">\n        <div class="settings__image-container">\n          <h3 class="text-center">Background</h3>\n          <img\n            class="settings__image"\n            [ngbTooltip]="\'Campaign background image\'"\n            alt="Background image of this campaign"\n            [src]="serverUrl + campaign.background_image"\n          />\n        </div>\n\n        <div class="settings__image-container">\n          <h3 class="text-center">Icon</h3>\n          <img\n            class="settings__icon"\n            [ngbTooltip]="\'Campaign Icon\'"\n            alt="Icon of this campaign"\n            [src]="serverUrl + \'/\' + campaign.icon"\n          />\n        </div>\n      </div>\n\n      <div class="row settings__data">\n        <strong class="col-md-3 col-6">Default Map: </strong>\n        <div class="col-md-9 col-6">\n          {{ campaign.default_map_details?.name }}\n        </div>\n\n        <strong class="col-md-3 col-6">Subtitle: </strong>\n        <app-html-text\n          class="col-md-9 col-6"\n          [text]="campaign.subtitle"\n        ></app-html-text>\n      </div>\n    </app-card>\n\n    \x3c!-- Members & Admins--\x3e\n    <h3>\n      <app-icon [icon]="\'users-gear\'"></app-icon>\n      Campaign Members\n    </h3>\n\n    <div class="mb-3 row">\n      <app-card class="col-md-6 col-12 campaign__user-group user-group">\n        <h3 class="user-group__heading">\n          <app-info-circle-tooltip\n            [text]="\'Admins\'"\n            [tooltip]="adminTooltip"\n          ></app-info-circle-tooltip>\n        </h3>\n\n        @for (user of campaign.admins; track user.pk) {\n          <div class="user-group__user">\n            {{ user.username }}\n\n            <app-confirmation-toggle-button\n              class="user-group__remove-button"\n              [icon]="\'trash\'"\n              [toggleSize]="\'SMALL\'"\n              [enableHotkey]="false"\n              [itemToDelete]="\'admin access of \' + user.username"\n              (confirm)="removeAdmin.emit(user)"\n            ></app-confirmation-toggle-button>\n          </div>\n        }\n\n        \x3c!-- Form --\x3e\n        <div class="user-group__add-user">\n          @if (showAdminAddForm) {\n            <app-form\n              [model]="adminModel"\n              [fields]="adminFormlyFields()"\n              [cancelButtonType]="\'DARK\'"\n              (formlySubmit)="onAddUser(\'admin\', adminModel)"\n              (formlyCancel)="changeState(\'admin\', false)"\n            ></app-form>\n          } @else {\n            <ng-container *ngTemplateOutlet="addAdminButton" />\n          }\n        </div>\n      </app-card>\n\n      <app-card class="col-md-6 col-12 campaign__user-group user-group">\n        <h3 class="user-group__heading">\n          <app-info-circle-tooltip\n            [text]="\'Party Members\'"\n            [tooltip]="memberTooltip"\n          ></app-info-circle-tooltip>\n        </h3>\n\n        @for (user of campaign.members; track user.pk) {\n          <div class="user-group__user">\n            {{ user.username }}\n\n            <app-confirmation-toggle-button\n              class="user-group__remove-button"\n              [icon]="\'trash\'"\n              [toggleSize]="\'SMALL\'"\n              [enableHotkey]="false"\n              [itemToDelete]="\'member access of \' + user.username + \' ?\'"\n              (confirm)="removeMember.emit(user)"\n            ></app-confirmation-toggle-button>\n          </div>\n        }\n\n        \x3c!-- Form --\x3e\n        <div class="user-group__add-user">\n          @if (showMemberAddForm) {\n            <app-form\n              [model]="memberModel"\n              [fields]="memberFormlyFields()"\n              [cancelButtonType]="\'DARK\'"\n              (formlySubmit)="onAddUser(\'member\', memberModel)"\n              (formlyCancel)="changeState(\'member\', false)"\n            ></app-form>\n          } @else {\n            <ng-container *ngTemplateOutlet="addMemberButton" />\n          }\n        </div>\n      </app-card>\n\n      <app-card class="col-md-6 col-12 campaign__user-group user-group">\n        <h3 class="user-group__heading">\n          <app-info-circle-tooltip\n            [text]="\'Guests\'"\n            [tooltip]="guestTooltip"\n          ></app-info-circle-tooltip>\n        </h3>\n\n        @for (user of campaign.guests; track user.pk) {\n          <div class="user-group__user">\n            {{ user.username }}\n\n            <app-confirmation-toggle-button\n              class="user-group__remove-button"\n              [icon]="\'trash\'"\n              [toggleSize]="\'SMALL\'"\n              [enableHotkey]="false"\n              [itemToDelete]="\'guest access of \' + user.username + \' ?\'"\n              (confirm)="removeGuest.emit(user)"\n            ></app-confirmation-toggle-button>\n          </div>\n        }\n\n        \x3c!-- Form --\x3e\n        <div class="user-group__add-user">\n          @if (showGuestAddForm) {\n            <app-form\n              [model]="guestModel"\n              [fields]="guestFormlyFields()"\n              [cancelButtonType]="\'DARK\'"\n              (formlySubmit)="onAddUser(\'guest\', guestModel)"\n              (formlyCancel)="changeState(\'guest\', false)"\n            ></app-form>\n          } @else {\n            <ng-container *ngTemplateOutlet="addGuestButton" />\n          }\n        </div>\n      </app-card>\n    </div>\n\n    \x3c!-- Campaign Statistics --\x3e\n    <h1>\n      <app-icon [icon]="\'table\'"></app-icon>\n      Campaign Statistics\n    </h1>\n\n    <div class="container mb-5">\n      @for (statistic of campaignStatistics | keyvalue; track $index) {\n        <div class="row">\n          <div class="col-6 col-md-3">{{ statistic.key }}</div>\n          <div class="col-6 col-md-3">{{ statistic.value }}</div>\n        </div>\n      }\n    </div>\n\n    \x3c!-- EmptySearchResponses --\x3e\n    <h1>\n      <app-icon [icon]="\'search\'"></app-icon>\n      <app-info-circle-tooltip\n        [text]="\'Empty Search Responses\'"\n        [tooltip]="\n          \'Shown when a search came up empty. You can throw in in-jokes or references about things coming up empty.\'\n        "\n      ></app-info-circle-tooltip>\n    </h1>\n\n    <div class="row mb-5">\n      <div class="col-12 mb-3">\n        <app-card class="campaign__user-group user-group">\n          @for (\n            emptyResponse of campaign.emptySearchResponses;\n            track emptyResponse.id\n          ) {\n            <div class="mb-3">\n              {{ emptyResponse.text }}\n\n              <app-confirmation-toggle-button\n                class="user-group__remove-button"\n                [icon]="\'trash\'"\n                [toggleSize]="\'SMALL\'"\n                [enableHotkey]="false"\n                [itemToDelete]="\'response\'"\n                (confirm)="removeEmptySearchResponse.emit(emptyResponse)"\n              ></app-confirmation-toggle-button>\n            </div>\n          }\n\n          <div class="user-group__add-user">\n            \x3c!-- Form --\x3e\n\n            @if (showResponseForm) {\n              <app-form\n                [model]="responseModel"\n                [fields]="responseFormlyFields"\n                [cancelButtonType]="\'DARK\'"\n                (formlySubmit)="onAddResponse(responseModel)"\n                (formlyCancel)="showResponseForm = false"\n              ></app-form>\n            } @else {\n              <ng-container *ngTemplateOutlet="addResponseButton" />\n            }\n          </div>\n        </app-card>\n      </div>\n    </div>\n\n    \x3c!-- Footer (Move to other Article + Delete Article) --\x3e\n    <app-article-footer\n      [showDelete]="!campaign.is_deactivated"\n      [buttonLink]="homeUrl"\n      [buttonLabel]="\'Back to \' + campaign.name"\n      [deleteMessage]="\'Campaign\'"\n      (delete)="deactivateCampaign.emit(campaign)"\n    ></app-article-footer>\n  </article>\n</app-page-container>\n\n<ng-template #addMemberButton>\n  <button\n    btn\n    [kind]="\'PRIMARY\'"\n    [text]="\'Add Member\'"\n    [icon]="\'user-plus\'"\n    (clicked)="changeState(\'member\', true)"\n  ></button>\n</ng-template>\n\n<ng-template #addAdminButton>\n  <button\n    btn\n    [kind]="\'PRIMARY\'"\n    [text]="\'Add Admin\'"\n    [icon]="\'user-plus\'"\n    (clicked)="changeState(\'admin\', true)"\n  ></button>\n</ng-template>\n\n<ng-template #addGuestButton>\n  <button\n    btn\n    [kind]="\'PRIMARY\'"\n    [text]="\'Add Guest\'"\n    [icon]="\'user-plus\'"\n    (clicked)="changeState(\'guest\', true)"\n  ></button>\n</ng-template>\n\n<ng-template #addResponseButton>\n  <button\n    btn\n    [kind]="\'PRIMARY\'"\n    [text]="\'Add EmptySearchResponse\'"\n    [icon]="\'plus\'"\n    (clicked)="toggleResponseAddForm()"\n  ></button>\n</ng-template>\n',imports:[page_container_component.i,button_component.Q,router.Wk,common.KeyValuePipe,icon_component.R,card_component.i,html_text_component.m,info_circle_tooltip_component.$,molecules.Ts,molecules.s2,molecules.D$,button_link_component.W,common.NgTemplateOutlet,ng_bootstrap.md],styles:[campaign_admin_componentngResource_default()]})],CampaignAdminComponent);const campaign_admin_stories={title:"DesignSystem/Templates/CampaignAdminComponent",component:CampaignAdminComponent,decorators:[(0,angular_dist.moduleMetadata)({imports:[testing.c,formly_constants.d_,animations.BrowserAnimationsModule]})],args:{campaign:campaign_mock_service.jr,campaignStatistics:campaign_mock_service.mE,serverUrl:"https://www.aldrune.com"}},Default=(args=>({props:{...args,removeMember:(0,dist.XI)("removeMember"),addMember:(0,dist.XI)("addMember"),removeAdmin:(0,dist.XI)("removeAdmin"),addAdmin:(0,dist.XI)("addAdmin"),removeGuest:(0,dist.XI)("removeGuest"),addGuest:(0,dist.XI)("addGuest"),removeEmptySearchResponse:(0,dist.XI)("removeEmptySearchResponse"),addEmptySearchResponse:(0,dist.XI)("addEmptySearchResponse"),deactivateCampaign:(0,dist.XI)("deactivateCampaign")}})).bind({});Default.args={};const __namedExportsOrder=["Default"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"args => ({\n  props: {\n    ...args,\n    removeMember: action('removeMember'),\n    addMember: action('addMember'),\n    removeAdmin: action('removeAdmin'),\n    addAdmin: action('addAdmin'),\n    removeGuest: action('removeGuest'),\n    addGuest: action('addGuest'),\n    removeEmptySearchResponse: action('removeEmptySearchResponse'),\n    addEmptySearchResponse: action('addEmptySearchResponse'),\n    deactivateCampaign: action('deactivateCampaign')\n  }\n})",...Default.parameters?.docs?.source}}}},"./src/app/design/atoms/card/card.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,".accordion {\n  --bs-accordion-active-bg: var(--bs-gray-900) !important;\n}\n\nbutton.btn.btn-link:hover {\n  text-decoration: none !important;\n}\n\nbutton.btn.btn-link:focus {\n  text-decoration: none !important;\n  box-shadow: none !important;\n}\n\n.card button.btn.btn-link {\n  width: 100%;\n  text-align: left;\n}\n\n.form-control {\n  height: 2.75rem;\n  font-size: 1.2rem;\n}\n\ninput.form-control {\n  background-color: transparent !important;\n  color: white !important;\n  border: solid white 1px !important;\n}\n\ninput.form-control:focus {\n  box-shadow: 3px blue;\n  color: white;\n}\n\nselect.form-select {\n  color: white !important;\n  background-color: var(--bs-secondary) !important;\n}\n\nselect:focus {\n  background-color: var(--bs-secondary);\n  box-shadow: 3px blue;\n  color: white;\n}\n\noption {\n  background-color: #1b1f22;\n  color: white;\n  font-size: 18px;\n}\n\n.custom-control.custom-checkbox {\n  transform: scale(1.2);\n  transform-origin: 0;\n}\n\n.visually-hidden {\n  display: none;\n}\n\n.vh-50 {\n  height: 50vh;\n}\n\n.tooltip-inner {\n  --bs-tooltip-bg: var(--bs-info-bg-subtle);\n  --bs-tooltip-color: var(--bs-emphasis-color);\n}\n\n:host {\n  --card-bg-color: #393e41 !important;\n  --card-flex-direction: column;\n  --card-padding: var(--spacer-4);\n  border-radius: var(--bs-border-radius);\n}\n\n.card {\n  background-color: var(--card-bg-color);\n  padding: var(--card-padding);\n  flex-direction: var(--card-flex-direction);\n  width: 100%;\n  height: 100%;\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./src/app/design/atoms/html-text/html-text.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,"",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./src/app/design/organisms/page-container/page-container.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,".page {\n  width: 100%;\n  display: flex;\n  justify-content: center;\n}\n.page__background {\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: -2;\n  width: 100%;\n  height: 100mvh;\n}\n.page__foreground {\n  max-width: 60rem;\n  width: 100%;\n  background-color: var(--wiki-bg-transparent);\n  padding: var(--spacer-3) var(--spacer-3) var(--spacer-5) var(--spacer-3);\n  margin-bottom: var(--spacer-4);\n  color: white;\n}\n@media (min-width: 768px) {\n  .page__foreground {\n    border-radius: var(--bs-border-radius);\n  }\n}\n@media (min-width: 992px) {\n  .page__foreground {\n    padding: var(--spacer-4);\n  }\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./src/app/design/templates/campaign-admin/campaign-admin.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,".campaign__edit-container {\n  width: 100%;\n  display: flex;\n  justify-content: flex-end;\n}\n.campaign__user-group {\n  height: fit-content;\n}\n.campaign__settings {\n  display: block;\n  margin-bottom: var(--spacer-4);\n  margin-top: var(--spacer-4);\n}\n\n.user-group {\n  margin-top: var(--spacer-4);\n  margin-bottom: var(--spacer-4);\n}\n.user-group__heading {\n  text-align: center;\n}\n.user-group__user {\n  display: inline-block;\n}\n.user-group__remove-button {\n  --confirmation-bg-color: var(--wiki-bg-solid);\n  float: right;\n}\n.user-group__add-user {\n  margin-top: var(--spacer-3);\n  width: 100%;\n}\n\n.settings__images {\n  display: flex;\n  flex-direction: column;\n}\n@media (min-width: 768px) {\n  .settings__images {\n    flex-direction: row;\n  }\n}\n.settings__image-container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  flex: 1;\n}\n.settings__image {\n  max-height: 20rem;\n  max-width: 100%;\n  object-fit: contain;\n}\n.settings__icon {\n  max-height: 128px;\n  max-width: 128px;\n  object-fit: contain;\n}\n.settings__data {\n  margin-top: var(--spacer-4);\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()}}]);