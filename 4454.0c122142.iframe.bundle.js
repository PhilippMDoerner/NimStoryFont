(self.webpackChunknimstoryfont_gui=self.webpackChunknimstoryfont_gui||[]).push([[4454],{"./node_modules/rxjs/dist/esm5/internal/operators/shareReplay.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{t:()=>shareReplay});var _ReplaySubject__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/ReplaySubject.js"),_share__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/share.js");function shareReplay(configOrBufferSize,windowTime,scheduler){var _a,_b,_c,bufferSize,refCount=!1;return configOrBufferSize&&"object"==typeof configOrBufferSize?(_a=configOrBufferSize.bufferSize,bufferSize=void 0===_a?1/0:_a,_b=configOrBufferSize.windowTime,windowTime=void 0===_b?1/0:_b,refCount=void 0!==(_c=configOrBufferSize.refCount)&&_c,scheduler=configOrBufferSize.scheduler):bufferSize=null!=configOrBufferSize?configOrBufferSize:1/0,(0,_share__WEBPACK_IMPORTED_MODULE_0__.u)({connector:function(){return new _ReplaySubject__WEBPACK_IMPORTED_MODULE_1__.m(bufferSize,windowTime,scheduler)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:refCount})}},"./src/app/_services/online.service.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{D:()=>OnlineService});var tslib__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),_angular_core__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@angular/core/fesm2022/debug_node-JnOYh9kg.mjs"),rxjs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/merge.js"),rxjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/fromEvent.js"),rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),rxjs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/startWith.js"),rxjs__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/of.js");let OnlineService=class OnlineService{constructor(){this.isInBrowser=!!window,this.online$=this.isInBrowser?(0,rxjs__WEBPACK_IMPORTED_MODULE_0__.h)((0,rxjs__WEBPACK_IMPORTED_MODULE_1__.R)(window,"online").pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_2__.T)(()=>!0)),(0,rxjs__WEBPACK_IMPORTED_MODULE_1__.R)(window,"offline").pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_2__.T)(()=>!1))).pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_3__.Z)(window.navigator.onLine)):(0,rxjs__WEBPACK_IMPORTED_MODULE_4__.of)(!0)}};OnlineService=(0,tslib__WEBPACK_IMPORTED_MODULE_5__.Cg)([(0,_angular_core__WEBPACK_IMPORTED_MODULE_6__._qm)({providedIn:"root"})],OnlineService)},"./src/app/_services/swipe.service.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{I:()=>SwipeService});var tslib__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),_angular_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@angular/core/fesm2022/root_effect_scheduler-DCy1y1b8.mjs"),_angular_core__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@angular/core/fesm2022/debug_node-JnOYh9kg.mjs"),rxjs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/fromEvent.js"),rxjs__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/filter.js"),rxjs__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/shareReplay.js"),rxjs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/withLatestFrom.js"),rxjs__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),_app_constants__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/app/app.constants.ts"),_screen_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/app/_services/screen.service.ts");let SwipeService=class SwipeService{constructor(){this.screenService=(0,_angular_core__WEBPACK_IMPORTED_MODULE_2__.WQX)(_screen_service__WEBPACK_IMPORTED_MODULE_1__.i)}getSwipeEvents(elementRef){const touchStart$=(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.R)(elementRef.nativeElement,"touchstart",{passive:!0}).pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_4__.p)(()=>this.screenService.isMobile()),(0,rxjs__WEBPACK_IMPORTED_MODULE_4__.p)(event=>this.isInIgnoreZone(event)),(0,rxjs__WEBPACK_IMPORTED_MODULE_5__.t)(1));return(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.R)(elementRef.nativeElement,"touchend",{passive:!0}).pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_4__.p)(()=>this.screenService.isMobile()),(0,rxjs__WEBPACK_IMPORTED_MODULE_4__.p)(event=>this.isInIgnoreZone(event))).pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_6__.E)(touchStart$),(0,rxjs__WEBPACK_IMPORTED_MODULE_4__.p)(([touchEnd,touchStart])=>{const swipeStartY=touchStart.touches[0]?.clientY,swipeEndY=touchEnd.changedTouches[0]?.clientY;return Math.abs(swipeStartY-swipeEndY)<_app_constants__WEBPACK_IMPORTED_MODULE_0__.ds}),(0,rxjs__WEBPACK_IMPORTED_MODULE_7__.T)(([touchEnd,touchStart])=>{const swipeStartX=touchStart.touches[0]?.clientX,swipeEndX=touchEnd.changedTouches[0]?.clientX;return swipeEndX-swipeStartX}))}isInIgnoreZone(event){const target=event.target;if(!(target instanceof Element))return!0;return!(null!=target.closest("[data-swipe-ignore]"))}};SwipeService=(0,tslib__WEBPACK_IMPORTED_MODULE_8__.Cg)([(0,_angular_core__WEBPACK_IMPORTED_MODULE_9__._qm)({providedIn:"root"})],SwipeService)},"./src/app/_services/utils/campaign.mock.service.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{_B:()=>dummyCampaigns,jr:()=>dummyCampaign,mE:()=>dummyStatistics});const dummyCampaigns=[{pk:1,name:"Aldrune",subtitle:"A campaign made by Samuel Day and recorded by Philipp Dörner<br>through the eyes of Relentless",background_image:"/media/campaign_backgrounds/bg.jpg",is_deactivated:!1,has_audio_recording_permission:!0,icon:"/media/campaign_icons/favicon-128x128.png",default_map:1,default_map_details:{icon:"map",image:"pic05_sMT2d6M.jpg",name:"Aldrune",id:1},duration:{start_date:"2020-04-07T00:00:00.000000Z",last_date:"2023-04-11T00:00:00.000000Z"}},{pk:2,name:"Jōzai Corp",subtitle:"Welcome to Jōzai Corp, please enjoy your employment.",background_image:"/media/campaign_backgrounds/shanghai_city_snlaYDd.jpg",is_deactivated:!1,has_audio_recording_permission:!1,icon:"/media/campaign_icons/icon.png",default_map:void 0,default_map_details:void 0,duration:{start_date:"2022-01-15T00:00:00.000000Z",last_date:"2022-02-19T00:00:00.000000Z"}}],dummyStatistics={character_count:265,item_count:142,location_count:229,creature_count:42,diaryentry_count:101,encounter_count:954,organization_count:46,quest_count:69,quote_count:203,session_audio_count:69,timestamp_count:1121,map_count:7,marker_count:136,spell_count:22,session_count:90,rule_count:17},dummyCampaign={name:"Aldrune",subtitle:"A campaign for testing",pk:1,background_image:"/assets/default_images/audio_pic_default.webp",icon:"https://www.aldrune.com/media/campaign_icons/favicon-128x128.png",default_map:123,default_map_details:{id:123,name:"Default Map",icon:"plus",image:"blub.jpg"},is_deactivated:!1,has_audio_recording_permission:!0,members:[{username:"isofruit",password:"password1",pk:1,api_permissions:["permission1","permission2"],groups:[1,2],group_details:[{name:"group1",pk:1},{name:"group2",pk:2}],is_staff:!0,is_superuser:!1,email:"user1@example.com",is_active:!0},{username:"user2",password:"password2",pk:2,api_permissions:["permission3","permission4"],groups:[1,3],group_details:[{name:"group1",pk:1},{name:"group3",pk:3}],is_staff:!1,is_superuser:!1,email:"user2@example.com",is_active:!0}],admins:[{username:"admin",password:"adminpassword",pk:3,api_permissions:["permission1","permission2","permission3","permission4"],groups:[1,2,3],group_details:[{name:"group1",pk:1},{name:"group2",pk:2},{name:"group3",pk:3}],is_staff:!0,is_superuser:!0,email:"admin@example.com",is_active:!0},{username:"user3",password:"password3",pk:4,api_permissions:["permission1"],groups:[1],group_details:[{name:"group1",pk:1}],is_staff:!1,is_superuser:!1,email:"user3@example.com",is_active:!0}],guests:[{username:"user4",password:"password4",pk:5,api_permissions:["permission2","permission3"],groups:[2,3],group_details:[{name:"group2",pk:2},{name:"group3",pk:3}],is_staff:!1,is_superuser:!1,email:"user4@example.com",is_active:!0},{username:"user5",password:"password5",pk:6,api_permissions:["permission4"],groups:[3],group_details:[{name:"group3",pk:3}],is_staff:!1,is_superuser:!1,email:"user5@example.com",is_active:!0}],member_group_name:"Members",admin_group_name:"Admins",guest_group_name:"Guests",emptySearchResponses:[{id:1,text:"Empty response 1",campaign:1},{id:2,text:"Empty response 2",campaign:1}]}},"./src/app/_services/utils/token.service.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{B:()=>TokenService});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),module_CBsxN_3E=__webpack_require__("./node_modules/@angular/common/fesm2022/module-CBsxN_3E.mjs"),debug_node_JnOYh9kg=__webpack_require__("./node_modules/@angular/core/fesm2022/debug_node-JnOYh9kg.mjs");const CampaignRoles=["member","admin","guest","globalguest","globalmember"];var environment=__webpack_require__("./src/environments/environment.ts"),logging=__webpack_require__("./src/utils/logging.ts");let TokenService=class TokenService{static#_=this.USER_DATA_KEY="user_data";constructor(http){this.http=http,this.apiUrl=environment.c.apiUrl,this.jwtTokenUrl=`${this.apiUrl}/token`,this.refreshTokenUrl=`${this.jwtTokenUrl}/refresh`,this.ID_IDENTIFIER_PREFIX="id_"}login(loginData){return this.http.post(this.jwtTokenUrl,loginData)}logout(){return this.http.get(`${this.jwtTokenUrl}/logout`)}refreshUserData(){return(0,logging.R)(this.refreshUserData.name,this.refreshTokenUrl),this.http.post(this.refreshTokenUrl,{})}fetchAuthData(){return(0,logging.R)(this.fetchAuthData.name),this.http.get(`${this.apiUrl}/authdata`)}patchMyPassword(newPassword,oldPassword){return this.http.patch(`${this.apiUrl}/authdata/patch-password`,{password:newPassword,old_password:oldPassword})}getCampaignRole(data,campaignName){if(null==campaignName)return;const memberships=this.getCampaignMemberships(data);if(null==memberships)return;const role=memberships[campaignName.toLowerCase()];return CampaignRoles.some(roleName=>roleName===role)?role:void 0}getCampaignMemberships(data){if(null==data)return;const campaignMemberships={};for(const campaignIdentifier of Object.keys(data.campaignMemberships)){campaignIdentifier.startsWith(this.ID_IDENTIFIER_PREFIX)||(campaignMemberships[campaignIdentifier.toLowerCase()]=data.campaignMemberships[campaignIdentifier])}return campaignMemberships}static#_2=this.ctorParameters=()=>[{type:module_CBsxN_3E.Qq}]};TokenService=(0,tslib_es6.Cg)([(0,debug_node_JnOYh9kg._qm)({providedIn:"root"})],TokenService)},"./src/app/auth.store.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{a:()=>AuthStore});var _angular_core__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@angular/core/fesm2022/root_effect_scheduler-DCy1y1b8.mjs"),_angular_core__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@angular/core/fesm2022/resource-BarKSp_3.mjs"),_ngrx_operators__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@ngrx/operators/fesm2022/ngrx-operators.mjs"),_ngrx_signals__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@ngrx/signals/fesm2022/ngrx-signals.mjs"),_ngrx_signals_rxjs_interop__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@ngrx/signals/fesm2022/ngrx-signals-rxjs-interop.mjs"),rxjs__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/util/pipe.js"),rxjs__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/tap.js"),rxjs__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/switchMap.js"),src_utils_store_withQueries__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/utils/store/withQueries/index.ts"),_models_toast__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./src/app/_models/toast.ts"),_services_routing_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/app/_services/routing.service.ts"),_services_utils_token_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/app/_services/utils/token.service.ts"),_design_organisms_toast_overlay_toast_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/app/design/organisms/toast-overlay/toast.service.ts");const AuthStore=(0,_ngrx_signals__WEBPACK_IMPORTED_MODULE_3__.Eu)({providedIn:"root"},(0,src_utils_store_withQueries__WEBPACK_IMPORTED_MODULE_4__.j)(()=>{const tokenService=(0,_angular_core__WEBPACK_IMPORTED_MODULE_5__.WQX)(_services_utils_token_service__WEBPACK_IMPORTED_MODULE_1__.B);return{authData:()=>tokenService.fetchAuthData()}}),(0,_ngrx_signals__WEBPACK_IMPORTED_MODULE_3__.QO)(state=>({isLoggedIn:(0,_angular_core__WEBPACK_IMPORTED_MODULE_6__.EW)(()=>{if("init"===state.authDataQueryState()||"loading"===state.authDataQueryState())return;return null!=state.authData()}),isGlobalAdmin:(0,_angular_core__WEBPACK_IMPORTED_MODULE_6__.EW)(()=>state.authData()?.isAdmin||state.authData()?.isSuperUser),currentUserName:(0,_angular_core__WEBPACK_IMPORTED_MODULE_6__.EW)(()=>state.authData()?.userName),currentUserPk:(0,_angular_core__WEBPACK_IMPORTED_MODULE_6__.EW)(()=>state.authData()?.userId)})),(0,_ngrx_signals__WEBPACK_IMPORTED_MODULE_3__.RI)(state=>{const tokenService=(0,_angular_core__WEBPACK_IMPORTED_MODULE_5__.WQX)(_services_utils_token_service__WEBPACK_IMPORTED_MODULE_1__.B),toastService=(0,_angular_core__WEBPACK_IMPORTED_MODULE_5__.WQX)(_design_organisms_toast_overlay_toast_service__WEBPACK_IMPORTED_MODULE_2__.f),routingService=(0,_angular_core__WEBPACK_IMPORTED_MODULE_5__.WQX)(_services_routing_service__WEBPACK_IMPORTED_MODULE_0__.O);return{getCampaignRole:campaignName=>{const userData=state.authData();if(null!=userData)return tokenService.getCampaignRole(userData,campaignName)},login:(0,_ngrx_signals_rxjs_interop__WEBPACK_IMPORTED_MODULE_7__.o)((0,rxjs__WEBPACK_IMPORTED_MODULE_8__.F)((0,rxjs__WEBPACK_IMPORTED_MODULE_9__.M)(()=>(0,_ngrx_signals__WEBPACK_IMPORTED_MODULE_3__.M8)(state,{authData:void 0,authDataError:void 0,authDataQueryState:"loading"})),(0,rxjs__WEBPACK_IMPORTED_MODULE_10__.n)(loginData=>tokenService.login(loginData)),(0,_ngrx_operators__WEBPACK_IMPORTED_MODULE_11__.Hn)({next:authData=>(0,_ngrx_signals__WEBPACK_IMPORTED_MODULE_3__.M8)(state,{authData,authDataQueryState:"success"}),error:err=>{(0,_ngrx_signals__WEBPACK_IMPORTED_MODULE_3__.M8)(state,{authDataQueryState:void 0,authDataError:err}),(0,_models_toast__WEBPACK_IMPORTED_MODULE_12__.oP)(err)}}))),logout:(0,_ngrx_signals_rxjs_interop__WEBPACK_IMPORTED_MODULE_7__.o)((0,rxjs__WEBPACK_IMPORTED_MODULE_8__.F)((0,rxjs__WEBPACK_IMPORTED_MODULE_10__.n)(()=>tokenService.logout()),(0,_ngrx_operators__WEBPACK_IMPORTED_MODULE_11__.Hn)({next:()=>{(0,_ngrx_signals__WEBPACK_IMPORTED_MODULE_3__.M8)(state,{authData:void 0}),routingService.routeToPath("login")},error:err=>toastService.addToast((0,_models_toast__WEBPACK_IMPORTED_MODULE_12__.oP)(err))}))),patchPassword:(0,_ngrx_signals_rxjs_interop__WEBPACK_IMPORTED_MODULE_7__.o)((0,rxjs__WEBPACK_IMPORTED_MODULE_8__.F)((0,rxjs__WEBPACK_IMPORTED_MODULE_10__.n)(({oldPassword,newPassword})=>tokenService.patchMyPassword(newPassword,oldPassword)),(0,_ngrx_operators__WEBPACK_IMPORTED_MODULE_11__.Hn)({next:authData=>(0,_ngrx_signals__WEBPACK_IMPORTED_MODULE_3__.M8)(state,{authData}),error:err=>toastService.addToast((0,_models_toast__WEBPACK_IMPORTED_MODULE_12__.oP)(err))})))}}))},"./src/app/design/molecules/sidebar-button-entry/sidebar-button-entry.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,".entry--active,\n.entry :hover,\n.entry :focus-visible {\n  color: var(--entry-hover-color);\n  background-color: var(--entry-hover-bg-color);\n}\n.entry__link {\n  display: flex;\n  align-items: center;\n  padding-left: var(--spacer-3);\n  list-style-type: none;\n  height: 2.75rem;\n  font-weight: bold;\n  font-size: large;\n  width: 100%;\n  outline: none;\n  border-radius: 0;\n}\n.entry__link:focus-visible {\n  outline: var(--focus-outline);\n}\n.entry__link--disabled {\n  color: var(--bs-gray-600);\n  pointer-events: none;\n}\n.entry__icon {\n  width: var(--spacer-5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./src/app/design/molecules/sidebar-link-entry/sidebar-link-entry.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,".entry__link {\n  display: flex;\n  align-items: center;\n  padding-left: var(--spacer-3);\n  list-style-type: none;\n  height: 2.75rem;\n  font-weight: bold;\n  font-size: large;\n  width: 100%;\n  outline: none;\n  border-radius: 0;\n  text-decoration: none;\n}\n.entry__link:focus-visible {\n  outline: var(--focus-outline);\n}\n.entry__link--install-button {\n  border: 3px solid var(--bs-primary);\n}\n.entry__link--disabled {\n  color: var(--bs-gray-600);\n  pointer-events: none;\n}\n.entry__icon {\n  width: var(--spacer-5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./src/app/design/organisms/sidebar/sidebar.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,"a {\n  text-decoration: none;\n}\n\n:host {\n  --entry-hover-color: var(--bs-link-hover-color);\n  --entry-hover-bg-color: var(--bs-gray-700);\n  --brand-height: 3rem;\n  background-color: var(--bs-gray-dark);\n  display: flex;\n  flex-direction: column;\n  overflow-y: auto;\n  overflow-x: hidden;\n  max-height: 100mvh;\n  height: 100%;\n}\n\n.offcanvas-body,\n.offcanvas-header {\n  --bs-offcanvas-padding-y: 0;\n  --bs-offcanvas-padding-x: 0;\n}\n\n.offcanvas-body {\n  display: flex;\n  flex-direction: column;\n}\n\n.sidebar__brand {\n  list-style-type: none;\n  margin: 0;\n  padding: 0;\n}\n.sidebar__entries {\n  list-style-type: none;\n  margin: var(--spacer-1) 0 0 0;\n  padding: 0;\n  flex: 1;\n}\n.sidebar__entry--active, .sidebar__entry:hover, .sidebar__entry:focus-visible {\n  color: var(--entry-hover-color);\n  background-color: var(--entry-hover-bg-color);\n}\n.sidebar__entry--install-button {\n  border: 3px solid var(--bs-primary);\n}\n.sidebar__footer {\n  list-style-type: none;\n  margin: 0;\n  padding: 0;\n  border-top: 4px inset;\n}\n\n.brand {\n  display: flex;\n  height: var(--brand-height);\n  font-size: 1.5rem;\n  flex: 1;\n}\n.brand__back :focus-visible {\n  outline: var(--focus-outline);\n  border-bottom-right-radius: var(--bs-border-radius);\n}\n.brand__back :hover,\n.brand__back :focus-visible {\n  color: var(--entry-hover-color);\n  background-color: var(--entry-hover-bg-color);\n  height: var(--brand-height);\n}\n.brand__back-link {\n  font-size: 32px;\n  height: 100%;\n  font-weight: bold;\n  display: flex;\n  padding-right: var(--spacer-3);\n  padding-left: var(--spacer-3);\n  border-right: solid 2px var(--bs-white);\n  outline: none;\n  border-radius: 0;\n}\n.brand__back-link:focus-visible {\n  outline: var(--focus-outline);\n}\n.brand__back-icon {\n  display: flex;\n  align-items: center;\n}\n.brand__home {\n  height: var(--brand-height);\n  flex: 1;\n}\n.brand__home :focus-visible {\n  outline: var(--focus-outline);\n}\n.brand__home :hover,\n.brand__home :focus-visible {\n  color: var(--entry-hover-color) !important;\n  background-color: var(--entry-hover-bg-color);\n  border-bottom-left-radius: var(--bs-border-radius);\n}\n.brand__home-link {\n  padding-left: var(--spacer-2);\n  color: inherit;\n  font-size: 24px;\n  display: flex;\n  align-items: center;\n  height: 100%;\n  outline: none;\n  border-radius: 0;\n}\n.brand__home-link:focus-visible {\n  outline: var(--focus-outline);\n}\n.brand__home-link-text {\n  display: flex;\n  width: 100%;\n  align-items: center;\n  justify-content: flex-start;\n  color: inherit;\n  margin: var(--spacer-0);\n}\n.brand__home-link-text-text {\n  margin-left: var(--spacer-2);\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.brand__icon {\n  height: 32px;\n  width: 32px;\n  border-radius: var(--bs-border-radius);\n}\n\n.footer {\n  display: flex;\n  flex-direction: column;\n  margin-bottom: var(--spacer-3);\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./src/app/design/organisms/sidebar/sidebar.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{k:()=>SidebarComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var sidebar_componentngResource=__webpack_require__("./src/app/design/organisms/sidebar/sidebar.component.scss?ngResource"),sidebar_componentngResource_default=__webpack_require__.n(sidebar_componentngResource),common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),common_module_D4mHDfs1=__webpack_require__("./node_modules/@angular/common/fesm2022/common_module-D4mHDfs1.mjs"),root_effect_scheduler_DCy1y1b8=__webpack_require__("./node_modules/@angular/core/fesm2022/root_effect_scheduler-DCy1y1b8.mjs"),debug_node_JnOYh9kg=__webpack_require__("./node_modules/@angular/core/fesm2022/debug_node-JnOYh9kg.mjs"),resource_BarKSp_3=__webpack_require__("./node_modules/@angular/core/fesm2022/resource-BarKSp_3.mjs"),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),rxjs_interop=__webpack_require__("./node_modules/@angular/core/fesm2022/rxjs-interop.mjs"),router_module_DTmwsUYo=__webpack_require__("./node_modules/@angular/router/fesm2022/router_module-DTmwsUYo.mjs"),ng_bootstrap=__webpack_require__("./node_modules/@ng-bootstrap/ng-bootstrap/fesm2022/ng-bootstrap.mjs"),filter=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/filter.js"),online_service=__webpack_require__("./src/app/_services/online.service.ts"),ReplaySubject=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/ReplaySubject.js"),combineLatest=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/combineLatest.js"),map=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/map.js");let PwaService=class PwaService{constructor(){this.destroyRef=(0,root_effect_scheduler_DCy1y1b8.WQX)(root_effect_scheduler_DCy1y1b8.abz),this.onlineService=(0,root_effect_scheduler_DCy1y1b8.WQX)(online_service.D),this.installEvent=void 0,this.installEvent$=new ReplaySubject.m(1),this.canInstall$=(0,combineLatest.z)({online:this.onlineService.online$,isInstallable:this.installEvent$.pipe((0,map.T)(event=>null!=event))}).pipe((0,map.T)(({online,isInstallable})=>online&&isInstallable))}showInstallPrompt(){this.installEvent&&(this.installEvent.prompt(),this.installEvent.userChoice.then(({outcome})=>{"accepted"===outcome&&(this.installEvent$.next(void 0),this.installEvent=void 0)}))}storeInstallEvent(event){this.installEvent=event,this.installEvent$.next(event)}};PwaService=(0,tslib_es6.Cg)([(0,debug_node_JnOYh9kg._qm)({providedIn:"root"})],PwaService);var routing_service=__webpack_require__("./src/app/_services/routing.service.ts"),swipe_service=__webpack_require__("./src/app/_services/swipe.service.ts"),app_constants=__webpack_require__("./src/app/app.constants.ts"),auth_store=__webpack_require__("./src/app/auth.store.ts"),icon_component=__webpack_require__("./src/app/design/atoms/icon/icon.component.ts"),global_store=__webpack_require__("./src/app/global.store.ts"),navigation_store=__webpack_require__("./src/app/navigation.store.ts"),DOM=__webpack_require__("./src/utils/DOM.ts");var sidebar_button_entry_componentngResource=__webpack_require__("./src/app/design/molecules/sidebar-button-entry/sidebar-button-entry.component.scss?ngResource"),sidebar_button_entry_componentngResource_default=__webpack_require__.n(sidebar_button_entry_componentngResource);let SidebarButtonEntryComponent=class SidebarButtonEntryComponent{constructor(){this.icon=(0,core.input)(),this.label=core.input.required(),this.entryClicked=(0,core.output)()}static#_=this.propDecorators={icon:[{type:debug_node_JnOYh9kg.pde,args:[{isSignal:!0,alias:"icon",required:!1,transform:void 0}]}],label:[{type:debug_node_JnOYh9kg.pde,args:[{isSignal:!0,alias:"label",required:!0,transform:void 0}]}],entryClicked:[{type:debug_node_JnOYh9kg.k7i,args:["entryClicked"]}]}};SidebarButtonEntryComponent=(0,tslib_es6.Cg)([(0,debug_node_JnOYh9kg.uAl)({selector:"li[sidebar-button-entry]",imports:[icon_component.R],template:'<button class="entry__link" (click)="entryClicked.emit($event)">\n  @let ico = icon();\n  @if (ico) {\n    <app-icon class="entry__icon" [icon]="ico"></app-icon>\n  }\n  <span class="entry__text">\n    {{ label() }}\n  </span>\n</button>\n',changeDetection:debug_node_JnOYh9kg.Ngq.OnPush,host:{class:"entry"},styles:[sidebar_button_entry_componentngResource_default()]})],SidebarButtonEntryComponent);var sidebar_link_entry_componentngResource=__webpack_require__("./src/app/design/molecules/sidebar-link-entry/sidebar-link-entry.component.scss?ngResource"),sidebar_link_entry_componentngResource_default=__webpack_require__.n(sidebar_link_entry_componentngResource);let SidebarLinkEntryComponent=class SidebarLinkEntryComponent{constructor(){this.online$=(0,root_effect_scheduler_DCy1y1b8.WQX)(online_service.D).online$,this.online=(0,rxjs_interop.ot)(this.online$),this.isOffline=(0,resource_BarKSp_3.EW)(()=>!1===this.online()),this.entry=core.input.required()}static#_=this.propDecorators={entry:[{type:debug_node_JnOYh9kg.pde,args:[{isSignal:!0,alias:"entry",required:!0,transform:void 0}]}]}};SidebarLinkEntryComponent=(0,tslib_es6.Cg)([(0,debug_node_JnOYh9kg.uAl)({selector:"li[sidebar-link-entry]",imports:[icon_component.R,common_module_D4mHDfs1.Jj,router_module_DTmwsUYo.Wk],template:'@let isEntryDisabled = (online$ | async) === false && !entry().availableOffline;\n<a\n  [routerLink]="isEntryDisabled ? \'\' : entry().route"\n  class="entry__link"\n  [ariaDisabled]="isEntryDisabled"\n  [class.entry__link--disabled]="isEntryDisabled"\n>\n  <app-icon class="entry__icon" [icon]="entry().iconClass"></app-icon>\n  {{ entry().title }}\n  @if (isEntryDisabled) {\n    <app-icon class="entry__icon" [icon]="\'ban\'"></app-icon>\n  }\n</a>\n',changeDetection:debug_node_JnOYh9kg.Ngq.OnPush,host:{class:"entry","[class.entry--active]":"entry().isActiveTab"},styles:[sidebar_link_entry_componentngResource_default()]})],SidebarLinkEntryComponent);const SIDEBAR_ENTRIES=[{title:"Campaign Admin",iconClass:"hammer",route:"campaign-admin",color:"",article_types:[],showInSidebar:!0,availableOffline:!1,associatedRoutes:new Set(["campaign-admin","campaign-update"]),isActiveTab:!1,requiresRole:"admin"},{title:"Creatures",iconClass:"dragon",route:"creature-overview",color:"red",article_types:["creature"],showInSidebar:!0,availableOffline:!0,associatedRoutes:new Set(["creature-create","creature-update","creature","creature-overview"]),isActiveTab:!1,requiresRole:"guest"},{title:"Characters",iconClass:"male",route:"character-overview",color:"blue",article_types:["character"],showInSidebar:!0,availableOffline:!0,associatedRoutes:new Set(["character-create","character-update","character","character-overview","quote-overview"]),isActiveTab:!1,requiresRole:"guest"},{title:"DiaryEntries",iconClass:"book-open",route:"diaryentry-overview",color:"darkgreen",article_types:["diaryentry"],showInSidebar:!0,availableOffline:!0,associatedRoutes:new Set(["diaryentry-create","diaryentry-update","diaryentry","diaryentry-overview","diaryentry-encounter"]),isActiveTab:!1,requiresRole:"guest"},{title:"Items",iconClass:"magic",route:"item-overview",color:"yellow",article_types:["item"],showInSidebar:!0,availableOffline:!0,associatedRoutes:new Set(["item-create","item-update","item","item-overview"]),isActiveTab:!1,requiresRole:"guest"},{title:"Locations",iconClass:"compass",route:"location-overview",color:"brown",article_types:["location"],showInSidebar:!0,availableOffline:!0,associatedRoutes:new Set(["location-create","location-update","location","location-overview","marker","marker-create","marker-update"]),isActiveTab:!1,requiresRole:"guest"},{title:"Maps",iconClass:"map",route:"default-map",color:"beige",article_types:["map"],showInSidebar:!0,availableOffline:!0,associatedRoutes:new Set(["map-create","map-update","map","default-map","marker-map-create"]),isActiveTab:!1,requiresRole:"guest"},{title:"Organizations",iconClass:"sitemap",route:"organization-overview",color:"purple",article_types:["organization"],showInSidebar:!0,availableOffline:!0,associatedRoutes:new Set(["organization-create","organization-update","organization","organization-overview"]),isActiveTab:!1,requiresRole:"guest"},{title:"Quests",iconClass:"question-circle",route:"quest-overview",color:"white",article_types:["quest"],showInSidebar:!0,availableOffline:!0,associatedRoutes:new Set(["quest-create","quest-update","quest","quest-overview"]),isActiveTab:!1,requiresRole:"guest"},{title:"Recordings",iconClass:"file-audio",route:"sessionaudio-overview",color:"green",article_types:["sessionaudio","recording"],showInSidebar:!0,availableOffline:!1,associatedRoutes:new Set(["sessionaudio-create","sessionaudio","sessionaudio-update","sessionaudio-overview"]),isActiveTab:!1,requiresRole:"guest"},{title:"Rules",iconClass:"book",route:"rules",color:"orange",article_types:["rule","rules"],showInSidebar:!0,availableOffline:!0,associatedRoutes:new Set(["rule","rules"]),isActiveTab:!1,requiresRole:"guest"},{title:"Spells",iconClass:"hand-sparkles",route:"spells",color:"violet",article_types:["spell","spells"],showInSidebar:!0,availableOffline:!0,associatedRoutes:new Set(["spell","spells"]),isActiveTab:!1,requiresRole:"guest"},{title:"Sessions",iconClass:"calendar-alt",route:"sessions",color:"green",article_types:["session","sessions"],showInSidebar:!0,availableOffline:!0,associatedRoutes:new Set(["sessions"]),isActiveTab:!1,requiresRole:"guest"},{title:"Wiki-Overview",iconClass:"diagram-project",route:"graph",color:"white",article_types:[],showInSidebar:!0,availableOffline:!0,associatedRoutes:new Set(["graph"]),isActiveTab:!1,requiresRole:"guest"},{title:"Wiki Configuration",iconClass:"gear",route:"campaign-config-tables",color:"black",article_types:[],showInSidebar:!0,availableOffline:!1,associatedRoutes:new Set(["campaign-config-tables"]),isActiveTab:!1,requiresRole:"guest"}];let SidebarComponent=class SidebarComponent{constructor(){this.pwaService=(0,root_effect_scheduler_DCy1y1b8.WQX)(PwaService),this.authStore=(0,root_effect_scheduler_DCy1y1b8.WQX)(auth_store.a),this.routingService=(0,root_effect_scheduler_DCy1y1b8.WQX)(routing_service.O),this.swipeService=(0,root_effect_scheduler_DCy1y1b8.WQX)(swipe_service.I),this.host=(0,root_effect_scheduler_DCy1y1b8.WQX)(debug_node_JnOYh9kg.aKT),this.activeOffcanvas=(0,root_effect_scheduler_DCy1y1b8.WQX)(ng_bootstrap.DI),this.online$=(0,root_effect_scheduler_DCy1y1b8.WQX)(online_service.D).online$,this.sidebarSwipesLeft$=this.swipeService.getSwipeEvents(this.host).pipe((0,filter.p)(swipeDistance=>swipeDistance<-1*app_constants.Mw)),this.currentRoute=(0,root_effect_scheduler_DCy1y1b8.WQX)(navigation_store.A).currentRoute,this.activeRouteName=(0,resource_BarKSp_3.EW)(()=>this.currentRoute()?.data?.name),this.campaign=(0,core.input)(void 0),this.hasCampaignAdminPrivileges=(0,core.input)(!1),this.logout=(0,core.output)(),this.closeSidebar=(0,core.output)(),this.serverUrl="",this.sidebarEntries=(0,resource_BarKSp_3.EW)(()=>{const campaignName=this.campaign()?.name;if(!campaignName)return[];const currentRole=this.authStore.isGlobalAdmin()?"admin":this.authStore.getCampaignRole(campaignName)??"guest",activeRouteName=this.activeRouteName();return SIDEBAR_ENTRIES.filter(entry=>(0,global_store.a)(currentRole,entry.requiresRole)).map(entry=>{const route=this.routingService.hasRoutePath(entry.route)?this.routingService.getRoutePath(entry.route,{campaign:this.campaign()?.name}):entry.route;return{...entry,route,isActiveTab:!!activeRouteName&&entry.associatedRoutes.has(activeRouteName)}})}),this.headerId=`${(0,DOM.n)()}-header`,this.campaignOverviewUrl=this.routingService.getRoutePath("campaign-overview"),this.campaignAdminUrl=(0,resource_BarKSp_3.EW)(()=>this.routingService.getRoutePath("campaign-admin",{campaign:this.campaign()?.name})),this.homeUrl=(0,resource_BarKSp_3.EW)(()=>this.routingService.getRoutePath("home",{campaign:this.campaign()?.name})),this.profileUrl=this.routingService.getRoutePath("direct-profile"),this.sidebarSwipesLeft$.pipe((0,rxjs_interop.pQ)()).subscribe(()=>this.closeSidebar.emit())}static#_=this.ctorParameters=()=>[];static#_2=this.propDecorators={campaign:[{type:debug_node_JnOYh9kg.pde,args:[{isSignal:!0,alias:"campaign",required:!1,transform:void 0}]}],hasCampaignAdminPrivileges:[{type:debug_node_JnOYh9kg.pde,args:[{isSignal:!0,alias:"hasCampaignAdminPrivileges",required:!1,transform:void 0}]}],logout:[{type:debug_node_JnOYh9kg.k7i,args:["logout"]}],closeSidebar:[{type:debug_node_JnOYh9kg.k7i,args:["closeSidebar"]}]}};SidebarComponent=(0,tslib_es6.Cg)([(0,debug_node_JnOYh9kg.uAl)({selector:"app-sidebar",template:'@let isOffline = (online$ | async) === false;\n@let offlineTooltip = "Not available offline";\n@if (campaign()) {\n  <div class="offcanvas-header">\n    <div class="sidebar__brand brand">\n      <div class="brand__back">\n        <a\n          [routerLink]="campaignOverviewUrl"\n          class="brand__back-link"\n          aria-label="\'To campaign overview\'"\n        >\n          <app-icon class="brand__back-icon" [icon]="\'chevron-left\'"></app-icon>\n        </a>\n      </div>\n\n      <div class="brand__home" [class.disabled-entry]="campaign() == null">\n        <a class="brand__home-link" [routerLink]="homeUrl()">\n          <div class="h4 brand__home-link-text" [id]="headerId">\n            <img\n              class="brand__icon"\n              [ngSrc]="serverUrl + campaign()?.icon"\n              alt=""\n              priority\n              [width]="32"\n              [height]="32"\n            />\n            <div class="brand__home-link-text-text">\n              {{ campaign()?.name }}\n            </div>\n          </div>\n        </a>\n      </div>\n    </div>\n  </div>\n  <div class="offcanvas-body">\n    <ul class="sidebar__entries">\n      \x3c!-- Campaign Overview Entries --\x3e\n      @for (entry of sidebarEntries(); track entry.title) {\n        @let isDisabledEntry = isOffline && !entry.availableOffline;\n        <li\n          class="sidebar__entry"\n          [class.sidebar__entry--active]="entry.isActiveTab"\n          sidebar-link-entry\n          [entry]="entry"\n          [ngbTooltip]="isDisabledEntry ? offlineTooltip : undefined"\n        ></li>\n      }\n\n      @if ((pwaService.canInstall$ | async) === true) {\n        <li\n          class="sidebar__entry sidebar__entry--install-button"\n          sidebar-button-entry\n          [icon]="\'file-arrow-down\'"\n          [label]="\'Install App\'"\n          (entryClicked)="pwaService.showInstallPrompt()"\n        ></li>\n      }\n    </ul>\n\n    \x3c!-- Logout --\x3e\n    <ul class="sidebar__footer footer">\n      <li\n        class="sidebar__entry"\n        sidebar-link-entry\n        [entry]="{\n          title: \'Profile\',\n          iconClass: \'circle-user\',\n          route: profileUrl,\n          availableOffline: true,\n        }"\n      ></li>\n      <li\n        class="sidebar__entry"\n        sidebar-button-entry\n        [label]="\'Logout\'"\n        [icon]="\'right-from-bracket\'"\n        (entryClicked)="logout.emit()"\n      ></li>\n    </ul>\n  </div>\n}\n\n<ng-template #nonCampaignBrand>\n  <ul class="brand-line d-flex">\n    <li class="flex-1">\n      <a class="ps-0" [routerLink]="campaignOverviewUrl">\n        <h3 class="d-flex align-items-center justify-content-center" id="brand">\n          <span class="fas fa-chevron-left"></span>\n          <span class="ms-2 on-hover-show"> To campaigns</span>\n        </h3>\n      </a>\n    </li>\n  </ul>\n</ng-template>\n',imports:[router_module_DTmwsUYo.Wk,common.kt,icon_component.R,common_module_D4mHDfs1.Jj,ng_bootstrap.n8,SidebarButtonEntryComponent,SidebarLinkEntryComponent],providers:[ng_bootstrap.DI],changeDetection:debug_node_JnOYh9kg.Ngq.OnPush,host:{role:"navigation","[attr.aria-labelledby]":"headerId"},styles:[sidebar_componentngResource_default()]})],SidebarComponent)},"./src/app/global.store.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{v:()=>GlobalStore,a:()=>hasRoleOrBetter});var root_effect_scheduler_DCy1y1b8=__webpack_require__("./node_modules/@angular/core/fesm2022/root_effect_scheduler-DCy1y1b8.mjs"),resource_BarKSp_3=__webpack_require__("./node_modules/@angular/core/fesm2022/resource-BarKSp_3.mjs"),rxjs_interop=__webpack_require__("./node_modules/@angular/core/fesm2022/rxjs-interop.mjs"),ngrx_operators=__webpack_require__("./node_modules/@ngrx/operators/fesm2022/ngrx-operators.mjs"),ngrx_signals=__webpack_require__("./node_modules/@ngrx/signals/fesm2022/ngrx-signals.mjs"),ngrx_signals_rxjs_interop=__webpack_require__("./node_modules/@ngrx/signals/fesm2022/ngrx-signals-rxjs-interop.mjs"),of=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/of.js"),Observable=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/Observable.js"),take=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/take.js"),pipe=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/util/pipe.js"),logging=__webpack_require__("./src/utils/logging.ts"),online_service=__webpack_require__("./src/app/_services/online.service.ts"),tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),module_CBsxN_3E=__webpack_require__("./node_modules/@angular/common/fesm2022/module-CBsxN_3E.mjs"),debug_node_JnOYh9kg=__webpack_require__("./node_modules/@angular/core/fesm2022/debug_node-JnOYh9kg.mjs"),shareReplay=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/shareReplay.js");function convertSingleFileModelToFormData(model,fileAttributeName="file"){if(!model.hasOwnProperty(fileAttributeName))throw new Error(`Can't convert object to FormData! Your model does not have a ${fileAttributeName} property!`);const formData=new FormData;for(const key in model)if(key===fileAttributeName){switch(model[fileAttributeName].constructor.name){case"FileList":formData.append(key,model[fileAttributeName][0]);break;case"File":formData.append(key,model[fileAttributeName])}}else model[key]&&formData.append(key,model[key]);return formData}var map=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),environment=__webpack_require__("./src/environments/environment.ts");let BaseService=class BaseService{constructor(http,baseUrl){this.http=http,this.apiUrl=environment.c.apiUrl,this.baseUrl=`${this.apiUrl}/${baseUrl}`}list(){return this.http.get(`${this.baseUrl}/`).pipe((0,map.T)(entries=>entries.map(entry=>this.parseEntity(entry))))}campaignList(campaign){return this.http.get(`${this.baseUrl}/${campaign}/overview/`).pipe((0,map.T)(entries=>entries.map(entry=>this.parseOverviewEntity(entry))))}campaignDetailList(campaign){return this.http.get(`${this.baseUrl}/${campaign}/`).pipe((0,map.T)(entries=>entries.map(entry=>this.parseEntity(entry))))}create(data){return this.http.post(`${this.baseUrl}/`,data).pipe((0,map.T)(entry=>this.parseEntity(entry)))}update(pk,data){return this.http.put(`${this.baseUrl}/pk/${pk}/`,data).pipe((0,map.T)(entry=>this.parseEntity(entry)))}read(pk){return this.http.get(`${this.baseUrl}/pk/${pk}/`).pipe((0,map.T)(entry=>this.parseEntity(entry)))}readByParam(campaign,params){if("string"!=typeof params.name)throw console.error("The params you used in the service"),console.error(params),'Invalid params exception. You tried to use the base readByParams of GenericService with a parameter \n      object without the "name" attribute. This indicates your call is more complex than \n      this base implementation is useful for. Overwrite readByParam in the service that inherits from  \n      GenericObjectService and implement the function yourself';return this.http.get(`${this.baseUrl}/${campaign}/${params.name}/`).pipe((0,map.T)(entry=>this.parseEntity(entry)))}delete(pk){return this.http.delete(`${this.baseUrl}/pk/${pk}/`)}patch(pk,data){return this.http.patch(`${this.baseUrl}/pk/${pk}/`,data).pipe((0,map.T)(entry=>this.parseEntity(entry)))}sortList(entries,sortProperty){return entries.sort((a,b)=>{const aVal=a[sortProperty],bVal=b[sortProperty];return aVal===bVal?0:null==aVal?-1:null==bVal||aVal>bVal?1:-1})}static#_=this.ctorParameters=()=>[{type:module_CBsxN_3E.Qq},{type:String}]};BaseService=(0,tslib_es6.Cg)([(0,debug_node_JnOYh9kg._qm)({providedIn:"root"})],BaseService);let CampaignService=class CampaignService extends BaseService{constructor(http){super(http,"campaign")}campaignOverview(){return this.http.get(`${this.baseUrl}/overview/`).pipe((0,shareReplay.t)(1))}create(data){const campaignData=this.processCampaignData(data);return super.create(campaignData)}update(pk,data){const campaignData=this.processCampaignData(data);return super.update(pk,campaignData)}patch(pk,data){const campaignData=this.processCampaignData(data);return super.patch(pk,campaignData)}processCampaignData(userModel){const hasNewIcon=this.hasImageSelected(userModel.icon),hasNewBackgroundImage=this.hasImageSelected(userModel.background_image);if(hasNewIcon||hasNewBackgroundImage){if(!hasNewIcon&&hasNewBackgroundImage){delete userModel.icon;return convertSingleFileModelToFormData(userModel,"background_image")}if(hasNewIcon&&!hasNewBackgroundImage){delete userModel.background_image;return convertSingleFileModelToFormData(userModel,"icon")}return function convertMultiFileModelToFormData(model,fileAttributeNames){fileAttributeNames.forEach(name=>{if(!model.hasOwnProperty(name))throw`Can't convert object to FormData! Your model does not have a ${name} property!`});const formData=new FormData;for(const key in model)if(fileAttributeNames.includes(key)){const value=model[key];switch(value.constructor.name){case"File":formData.append(key,value);break;case"FileList":formData.append(key,value[0])}}else model[key]&&formData.append(key,model[key]);return formData}(userModel,["background_image","icon"])}{delete userModel.icon,delete userModel.background_image;const formData=new FormData;return Object.keys(userModel).forEach(key=>formData.append(key,userModel[key])),formData}}hasImageSelected(imageFieldValue){return"FileList"===imageFieldValue.constructor.name||"File"===imageFieldValue.constructor.name}delete(){throw"You can not delete a campaign, please use 'deactivate' instead"}deactivate(pk){return super.delete(pk)}statistics(campaign_name){const statisticsUrl=`${this.apiUrl}/admin/statistics/${campaign_name}`;return this.http.get(statisticsUrl)}readByParam(campaign){return this.http.get(`${this.baseUrl}/${campaign}/`)}addGuest(campaign,user){const requestBody={action:"add_guest",user};return this.http.patch(`${this.baseUrl}/${campaign}/members/`,requestBody)}addMember(campaign,user){const requestBody={action:"add_member",user};return this.http.patch(`${this.baseUrl}/${campaign}/members/`,requestBody)}addAdmin(campaign,user){const requestBody={action:"add_admin",user};return this.http.patch(`${this.baseUrl}/${campaign}/members/`,requestBody)}removeGuest(campaign,user){const requestBody={action:"remove_guest",user};return this.http.patch(`${this.baseUrl}/${campaign}/members/`,requestBody)}removeMember(campaign,user){const requestBody={action:"remove_member",user};return this.http.patch(`${this.baseUrl}/${campaign}/members/`,requestBody)}removeAdmin(campaign,user){const requestBody={action:"remove_admin",user};return this.http.patch(`${this.baseUrl}/${campaign}/members/`,requestBody)}addEmptySearchResponse(responseModel){const emptySearchUrl=`${this.apiUrl}/emptysearchresponse/`;return this.http.post(emptySearchUrl,responseModel)}deleteEmptySearchResponse(emptySearchResponsePk){return this.http.delete(`${this.apiUrl}/emptysearchresponse/pk/${emptySearchResponsePk}/`)}parseEntity(data){return data}parseOverviewEntity(data){return data}static#_=this.ctorParameters=()=>[{type:module_CBsxN_3E.Qq}]};CampaignService=(0,tslib_es6.Cg)([(0,debug_node_JnOYh9kg._qm)({providedIn:"root"})],CampaignService);var Subject=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/Subject.js"),ReplaySubject=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/ReplaySubject.js"),rxjs_operators=__webpack_require__("./src/utils/rxjs-operators.ts");let GlobalUrlParamsService=class GlobalUrlParamsService{constructor(){this.campaignSetTrigger$=new Subject.B,this.currentRouteSnapshot$=new ReplaySubject.m(1),this.campaignNameParam$=this.currentRouteSnapshot$.pipe((0,map.T)(snapshot=>snapshot?.params.campaign),(0,rxjs_operators.cY)("campaignName"))}nextSnapshot(snapshot){this.currentRouteSnapshot$.next(snapshot)}};GlobalUrlParamsService=(0,tslib_es6.Cg)([(0,debug_node_JnOYh9kg._qm)({providedIn:"root"})],GlobalUrlParamsService);var token_service=__webpack_require__("./src/app/_services/utils/token.service.ts"),auth_store=__webpack_require__("./src/app/auth.store.ts");function hasRoleOrBetter(role,minimumRole){switch(minimumRole){case"member":return["member","admin"].includes(role);case"admin":return"admin"===role;case"guest":return["member","admin","guest"].includes(role);default:return!1}}const SSRDefaultScreenSize$=(0,of.of)({height:600,width:600}),initialGlobalState={contentScrollEvents:void 0,currentCampaign:void 0,campaigns:void 0,isLoadingPage:!1},GlobalStore=(0,ngrx_signals.Eu)((0,ngrx_signals.Q2)(initialGlobalState),(0,ngrx_signals.QO)(state=>{const authStore=(0,root_effect_scheduler_DCy1y1b8.WQX)(auth_store.a),screenSize$=!!document?new Observable.c(observer=>{const resizeObserver=new ResizeObserver(entries=>{for(const entry of entries)observer.next({width:entry.contentRect.width,height:entry.contentRect.height})});return resizeObserver.observe(document.body),()=>resizeObserver.disconnect()}):SSRDefaultScreenSize$;return{screenSize:(0,rxjs_interop.ot)(screenSize$),campaignName:(0,resource_BarKSp_3.EW)(()=>state.currentCampaign()?.name),currentCampaignRole:(0,resource_BarKSp_3.EW)(()=>{const currentCampaign=state.currentCampaign();if(null!=currentCampaign)return authStore.getCampaignRole(currentCampaign.name)})}}),(0,ngrx_signals.RI)(store=>{const tokenService=(0,root_effect_scheduler_DCy1y1b8.WQX)(token_service.B),campaignService=(0,root_effect_scheduler_DCy1y1b8.WQX)(CampaignService),isOnline=(0,rxjs_interop.ot)((0,root_effect_scheduler_DCy1y1b8.WQX)(online_service.D).online$),authStore=(0,root_effect_scheduler_DCy1y1b8.WQX)(auth_store.a);return{isCampaignMember:campaignName=>{campaignName=campaignName??store.campaignName();const userData=authStore.authData();if(null==userData)return!1;const role=tokenService.getCampaignRole(userData,campaignName);return authStore.isGlobalAdmin()||"guest"===role},isCampaignAdmin:campaignName=>{campaignName=campaignName??store.campaignName();const userData=authStore.authData();if(null==userData)return!1;const role=tokenService.getCampaignRole(userData,campaignName);return authStore.isGlobalAdmin()||"admin"===role},isCampaignGuest:campaignName=>{campaignName=campaignName??store.campaignName();const userData=authStore.authData();if(null==userData)return!1;const role=tokenService.getCampaignRole(userData,campaignName);return authStore.isGlobalAdmin()||"guest"===role},canPerformActionsOfRole:minimumRole=>{const hasRolePermissions=(0,resource_BarKSp_3.EW)(()=>{const currentRole=store.currentCampaignRole();return null!=currentRole&&hasRoleOrBetter(currentRole,minimumRole)});return(0,resource_BarKSp_3.EW)(()=>hasRolePermissions()&&!!isOnline())},loadCampaignOverview:()=>{campaignService.campaignOverview().pipe((0,take.s)(1)).subscribe(campaigns=>(0,ngrx_signals.M8)(store,{campaigns}))},fireScrollEvent:event=>{(0,ngrx_signals.M8)(store,{contentScrollEvents:event})},trackIsPageLoading:(0,ngrx_signals_rxjs_interop.o)((0,pipe.F)((0,ngrx_operators.Hn)({next:isLoading=>(0,ngrx_signals.M8)(store,{isLoadingPage:isLoading}),error:err=>{(0,logging.R)(GlobalStore.name,"Error tracking loading state of page",err),(0,ngrx_signals.M8)(store,{isLoadingPage:!1})}}))),logout:()=>{(0,ngrx_signals.M8)(store,{campaigns:void 0,currentCampaign:void 0,contentScrollEvents:void 0,isLoadingPage:!1}),authStore.logout()}}}),(0,ngrx_signals.TK)(store=>{const paramsService=(0,root_effect_scheduler_DCy1y1b8.WQX)(GlobalUrlParamsService);return{onInit:()=>{const campaignParam$=paramsService.campaignNameParam$.pipe((0,rxjs_interop.pQ)()),campaignParam=(0,rxjs_interop.ot)(campaignParam$);(0,resource_BarKSp_3.QZ)(()=>{const campaigns=store.campaigns(),currentCampaignName=campaignParam(),currentCampaign=campaigns?.find(campaign=>campaign.name===currentCampaignName);(0,ngrx_signals.M8)(store,{campaigns,currentCampaign})})}}}))},"./src/app/navigation.store.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>NavigationStore});var root_effect_scheduler_DCy1y1b8=__webpack_require__("./node_modules/@angular/core/fesm2022/root_effect_scheduler-DCy1y1b8.mjs"),resource_BarKSp_3=__webpack_require__("./node_modules/@angular/core/fesm2022/resource-BarKSp_3.mjs"),rxjs_interop=__webpack_require__("./node_modules/@angular/core/fesm2022/rxjs-interop.mjs"),router_CsukTOog=__webpack_require__("./node_modules/@angular/router/fesm2022/router-CsukTOog.mjs"),ngrx_signals=__webpack_require__("./node_modules/@ngrx/signals/fesm2022/ngrx-signals.mjs"),filter=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/filter.js"),map=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),lift=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/util/lift.js"),OperatorSubscriber=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/OperatorSubscriber.js");var rxjs_operators=__webpack_require__("./src/utils/rxjs-operators.ts");const NavigationStore=(0,ngrx_signals.Eu)((0,ngrx_signals.pq)(()=>{const router=(0,root_effect_scheduler_DCy1y1b8.WQX)(router_CsukTOog.Ix);return{currentRoute$:router.events.pipe((0,filter.p)(event=>event instanceof router_CsukTOog.wF),(0,map.T)(()=>router.routerState.snapshot.root),(0,map.T)(route=>{for(;route.firstChild;)route=route.firstChild;return route}),(0,rxjs_operators.cY)("trackRoute")),history$:router.events.pipe((0,filter.p)(event=>event instanceof router_CsukTOog.ld),(0,map.T)(event=>event.url),(0,lift.N)(function(source,subscriber){var prev,hasPrev=!1;source.subscribe((0,OperatorSubscriber._)(subscriber,function(value){var p=prev;prev=value,hasPrev&&subscriber.next([p,value]),hasPrev=!0}))}),(0,map.T)(([priorRoute,currentRoute])=>({currentRoute,priorRoute})))}}),(0,ngrx_signals.QO)(state=>{const history=(0,rxjs_interop.ot)(state.history$);return{currentRoute:(0,rxjs_interop.ot)(state.currentRoute$),priorUrl:(0,resource_BarKSp_3.EW)(()=>history()?.priorRoute),currentUrl:(0,resource_BarKSp_3.EW)(()=>history()?.currentRoute)}}))}}]);