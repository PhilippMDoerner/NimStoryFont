(self.webpackChunknimstoryfont_gui=self.webpackChunknimstoryfont_gui||[]).push([[8469],{"./src/app/_services/article/character-service.mock.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{_w:()=>dummyOverviewCharacters,qv:()=>dummyCharacter});const dummyOverviewCharacters=[{getAbsoluteRouterUrl:()=>"/search/character/123",article_type:"Character",name:"Gandalf",pk:1,name_full:"Gandalf the Grey",player_character:!0,images:["https://example.com/images/lirien1.jpg"],campaign_details:{name:"Aldrune",id:1}},{getAbsoluteRouterUrl:()=>"/search/character/123",article_type:"Character",name:"Frodo",pk:2,name_full:"Frodo Baggins",player_character:!0,images:[],campaign_details:{name:"Aldrune",id:1}},{getAbsoluteRouterUrl:()=>"/search/character/123",article_type:"Character",name:"Gimli",pk:3,name_full:"Gimli son of GlÃ³in",player_character:!1,images:[],campaign_details:{name:"Aldrune",id:1}},{getAbsoluteRouterUrl:()=>"/search/character/123",article_type:"Character",name:"Legolas",pk:4,name_full:"Legolas Greenleaf",player_character:!1,images:["https://example.com/images/lirien1.jpg"],campaign_details:{name:"Aldrune",id:1}},{getAbsoluteRouterUrl:()=>"/search/character/123",article_type:"Character",name:"Bilbo",pk:5,name_full:"Bilbo Baggins",player_character:!1,images:[],campaign_details:{name:"Aldrune",id:1}},{getAbsoluteRouterUrl:()=>"/search/character/123",article_type:"Character",name:"Aragorn",pk:6,name_full:"Aragorn son of Arathorn",player_character:!1,images:["https://example.com/images/lirien1.jpg"],campaign_details:{name:"Aldrune",id:1}},{getAbsoluteRouterUrl:()=>"/search/character/123",article_type:"Character",name:"Saruman",pk:7,name_full:"Saruman the White",player_character:!1,images:[],campaign_details:{name:"Aldrune",id:1}},{getAbsoluteRouterUrl:()=>"/search/character/123",article_type:"Character",name:"Sif",pk:18,name_full:"Sif the Swift",description:"Sif is a skilled warrior known for her lightning-fast strikes and agility. She is fiercely loyal to her friends and will stop at nothing to protect them.",update_datetime:"2022-03-15T10:30:00.000Z",player_character:!0,images:[],campaign_details:{name:"Aldrune",id:1}},{getAbsoluteRouterUrl:()=>"/search/character/123",article_type:"Character",name:"Gorin",pk:19,name_full:"Gorin Ironfist",description:"Gorin is a dwarf from the Iron Hills, known for his strength and unwavering determination. He has a fondness for ale and a good brawl.",update_datetime:"2022-02-23T14:15:00.000Z",player_character:!0,images:["https://example.com/images/lirien1.jpg","https://example.com/images/lirien1.jpg"],campaign_details:{name:"Aldrune",id:1}},{getAbsoluteRouterUrl:()=>"/search/character/123",article_type:"Character",name:"Lirien",pk:20,name_full:"Lirien Windrider",description:"Lirien is an elven archer, renowned for her skill with the bow. She is fiercely independent and often clashes with authority figures.",update_datetime:"2022-03-20T08:45:00.000Z",player_character:!0,images:["https://example.com/images/lirien1.jpg"],campaign_details:{name:"Aldrune",id:1}}],dummyCharacter={pk:100,getAbsoluteRouterUrl:()=>"/dummy/url",player_character:!1,alive:!0,name:"Gandalf",title:"Gandalf the Grey",gender:"Male",race:"Maia",description:"A wise and powerful wizard, Gandalf the Grey is a member of the Fellowship of the Ring and a key figure in the fight against the Dark Lord Sauron.",creation_datetime:"2023-04-22T12:00:00.000Z",update_datetime:"2023-04-23T12:00:00.000Z",organizations:[{pk:1,name:"The White Council",organization_id:1,role:"Member"},{pk:2,name:"The Fellowship of the Ring",organization_id:2,role:"Member"}],current_location:3,current_location_details:{pk:3,name_full:"Moria",parent_location:"Middle-earth"},items:[{pk:1,name:"Glamdring"},{pk:2,name:"Staff"}],encounters:[{name:"The Council of Elrond",creation_datetime:"2023-04-22T12:00:00.000Z",update_datetime:"2023-04-23T12:00:00.000Z",title:"Council of Elrond",diaryentry:50,order_index:20,encounterConnections:[{pk:1,encounter:2,character:3},{pk:2,encounter:3,character:4}],description:"At the Council of Elrond, Gandalf reveals the true nature of the One Ring and urges the Fellowship to destroy it in the fires of Mount Doom.",pk:1,campaign_details:{name:"Aldrune",id:1}},{name:"The Battle of Helm's Deep",title:"The Battle of Helm's Deep",diaryentry:20,order_index:30,creation_datetime:"2023-04-23T12:00:00.000Z",update_datetime:"2023-04-24T12:00:00.000Z",encounterConnections:[{pk:324,encounter:223,encounter_details:{name:"Main Session 6 - A new job",name_full:"Main Session 6 - A new job",pk:223},character:43,character_details:{name:"Aliana Sterent",name_full:"Aliana Sterent",pk:43}},{pk:325,encounter:223,encounter_details:{name:"Main Session 6 - A new job",name_full:"Main Session 6 - A new job",pk:223},character:29,character_details:{name:"Ateula",name_full:"Ateula",pk:29}}],description:"Gandalf arrives at Helm's Deep with reinforcements and turns the tide of the battle against Saruman's forces.",pk:2,campaign_details:{name:"Aldrune",id:1}}],images:[],player_class_connections:[{pk:1,player_class:8,character:5,player_class_details:{update_datetime:"2023-04-24T12:00:00.000Z",name:"Paladin",pk:8}}],campaign:1,campaign_details:{id:1,name:"The War of the Ring"}}},"./src/app/design/templates/character-create-update/character-create-update.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,OutdatedUpdate:()=>OutdatedUpdate,Update:()=>Update,__namedExportsOrder:()=>__namedExportsOrder,default:()=>character_create_update_stories});var testing=__webpack_require__("./node_modules/@angular/router/fesm2022/testing.mjs"),dist=__webpack_require__("./node_modules/@storybook/addon-actions/dist/index.mjs"),angular_dist=__webpack_require__("./node_modules/@storybook/angular/dist/index.mjs"),character_service_mock=__webpack_require__("./src/app/_services/article/character-service.mock.ts"),formly_service_mock=__webpack_require__("./src/app/_services/formly/formly-service.mock.ts"),animations=__webpack_require__("./node_modules/@angular/platform-browser/fesm2022/animations.mjs"),formly_constants=__webpack_require__("./src/app/_modules/formly_constants.ts"),tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var character_create_update_componentngResource=__webpack_require__("./src/app/design/templates/character-create-update/character-create-update.component.scss?ngResource"),character_create_update_componentngResource_default=__webpack_require__.n(character_create_update_componentngResource),common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),rxjs_interop=__webpack_require__("./node_modules/@angular/core/fesm2022/rxjs-interop.mjs"),hotkey_directive=__webpack_require__("./src/app/_directives/hotkey.directive.ts"),formly_service_service=__webpack_require__("./src/app/_services/formly/formly-service.service.ts"),button_component=__webpack_require__("./src/app/design/atoms/button/button.component.ts"),separator_component=__webpack_require__("./src/app/design/atoms/separator/separator.component.ts"),compare_form_component=__webpack_require__("./src/app/design/molecules/compare-form/compare-form.component.ts"),form_component=__webpack_require__("./src/app/design/molecules/form/form.component.ts"),page_container_component=__webpack_require__("./src/app/design/organisms/page-container/page-container.component.ts");let CharacterCreateUpdateComponent=class CharacterCreateUpdateComponent{constructor(formlyService){this.formlyService=formlyService,this.state=core.input.required(),this.campaignName=core.input.required(),this.userModel=(0,core.input)({}),this.serverModel=core.input.required(),this.lastVisitedPlaceOptions=core.input.required(),this.create=(0,core.output)(),this.update=(0,core.output)(),this.cancelled=(0,core.output)(),this.lastVisitedPlaceOptions$=(0,rxjs_interop.br)(this.lastVisitedPlaceOptions),this.formlyFields=(0,core.computed)((()=>[this.formlyService.buildCheckboxConfig({key:"player_character",label:"Player Character",defaultValue:!1}),this.formlyService.buildCheckboxConfig({key:"alive",defaultValue:!0}),this.formlyService.buildInputConfig({key:"name",inputKind:"NAME"}),this.formlyService.buildInputConfig({key:"title",required:!1,inputKind:"STRING"}),this.formlyService.buildStaticStringSelectConfig({key:"gender",label:"Sex",options:["Other","Female","Male"]}),this.formlyService.buildInputConfig({key:"race",inputKind:"STRING"}),this.formlyService.buildOverviewSelectConfig({key:"current_location",sortProp:"name_full",labelProp:"name_full",label:"Location",campaign:this.campaignName(),required:!1,options$:this.lastVisitedPlaceOptions$})])),this.heading=(0,core.computed)((()=>this.getHeading(this.state()))),this.membershipFormState=(0,core.signal)("DISPLAY")}onCancel(){this.cancelled.emit()}onSubmit(submittedData){switch(this.state()){case"CREATE":this.create.emit(submittedData);break;case"UPDATE":case"OUTDATED_UPDATE":this.update.emit(submittedData)}}getHeading(state){switch(state){case"CREATE":return"Creating New Character";case"UPDATE":case"OUTDATED_UPDATE":return`Updating Character ${this.userModel().name}`}}static{this.ctorParameters=()=>[{type:formly_service_service.$}]}static{this.propDecorators={state:[{type:core.Input,args:[{isSignal:!0,alias:"state",required:!0,transform:void 0}]}],campaignName:[{type:core.Input,args:[{isSignal:!0,alias:"campaignName",required:!0,transform:void 0}]}],userModel:[{type:core.Input,args:[{isSignal:!0,alias:"userModel",required:!1,transform:void 0}]}],serverModel:[{type:core.Input,args:[{isSignal:!0,alias:"serverModel",required:!0,transform:void 0}]}],lastVisitedPlaceOptions:[{type:core.Input,args:[{isSignal:!0,alias:"lastVisitedPlaceOptions",required:!0,transform:void 0}]}],create:[{type:core.Output,args:["create"]}],update:[{type:core.Output,args:["update"]}],cancelled:[{type:core.Output,args:["cancelled"]}]}}};CharacterCreateUpdateComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"app-character-create-update",template:'<app-page-container>\n  <article class="container create-update">\n    <h1 class="create-update__heading heading">\n      <span class="heading__text"> {{ heading() }} </span>\n\n      \x3c!-- Heading --\x3e\n      <div class="heading__edit-cancel">\n        <button\n          btn\n          (clicked)="onCancel()"\n          [icon]="\'times\'"\n          [kind]="\'SECONDARY\'"\n          [attr.aria-label]="\'Cancel \' + heading()"\n          [hotkey]="\'q\'"\n          (hotkeyPressed)="onCancel()"\n        ></button>\n      </div>\n    </h1>\n\n    \x3c!-- Form --\x3e\n    @switch (state()) {\n      @case ("CREATE") {\n        <ng-container [ngTemplateOutlet]="createForm" />\n      }\n      @case ("UPDATE") {\n        <ng-container [ngTemplateOutlet]="updateForm" />\n      }\n      @case ("OUTDATED_UPDATE") {\n        <ng-container [ngTemplateOutlet]="outdatedUpdateForm" />\n      }\n    }\n  </article>\n</app-page-container>\n\n<ng-template #createForm>\n  <app-form\n    class="create-update__form"\n    [model]="userModel()"\n    [fields]="formlyFields()"\n    (formlySubmit)="onSubmit($event)"\n    (formlyCancel)="onCancel()"\n  ></app-form>\n</ng-template>\n\n<ng-template #updateForm>\n  <div class="create-update__form form">\n    <div class="form__character-data">\n      <h4 class="form__heading">Character Data</h4>\n\n      <app-separator class="form__heading-separator" />\n\n      <app-form\n        [model]="userModel()"\n        [fields]="formlyFields()"\n        (formlySubmit)="onSubmit($event)"\n        (formlyCancel)="onCancel()"\n      ></app-form>\n    </div>\n  </div>\n</ng-template>\n\n<ng-template #outdatedUpdateForm>\n  <app-compare-form\n    [fields]="formlyFields()"\n    [modelFromUser]="$any(userModel())"\n    [modelFromServer]="serverModel()"\n    (formlySubmit)="onSubmit($event)"\n    (formlyCancel)="onCancel()"\n  ></app-compare-form>\n</ng-template>\n',imports:[page_container_component.i,button_component.Q,common.NgTemplateOutlet,form_component.s,separator_component.F,compare_form_component.z,hotkey_directive.G],styles:[character_create_update_componentngResource_default()]})],CharacterCreateUpdateComponent);const character_create_update_stories={title:"DesignSystem/Templates/CharacterCreateUpdateComponent",component:CharacterCreateUpdateComponent,decorators:[(0,angular_dist.moduleMetadata)({imports:[testing.c,formly_constants.d_,animations.BrowserAnimationsModule],declarations:[],providers:[formly_service_mock.p]})],args:{campaignName:"Aldrune",state:"CREATE",userModel:{},serverModel:void 0,lastVisitedPlaceOptions:[]}},Template=args=>({props:{...args,create:(0,dist.XI)("create"),update:(0,dist.XI)("update"),cancel:(0,dist.XI)("cancel"),addClass:(0,dist.XI)("addClass"),removeClass:(0,dist.XI)("removeClass"),addOrganizationMembership:(0,dist.XI)("addOrganizationMembership"),removeOrganizationMembership:(0,dist.XI)("removeOrganizationMembership")}}),Default=Template.bind({});Default.args={};const Update=Template.bind({});Update.args={state:"UPDATE",userModel:character_service_mock.qv};const OutdatedUpdate=Template.bind({});OutdatedUpdate.args={state:"OUTDATED_UPDATE",userModel:character_service_mock.qv,serverModel:{...character_service_mock.qv,alive:!character_service_mock.qv.alive,description:character_service_mock.qv.description+" <strong> Some text added by somebody else <strong>"}};const __namedExportsOrder=["Default","Update","OutdatedUpdate"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"args => ({\n  props: {\n    ...args,\n    create: action('create'),\n    update: action('update'),\n    cancel: action('cancel'),\n    addClass: action('addClass'),\n    removeClass: action('removeClass'),\n    addOrganizationMembership: action('addOrganizationMembership'),\n    removeOrganizationMembership: action('removeOrganizationMembership')\n  }\n})",...Default.parameters?.docs?.source}}},Update.parameters={...Update.parameters,docs:{...Update.parameters?.docs,source:{originalSource:"args => ({\n  props: {\n    ...args,\n    create: action('create'),\n    update: action('update'),\n    cancel: action('cancel'),\n    addClass: action('addClass'),\n    removeClass: action('removeClass'),\n    addOrganizationMembership: action('addOrganizationMembership'),\n    removeOrganizationMembership: action('removeOrganizationMembership')\n  }\n})",...Update.parameters?.docs?.source}}},OutdatedUpdate.parameters={...OutdatedUpdate.parameters,docs:{...OutdatedUpdate.parameters?.docs,source:{originalSource:"args => ({\n  props: {\n    ...args,\n    create: action('create'),\n    update: action('update'),\n    cancel: action('cancel'),\n    addClass: action('addClass'),\n    removeClass: action('removeClass'),\n    addOrganizationMembership: action('addOrganizationMembership'),\n    removeOrganizationMembership: action('removeOrganizationMembership')\n  }\n})",...OutdatedUpdate.parameters?.docs?.source}}}},"./src/app/design/templates/character-create-update/character-create-update.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,".heading {\n  display: flex;\n  justify-content: space-between;\n  text-align: center;\n}\n.heading__text {\n  flex: 1;\n}\n\n.form__character-data {\n  margin-bottom: var(--spacer-4);\n}\n.form__player-classes {\n  margin-bottom: var(--spacer-5);\n}\n.form__memberships {\n  margin-bottom: var(--spacer-5);\n}\n.form__heading-separator {\n  --separator-margin-top: var(--spacer-0);\n}\n.form__heading {\n  margin-bottom: var(--spacer-0);\n}\n.form__add-membership-badge {\n  border-radius: var(--bs-border-radius);\n}\n.form__add-membership-badge:focus, .form__add-membership-badge:hover {\n  outline: var(--focus-outline);\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()}}]);