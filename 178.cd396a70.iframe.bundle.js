(self.webpackChunknimstoryfont_gui=self.webpackChunknimstoryfont_gui||[]).push([[178],{"./src/app/design/atoms/html-text/html-text.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{m:()=>HtmlTextComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var html_text_componentngResource=__webpack_require__("./src/app/design/atoms/html-text/html-text.component.scss?ngResource"),html_text_componentngResource_default=__webpack_require__.n(html_text_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs");let HtmlTextComponent=class HtmlTextComponent{constructor(){this.text=core.input.required()}static{this.propDecorators={text:[{type:core.Input,args:[{isSignal:!0,alias:"text",required:!0,transform:void 0}]}]}}};HtmlTextComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"app-html-text",template:'<div [innerHTML]="text()"></div>\n',standalone:!0,changeDetection:core.ChangeDetectionStrategy.OnPush,styles:[html_text_componentngResource_default()]})],HtmlTextComponent)},"./src/app/design/molecules/editor/editor.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{x:()=>EditorComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var editor_componentngResource=__webpack_require__("./src/app/design/molecules/editor/editor.component.scss?ngResource"),editor_componentngResource_default=__webpack_require__.n(editor_componentngResource),common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),fesm2022_forms=__webpack_require__("./node_modules/@angular/forms/fesm2022/forms.mjs"),tinymce_tinymce_angular=__webpack_require__("./node_modules/@tinymce/tinymce-angular/fesm2020/tinymce-tinymce-angular.mjs"),rxjs_interop=__webpack_require__("./node_modules/@angular/core/fesm2022/rxjs-interop.mjs"),Subject=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/Subject.js"),debounceTime=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/debounceTime.js"),filter=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/filter.js"),distinctUntilChanged=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/distinctUntilChanged.js"),interval=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/interval.js"),take=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/take.js"),hotkey_directive=__webpack_require__("./src/app/_directives/hotkey.directive.ts"),screen_service=__webpack_require__("./src/app/_services/screen.service.ts"),app_constants=__webpack_require__("./src/app/app.constants.ts"),alert_component=__webpack_require__("./src/app/design/atoms/alert/alert.component.ts"),button_component=__webpack_require__("./src/app/design/atoms/button/button.component.ts"),html_text_component=__webpack_require__("./src/app/design/atoms/html-text/html-text.component.ts"),icon_component=__webpack_require__("./src/app/design/atoms/icon/icon.component.ts"),separator_component=__webpack_require__("./src/app/design/atoms/separator/separator.component.ts");let EditorComponent=class EditorComponent{constructor(){this.destroyRef=(0,core.inject)(core.DestroyRef),this.text=core.input.required(),this.placeholder=core.input.required(),this.canUpdate=core.input.required(),this.serverModel=(0,core.input)(),this.state=core.input.required(),this.submitButtonKind=(0,core.input)("PRIMARY"),this.cancelButtonKind=(0,core.input)("SECONDARY"),this.enableAutosave=(0,core.input)(!0),this.maxHeightPercentage=(0,core.input)(.75),this.settings=(0,core.input)(),this.disabledHotkeys=(0,core.input)(!1),this.id=core.input.required(),this.editStarted=(0,core.output)(),this.update=(0,core.output)(),this.autosave=(0,core.output)(),this.cancelled=(0,core.output)(),this.change$=new Subject.B,this.inFocus=(0,core.signal)(!1),this.set=app_constants.O5,this.windowHeight=(0,rxjs_interop.ot)((0,core.inject)(screen_service.i).windowHeight$),this.maxEditorHeight=(0,core.computed)((()=>{const windowHeight=this.windowHeight();if(windowHeight)return windowHeight*this.maxHeightPercentage()})),this.editorHeight=(0,core.computed)((()=>{const maxHeight=this.maxEditorHeight(),defaultHeight=app_constants.O5.height,configuredHeight=this.settings()?.height;return configuredHeight&&maxHeight?Math.min(maxHeight,configuredHeight):defaultHeight})),this._settings=(0,core.computed)((()=>({...app_constants.O5,...this.settings(),height:this.editorHeight()}))),this.textModel="",this.editorField=core.viewChild.required("editor"),this.startAutosaveBehavior(),(0,rxjs_interop.br)(this.state).pipe((0,rxjs_interop.pQ)()).subscribe((state=>{switch(state){case"DISPLAY":return this.resetTextfield();case"UPDATE":case"OUTDATED_UPDATE":return this.toUpdateState()}}))}startEdit(){this.editStarted.emit()}finishEdit(){this.update.emit(this.textModel.trim())}cancelEdit(){this.cancelled.emit()}toUpdateState(){this.resetTextfield(),this.focusField()}resetTextfield(){this.textModel=this.text()}startAutosaveBehavior(){this.change$.pipe((0,debounceTime.B)(3e3),(0,filter.p)((()=>this.enableAutosave())),(0,distinctUntilChanged.F)(),(0,filter.p)((()=>{const newText=this.textModel,canFireUpdate="UPDATE"===this.state(),oldText=this.text();return canFireUpdate&&oldText!==newText})),(0,rxjs_interop.pQ)()).subscribe((()=>this.autosave.emit(this.textModel)))}focusField(){(0,interval.Y)(100).pipe((0,take.s)(1),(0,rxjs_interop.pQ)(this.destroyRef)).subscribe((()=>{this.editorField().editor.iframeElement?.focus()}))}static{this.ctorParameters=()=>[]}static{this.propDecorators={text:[{type:core.Input,args:[{isSignal:!0,alias:"text",required:!0,transform:void 0}]}],placeholder:[{type:core.Input,args:[{isSignal:!0,alias:"placeholder",required:!0,transform:void 0}]}],canUpdate:[{type:core.Input,args:[{isSignal:!0,alias:"canUpdate",required:!0,transform:void 0}]}],serverModel:[{type:core.Input,args:[{isSignal:!0,alias:"serverModel",required:!1,transform:void 0}]}],state:[{type:core.Input,args:[{isSignal:!0,alias:"state",required:!0,transform:void 0}]}],submitButtonKind:[{type:core.Input,args:[{isSignal:!0,alias:"submitButtonKind",required:!1,transform:void 0}]}],cancelButtonKind:[{type:core.Input,args:[{isSignal:!0,alias:"cancelButtonKind",required:!1,transform:void 0}]}],enableAutosave:[{type:core.Input,args:[{isSignal:!0,alias:"enableAutosave",required:!1,transform:void 0}]}],maxHeightPercentage:[{type:core.Input,args:[{isSignal:!0,alias:"maxHeightPercentage",required:!1,transform:void 0}]}],settings:[{type:core.Input,args:[{isSignal:!0,alias:"settings",required:!1,transform:void 0}]}],disabledHotkeys:[{type:core.Input,args:[{isSignal:!0,alias:"disabledHotkeys",required:!1,transform:void 0}]}],id:[{type:core.Input,args:[{isSignal:!0,alias:"id",required:!0,transform:void 0}]}],editStarted:[{type:core.Output,args:["editStarted"]}],update:[{type:core.Output,args:["update"]}],autosave:[{type:core.Output,args:["autosave"]}],cancelled:[{type:core.Output,args:["cancelled"]}],editorField:[{type:core.ViewChild,args:["editor",{isSignal:!0}]}]}}};EditorComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"app-editor",imports:[common.NgTemplateOutlet,html_text_component.m,icon_component.R,tinymce_tinymce_angular.xn,fesm2022_forms.YN,alert_component.C,separator_component.F,button_component.Q,hotkey_directive.G],template:'\x3c!-- eslint-disable @angular-eslint/template/click-events-have-key-events --\x3e\n\x3c!-- eslint-disable @angular-eslint/template/interactive-supports-focus --\x3e\n\n\x3c!-- Text Body --\x3e\n@if (canUpdate()) {\n  \x3c!-- Display Mode --\x3e\n  <div\n    class="field field--display"\n    [class.field--hidden]="state() !== \'DISPLAY\'"\n    (click)="startEdit()"\n  >\n    <ng-container *ngTemplateOutlet="textBody" />\n  </div>\n  \x3c!-- Update Mode --\x3e\n  <form\n    class="field field--update"\n    [class.field--hidden]="state() !== \'UPDATE\'"\n    (submit)="finishEdit()"\n  >\n    @if (_settings().skin === "oxide-dark") {\n      <editor\n        #editor\n        [id]="id()"\n        [init]="_settings()"\n        [name]="id()"\n        [(ngModel)]="textModel"\n        class="mb-2"\n        [class.editor--focus]="inFocus()"\n        (onKeyDown)="change$.next(textModel)"\n        (onFocus)="inFocus.set(true)"\n        (onBlur)="inFocus.set(false)"\n      ></editor>\n    }\n\n    <ng-container [ngTemplateOutlet]="formButtons" />\n  </form>\n\n  \x3c!-- Outdated Update Mode --\x3e\n  <div\n    class="field field--update"\n    [class.field--hidden]="state() !== \'OUTDATED_UPDATE\'"\n  >\n    \x3c!-- Informating heading --\x3e\n    <app-alert [kind]="\'INFO\'">\n      <app-icon [icon]="\'info-circle\'"></app-icon>\n      While you were updating this article, somebody else went ahead and updated\n      it as well. Please include their changes in your update before submitting.\n    </app-alert>\n\n    \x3c!-- Textfield-Form --\x3e\n    <div class="flex-column card p-4">\n      \x3c!-- Comparison text --\x3e\n      <div>\n        <h3>Description From Server</h3>\n        <app-html-text [text]="serverModel()!" />\n      </div>\n\n      <app-separator />\n\n      \x3c!-- Actual edit form --\x3e\n      <form (submit)="finishEdit()">\n        @let outdatedId = id() + "-outdated";\n        <label [for]="outdatedId" class="h3"> Description from You </label>\n\n        <editor\n          [init]="_settings()"\n          [name]="outdatedId"\n          [id]="outdatedId"\n          [(ngModel)]="textModel"\n          class="mb-2"\n        ></editor>\n\n        <ng-container [ngTemplateOutlet]="formButtons" />\n      </form>\n    </div>\n  </div>\n} @else {\n  <ng-container *ngTemplateOutlet="textBody" />\n}\n\n<ng-template #formButtons>\n  <div class="field__buttons">\n    <button\n      btn\n      [icon]="\'check\'"\n      [text]="\'Submit\'"\n      [kind]="submitButtonKind()"\n      [type]="\'submit\'"\n    ></button>\n    <button\n      btn\n      [icon]="\'times\'"\n      [text]="\'Cancel\'"\n      [kind]="cancelButtonKind()"\n      [hotkey]="\'q\'"\n      [disabledHotkey]="disabledHotkeys()"\n      (hotkeyPressed)="cancelEdit()"\n      (clicked)="cancelEdit()"\n    ></button>\n  </div>\n</ng-template>\n\n<ng-template #textBody>\n  <app-html-text [text]="text() || placeholder()" />\n</ng-template>\n',changeDetection:core.ChangeDetectionStrategy.OnPush,styles:[editor_componentngResource_default()]})],EditorComponent)},"./src/app/design/organisms/editable-text/editable-text.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{T:()=>EditableTextComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var editable_text_componentngResource=__webpack_require__("./src/app/design/organisms/editable-text/editable-text.component.scss?ngResource"),editable_text_componentngResource_default=__webpack_require__.n(editable_text_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),fesm2022_forms=__webpack_require__("./node_modules/@angular/forms/fesm2022/forms.mjs"),heading_directive=__webpack_require__("./src/app/_directives/heading.directive.ts"),hotkey_directive=__webpack_require__("./src/app/_directives/hotkey.directive.ts"),icon_component=__webpack_require__("./src/app/design/atoms/icon/icon.component.ts"),DOM=__webpack_require__("./src/utils/DOM.ts"),editor_component=__webpack_require__("./src/app/design/molecules/editor/editor.component.ts");let EditableTextComponent=class EditableTextComponent{constructor(){this.text=core.input.required(),this.placeholder=core.input.required(),this.canUpdate=core.input.required(),this.ariaLevel=core.input.required(),this.serverModel=(0,core.input)(),this.heading=(0,core.input)(),this.submitButtonKind=(0,core.input)("PRIMARY"),this.cancelButtonKind=(0,core.input)("SECONDARY"),this.update=(0,core.output)(),this.state=(0,core.signal)("DISPLAY"),this.editButtonText=(0,core.computed)((()=>{switch(this.state()){case"DISPLAY":return"edit";case"UPDATE":case"OUTDATED_UPDATE":return"cancel"}})),this.editorField=core.viewChild.required("editor"),this.editorId=(0,DOM.n)(),(0,core.effect)((()=>{null!=this.serverModel()&&this.state.set("OUTDATED_UPDATE")}))}toggleEdit(){"UPDATE"===this.state()?this.cancelEdit():this.startEdit()}startEdit(){this.state.set("UPDATE")}finishEdit(newTextValue){this.update.emit(newTextValue),this.state.set("DISPLAY")}cancelEdit(){this.state.set("DISPLAY")}static{this.ctorParameters=()=>[]}static{this.propDecorators={text:[{type:core.Input,args:[{isSignal:!0,alias:"text",required:!0,transform:void 0}]}],placeholder:[{type:core.Input,args:[{isSignal:!0,alias:"placeholder",required:!0,transform:void 0}]}],canUpdate:[{type:core.Input,args:[{isSignal:!0,alias:"canUpdate",required:!0,transform:void 0}]}],ariaLevel:[{type:core.Input,args:[{isSignal:!0,alias:"ariaLevel",required:!0,transform:void 0}]}],serverModel:[{type:core.Input,args:[{isSignal:!0,alias:"serverModel",required:!1,transform:void 0}]}],heading:[{type:core.Input,args:[{isSignal:!0,alias:"heading",required:!1,transform:void 0}]}],submitButtonKind:[{type:core.Input,args:[{isSignal:!0,alias:"submitButtonKind",required:!1,transform:void 0}]}],cancelButtonKind:[{type:core.Input,args:[{isSignal:!0,alias:"cancelButtonKind",required:!1,transform:void 0}]}],update:[{type:core.Output,args:["update"]}],editorField:[{type:core.ViewChild,args:["editor",{isSignal:!0}]}]}}};EditableTextComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"app-editable-text",imports:[icon_component.R,editor_component.x,fesm2022_forms.YN,editor_component.x,hotkey_directive.G,heading_directive.m],template:'\x3c!-- Heading --\x3e\n@let headingVal = heading();\n<div class="heading__container">\n  @if (headingVal) {\n    <div [heading]="ariaLevel()" class="heading h4 m-0">\n      @if (state() === "DISPLAY") {\n        <div [innerHTML]="headingVal"></div>\n      } @else {\n        <label [for]="editorId" [innerHTML]="headingVal"> </label>\n      }\n    </div>\n    @if (canUpdate()) {\n      <button\n        class="heading__edit-button fs-6 fw-normal"\n        aria-label="Edit text"\n        [hotkey]="\'w\'"\n        (hotkeyPressed)="toggleEdit()"\n        (click)="toggleEdit()"\n      >\n        (\n        {{ editButtonText() }}\n        <app-icon [icon]="\'pen\'"></app-icon>\n        )\n      </button>\n    }\n  }\n</div>\n\n\x3c!-- Text Body --\x3e\n<app-editor\n  class="w-100"\n  [state]="state()"\n  [cancelButtonKind]="cancelButtonKind()"\n  [submitButtonKind]="submitButtonKind()"\n  [text]="text()"\n  [placeholder]="placeholder()"\n  [canUpdate]="canUpdate()"\n  [serverModel]="serverModel()"\n  [id]="editorId"\n  (update)="finishEdit($event)"\n  (autosave)="this.update.emit($event)"\n  (cancelled)="cancelEdit()"\n  (editStarted)="startEdit()"\n></app-editor>\n',changeDetection:core.ChangeDetectionStrategy.OnPush,styles:[editable_text_componentngResource_default()]})],EditableTextComponent)},"./src/app/design/organisms/page-container/page-container.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{i:()=>PageContainerComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var page_container_componentngResource=__webpack_require__("./src/app/design/organisms/page-container/page-container.component.scss?ngResource"),page_container_componentngResource_default=__webpack_require__.n(page_container_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),animations=__webpack_require__("./node_modules/@angular/animations/fesm2022/animations.mjs");const fadeIn=(0,animations.hZ)("fadeIn",[(0,animations.kY)(":enter",[(0,animations.iF)({opacity:0}),(0,animations.i0)("250ms ease-in",(0,animations.iF)({opacity:1}))]),(0,animations.kY)(":leave",[(0,animations.iF)({opacity:1}),(0,animations.i0)("250ms ease-out",(0,animations.iF)({opacity:0}))])]);(0,animations.hZ)("fadeOut",[(0,animations.kY)(":leave",[(0,animations.iF)({opacity:1}),(0,animations.i0)("250ms ease-out",(0,animations.iF)({opacity:0}))])]);let PageContainerComponent=class PageContainerComponent{};PageContainerComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"app-page-container",template:'<div class="page" [@fadeIn]>\n  <div class="page__foreground">\n    <ng-content></ng-content>\n  </div>\n</div>\n',imports:[],animations:[fadeIn],styles:[page_container_componentngResource_default()]})],PageContainerComponent)},"./src/app/design/atoms/html-text/html-text.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,"",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./src/app/design/molecules/editor/editor.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,":host {\n  display: inline-block;\n  --bg-hover-color: var(--bs-secondary);\n}\n\n.field {\n  text-align: unset;\n  border-radius: var(--bs-border-radius);\n}\n.field--display {\n  min-height: 1rem;\n  width: 100%;\n  cursor: pointer;\n}\n.field--display:focus, .field--display:hover {\n  outline-offset: 4px;\n  color: unset;\n  background-color: var(--bg-hover-color);\n}\n.field--hidden {\n  display: none;\n}\n.field__buttons {\n  display: flex;\n  flex-direction: row;\n  gap: var(--spacer-3);\n}\n\n.editor--focus {\n  outline: var(--focus-outline);\n  border-radius: var(--bs-border-radius);\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./src/app/design/organisms/editable-text/editable-text.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,":host {\n  display: inline-block;\n  --bg-hover-color: var(--bs-secondary);\n}\n\n.heading {\n  margin-bottom: var(--spacer-2);\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  gap: var(--spacer-3);\n}\n.heading__edit-text {\n  margin: var(--spacer-0);\n}\n.heading__edit-button:focus-visible, .heading__edit-button:hover {\n  border-radius: var(--bs-border-radius);\n  outline: var(--focus-outline);\n  outline-offset: 4px;\n}\n.heading__container {\n  display: flex;\n  flex-direction: row;\n  gap: var(--spacer-3);\n  margin-bottom: var(--spacer-2);\n}\n\n.field {\n  text-align: unset;\n  border-radius: var(--bs-border-radius);\n}\n.field--display {\n  min-height: 1rem;\n  width: 100%;\n}\n.field--display:focus, .field--display:hover {\n  outline-offset: 4px;\n  color: unset;\n  background-color: var(--bg-hover-color);\n}\n.field--hidden {\n  display: none;\n}\n.field__buttons {\n  display: flex;\n  flex-direction: row;\n  gap: var(--spacer-3);\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./src/app/design/organisms/page-container/page-container.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,".page {\n  width: 100%;\n  display: flex;\n  justify-content: center;\n}\n.page__background {\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: -2;\n  width: 100%;\n  height: 100mvh;\n}\n.page__foreground {\n  max-width: 60rem;\n  width: 100%;\n  background-color: var(--wiki-bg-transparent);\n  padding: var(--spacer-3) var(--spacer-3) var(--spacer-5) var(--spacer-3);\n  margin-bottom: var(--spacer-4);\n  color: white;\n}\n@media (min-width: 768px) {\n  .page__foreground {\n    border-radius: var(--bs-border-radius);\n  }\n}\n@media (min-width: 992px) {\n  .page__foreground {\n    padding: var(--spacer-4);\n  }\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()}}]);