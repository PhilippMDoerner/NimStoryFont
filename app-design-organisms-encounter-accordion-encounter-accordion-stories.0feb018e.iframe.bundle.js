(self.webpackChunknimstoryfont_gui=self.webpackChunknimstoryfont_gui||[]).push([[7643],{"./src/app/_services/formly/formly-service.service.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{$:()=>FormlyService});var tslib__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),_angular_core__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/of.js"),rxjs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),src_app_design_organisms_formly_select_disable_formly_select_disable_field_component__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/app/design/organisms/formly-select-disable/formly-select-disable-field.component.ts"),src_utils_array__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/utils/array.ts"),src_utils_string__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/utils/string.ts");let FormlyService=class FormlyService{buildOverviewSelectConfig(config){const options$=config.required??!0?config.options$:this.addEmptyOption(config.options$,config),sortedOptions$=this.sortOptions(options$,config),validators=this.getValidators(config);return{key:config.key,type:"select",className:config.className,wrappers:config.wrappers,hideExpression:config.hide,props:{label:config.label??(0,src_utils_string__WEBPACK_IMPORTED_MODULE_1__.ZH)(`${config.key}`),labelProp:config.labelProp,valueProp:config.valueProp??"pk",options:sortedOptions$,required:config.required??!0,disabled:config.disabled},validators:{validation:validators}}}buildDisableSelectConfig(config){const options$=config.required??!0?config.options$:this.addEmptyOption(config.options$,config),sortedOptions$=this.sortOptions(options$,config),validators=this.getValidators(config);return{key:config.key,type:"select-disable",className:config.className,wrappers:config.wrappers,hideExpression:config.hide??!1,props:{label:config.label??(0,src_utils_string__WEBPACK_IMPORTED_MODULE_1__.ZH)(`${config.key}`),labelProp:config.labelProp,valueProp:config.valueProp??"pk",options:sortedOptions$,required:config.required??!0,warningMessage:config.warningMessage,additionalProperties:{disabledExpression:config.disabledExpression,tooltipMessage:config.tooltipMessage??"",showWrapperLabel:config.showWrapperLabel??!0}},validators:{validation:validators}}}buildStaticSelectConfig(config){const validators=this.getValidators(config);return{key:config.key,type:"select",className:config.className,wrappers:config.wrappers,hideExpression:config.hide??!1,props:{label:config.label??(0,src_utils_string__WEBPACK_IMPORTED_MODULE_1__.ZH)(`${config.key}`),options:config.options,required:config.required??!0,disabled:config.disabled},validators:{validation:validators}}}buildStaticStringSelectConfig(partialConfig){const options=partialConfig.options.map((str=>({label:str,value:str}))),config={...partialConfig,options};return this.buildStaticSelectConfig(config)}buildInputConfig(config){const validators=this.getValidators(config);switch(config.inputKind){case"NUMBER":validators.push("notInteger");break;case"NAME":validators.push("hasSpecialCharacters");break;case"NUMBER_FRACTION":validators.push("notNumber")}let innerInputType;switch(config.inputKind){case"NUMBER":innerInputType="number";break;case"COLOR":innerInputType="color";break;default:innerInputType="string"}return{key:config.key,type:"input",className:config.className,wrappers:config.wrappers,hideExpression:config.hide??!1,parsers:config.parsers,props:{maxLength:config.maxLength,max:config.max,minLength:config.minLength,min:config.min,label:config.label??(0,src_utils_string__WEBPACK_IMPORTED_MODULE_1__.ZH)(`${config.key}`),type:innerInputType,required:config.required??!0,disabled:!!config.disabled,placeholder:config.placeholder??void 0},validators:{validation:validators}}}buildSinglePasswordConfig(config){const validators=this.getValidators(config);return{key:config.key,type:"input",className:config.className,fieldGroupClassName:config.fieldGroupClassName,props:{label:config.label??"Password",type:"password",required:!0,placeholder:"Your password",disabled:config.disabled},validators:{validation:validators}}}buildConfirmedPasswordConfig(config){const validators=config.validators??[];validators.push("required");return{validators:{validation:[{name:"fieldMatch",options:{errorPath:"passwordConfirm"}}]},fieldGroup:[{key:"password",type:"input",className:config.className,props:{label:config.label??"Password",type:"password",required:!0,placeholder:"Password, at least 7 characters",disabled:config.disabled},validators:{validation:validators}},{key:"passwordConfirm",type:"input",className:config.className,props:{label:config.label?"Confirm "+config.label:"Password Confirmation",type:"password",required:!0,placeholder:"Please re-enter your password",disabled:config.disabled}}]}}buildCheckboxConfig(config){return{key:config.key,type:"checkbox",className:config.className,wrappers:config.wrappers,defaultValue:config.defaultValue,hideExpression:config.hide,props:{label:config.label??(0,src_utils_string__WEBPACK_IMPORTED_MODULE_1__.ZH)(`${config.key}`),required:config.required??!0,disabled:config.disabled}}}buildDatepickerConfig(config){const validators=this.getValidators(config);return validators.push("date"),{key:config.key,type:"datepicker",className:config.className,wrappers:config.wrappers,hideExpression:config.hide,props:{label:config.label??(0,src_utils_string__WEBPACK_IMPORTED_MODULE_1__.ZH)(`${config.key}`),required:config.required??!0,disabled:config.disabled},validators:{validation:validators}}}buildFileFieldConfig(config){const validators=this.getValidators(config);return{key:config.key,type:"file",className:config.className,wrappers:config.wrappers,hideExpression:config.hide,props:{buttonType:config.fileButtonType??"SECONDARY",fileFieldKind:config.fileFieldKind??"IMAGE",label:config.label??(0,src_utils_string__WEBPACK_IMPORTED_MODULE_1__.ZH)(`${config.key}`),required:config.required??!0,disabled:!!config.disabled},validators:{validation:validators}}}buildEditorConfig(config){const validators=this.getValidators(config);return{key:config.key,type:"text-editor",className:config.className,wrappers:config.wrappers,hideExpression:config.hide,props:{label:config.label??(0,src_utils_string__WEBPACK_IMPORTED_MODULE_1__.ZH)(`${config.key}`),required:config.required??!0,disabled:config.disabled},validators:{validation:validators}}}buildTypeaheadConfig(config){const validators=this.getValidators(config);return{key:config.key,type:"typeahead",className:config.className,wrappers:[...config.wrappers??[],"form-field"],props:{label:config.label??(0,src_utils_string__WEBPACK_IMPORTED_MODULE_1__.ZH)(`${config.key}`),required:config.required??!0,disabled:config.disabled,placeholder:"Type to receive suggestions",additionalProperties:{getOptions:config.getOptions,optionLabelProp:config.optionLabelProp,optionValueProp:config.optionValueProp,initialOption$:config.initialOption$,formatSearchTerm:config.formatSearchTerm}},validators:{validation:validators}}}toUpdateForm(fields){return fields.filter((field=>!("file"===field.type)))}getValidators(config){const validators=config.validators??[];return config.required&&validators.push("required"),validators}addEmptyOption(list,config){return Array.isArray(list)?(0,rxjs__WEBPACK_IMPORTED_MODULE_2__.of)([this.createEmptyOption(config),...list]):list.pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_3__.T)((values=>[this.createEmptyOption(config),...values])))}createEmptyOption(config){const emptyOption={};emptyOption[config.labelProp]=src_app_design_organisms_formly_select_disable_formly_select_disable_field_component__WEBPACK_IMPORTED_MODULE_0__.D.EMPTY_OPTION_LABEL;return emptyOption[config.valueProp??config.key]=src_app_design_organisms_formly_select_disable_formly_select_disable_field_component__WEBPACK_IMPORTED_MODULE_0__.D.EMPTY_OPTION_VALUE,emptyOption}sortOptions(list$,config){const{sortProp,sortDirection}=config;return sortProp?list$.pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_3__.T)((list=>(0,src_utils_array__WEBPACK_IMPORTED_MODULE_4__.Z)(list,sortProp,sortDirection??"asc")))):list$}};FormlyService=(0,tslib__WEBPACK_IMPORTED_MODULE_5__.Cg)([(0,_angular_core__WEBPACK_IMPORTED_MODULE_6__.Injectable)({providedIn:"root"})],FormlyService)},"./src/app/design/atoms/html-text/html-text.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{m:()=>HtmlTextComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var html_text_componentngResource=__webpack_require__("./src/app/design/atoms/html-text/html-text.component.scss?ngResource"),html_text_componentngResource_default=__webpack_require__.n(html_text_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs");let HtmlTextComponent=class HtmlTextComponent{constructor(){this.text=core.input.required()}static{this.propDecorators={text:[{type:core.Input,args:[{isSignal:!0,alias:"text",required:!0,transform:void 0}]}]}}};HtmlTextComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"app-html-text",template:'<div [innerHTML]="text()"></div>\n',standalone:!0,changeDetection:core.ChangeDetectionStrategy.OnPush,styles:[html_text_componentngResource_default()]})],HtmlTextComponent)},"./src/app/design/molecules/editor/editor.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{x:()=>EditorComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var editor_componentngResource=__webpack_require__("./src/app/design/molecules/editor/editor.component.scss?ngResource"),editor_componentngResource_default=__webpack_require__.n(editor_componentngResource),common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),fesm2022_forms=__webpack_require__("./node_modules/@angular/forms/fesm2022/forms.mjs"),tinymce_tinymce_angular=__webpack_require__("./node_modules/@tinymce/tinymce-angular/fesm2020/tinymce-tinymce-angular.mjs"),rxjs_interop=__webpack_require__("./node_modules/@angular/core/fesm2022/rxjs-interop.mjs"),Subject=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/Subject.js"),debounceTime=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/debounceTime.js"),filter=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/filter.js"),distinctUntilChanged=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/distinctUntilChanged.js"),interval=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/interval.js"),take=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/take.js"),hotkey_directive=__webpack_require__("./src/app/_directives/hotkey.directive.ts"),screen_service=__webpack_require__("./src/app/_services/screen.service.ts"),app_constants=__webpack_require__("./src/app/app.constants.ts"),alert_component=__webpack_require__("./src/app/design/atoms/alert/alert.component.ts"),button_component=__webpack_require__("./src/app/design/atoms/button/button.component.ts"),html_text_component=__webpack_require__("./src/app/design/atoms/html-text/html-text.component.ts"),icon_component=__webpack_require__("./src/app/design/atoms/icon/icon.component.ts"),separator_component=__webpack_require__("./src/app/design/atoms/separator/separator.component.ts");let EditorComponent=class EditorComponent{constructor(){this.destroyRef=(0,core.inject)(core.DestroyRef),this.text=core.input.required(),this.placeholder=core.input.required(),this.canUpdate=core.input.required(),this.serverModel=(0,core.input)(),this.state=core.input.required(),this.submitButtonKind=(0,core.input)("PRIMARY"),this.cancelButtonKind=(0,core.input)("SECONDARY"),this.enableAutosave=(0,core.input)(!0),this.maxHeightPercentage=(0,core.input)(.75),this.settings=(0,core.input)(),this.disabledHotkeys=(0,core.input)(!1),this.id=core.input.required(),this.editStarted=(0,core.output)(),this.update=(0,core.output)(),this.autosave=(0,core.output)(),this.cancelled=(0,core.output)(),this.change$=new Subject.B,this.inFocus=(0,core.signal)(!1),this.set=app_constants.O5,this.windowHeight=(0,rxjs_interop.ot)((0,core.inject)(screen_service.i).windowHeight$),this.maxEditorHeight=(0,core.computed)((()=>{const windowHeight=this.windowHeight();if(windowHeight)return windowHeight*this.maxHeightPercentage()})),this.editorHeight=(0,core.computed)((()=>{const maxHeight=this.maxEditorHeight(),defaultHeight=app_constants.O5.height,configuredHeight=this.settings()?.height;return configuredHeight&&maxHeight?Math.min(maxHeight,configuredHeight):defaultHeight})),this._settings=(0,core.computed)((()=>({...app_constants.O5,...this.settings(),height:this.editorHeight()}))),this.textModel="",this.editorField=core.viewChild.required("editor"),this.startAutosaveBehavior(),(0,rxjs_interop.br)(this.state).pipe((0,rxjs_interop.pQ)()).subscribe((state=>{switch(state){case"DISPLAY":return this.resetTextfield();case"UPDATE":case"OUTDATED_UPDATE":return this.toUpdateState()}}))}startEdit(){this.editStarted.emit()}finishEdit(){this.update.emit(this.textModel.trim())}cancelEdit(){this.cancelled.emit()}toUpdateState(){this.resetTextfield(),this.focusField()}resetTextfield(){this.textModel=this.text()}startAutosaveBehavior(){this.change$.pipe((0,debounceTime.B)(3e3),(0,filter.p)((()=>this.enableAutosave())),(0,distinctUntilChanged.F)(),(0,filter.p)((()=>{const newText=this.textModel,canFireUpdate="UPDATE"===this.state(),oldText=this.text();return canFireUpdate&&oldText!==newText})),(0,rxjs_interop.pQ)()).subscribe((()=>this.autosave.emit(this.textModel)))}focusField(){(0,interval.Y)(100).pipe((0,take.s)(1),(0,rxjs_interop.pQ)(this.destroyRef)).subscribe((()=>{this.editorField().editor.iframeElement?.focus()}))}static{this.ctorParameters=()=>[]}static{this.propDecorators={text:[{type:core.Input,args:[{isSignal:!0,alias:"text",required:!0,transform:void 0}]}],placeholder:[{type:core.Input,args:[{isSignal:!0,alias:"placeholder",required:!0,transform:void 0}]}],canUpdate:[{type:core.Input,args:[{isSignal:!0,alias:"canUpdate",required:!0,transform:void 0}]}],serverModel:[{type:core.Input,args:[{isSignal:!0,alias:"serverModel",required:!1,transform:void 0}]}],state:[{type:core.Input,args:[{isSignal:!0,alias:"state",required:!0,transform:void 0}]}],submitButtonKind:[{type:core.Input,args:[{isSignal:!0,alias:"submitButtonKind",required:!1,transform:void 0}]}],cancelButtonKind:[{type:core.Input,args:[{isSignal:!0,alias:"cancelButtonKind",required:!1,transform:void 0}]}],enableAutosave:[{type:core.Input,args:[{isSignal:!0,alias:"enableAutosave",required:!1,transform:void 0}]}],maxHeightPercentage:[{type:core.Input,args:[{isSignal:!0,alias:"maxHeightPercentage",required:!1,transform:void 0}]}],settings:[{type:core.Input,args:[{isSignal:!0,alias:"settings",required:!1,transform:void 0}]}],disabledHotkeys:[{type:core.Input,args:[{isSignal:!0,alias:"disabledHotkeys",required:!1,transform:void 0}]}],id:[{type:core.Input,args:[{isSignal:!0,alias:"id",required:!0,transform:void 0}]}],editStarted:[{type:core.Output,args:["editStarted"]}],update:[{type:core.Output,args:["update"]}],autosave:[{type:core.Output,args:["autosave"]}],cancelled:[{type:core.Output,args:["cancelled"]}],editorField:[{type:core.ViewChild,args:["editor",{isSignal:!0}]}]}}};EditorComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"app-editor",imports:[common.NgTemplateOutlet,html_text_component.m,icon_component.R,tinymce_tinymce_angular.xn,fesm2022_forms.YN,alert_component.C,separator_component.F,button_component.Q,hotkey_directive.G],template:'\x3c!-- eslint-disable @angular-eslint/template/click-events-have-key-events --\x3e\n\x3c!-- eslint-disable @angular-eslint/template/interactive-supports-focus --\x3e\n\n\x3c!-- Text Body --\x3e\n@if (canUpdate()) {\n  \x3c!-- Display Mode --\x3e\n  <div\n    class="field field--display"\n    [class.field--hidden]="state() !== \'DISPLAY\'"\n    (click)="startEdit()"\n  >\n    <ng-container *ngTemplateOutlet="textBody" />\n  </div>\n  \x3c!-- Update Mode --\x3e\n  <form\n    class="field field--update"\n    [class.field--hidden]="state() !== \'UPDATE\'"\n    (submit)="finishEdit()"\n  >\n    @if (_settings().skin === "oxide-dark") {\n      <editor\n        #editor\n        [id]="id()"\n        [init]="_settings()"\n        [name]="id()"\n        [(ngModel)]="textModel"\n        class="mb-2"\n        [class.editor--focus]="inFocus()"\n        (onKeyDown)="change$.next(textModel)"\n        (onFocus)="inFocus.set(true)"\n        (onBlur)="inFocus.set(false)"\n      ></editor>\n    }\n\n    <ng-container [ngTemplateOutlet]="formButtons" />\n  </form>\n\n  \x3c!-- Outdated Update Mode --\x3e\n  <div\n    class="field field--update"\n    [class.field--hidden]="state() !== \'OUTDATED_UPDATE\'"\n  >\n    \x3c!-- Informating heading --\x3e\n    <app-alert [kind]="\'INFO\'">\n      <app-icon [icon]="\'info-circle\'"></app-icon>\n      While you were updating this article, somebody else went ahead and updated\n      it as well. Please include their changes in your update before submitting.\n    </app-alert>\n\n    \x3c!-- Textfield-Form --\x3e\n    <div class="flex-column card p-4">\n      \x3c!-- Comparison text --\x3e\n      <div>\n        <h3>Description From Server</h3>\n        <app-html-text [text]="serverModel()!" />\n      </div>\n\n      <app-separator />\n\n      \x3c!-- Actual edit form --\x3e\n      <form (submit)="finishEdit()">\n        @let outdatedId = id() + "-outdated";\n        <label [for]="outdatedId" class="h3"> Description from You </label>\n\n        <editor\n          [init]="_settings()"\n          [name]="outdatedId"\n          [id]="outdatedId"\n          [(ngModel)]="textModel"\n          class="mb-2"\n        ></editor>\n\n        <ng-container [ngTemplateOutlet]="formButtons" />\n      </form>\n    </div>\n  </div>\n} @else {\n  <ng-container *ngTemplateOutlet="textBody" />\n}\n\n<ng-template #formButtons>\n  <div class="field__buttons">\n    <button\n      btn\n      [icon]="\'check\'"\n      [text]="\'Submit\'"\n      [kind]="submitButtonKind()"\n      [type]="\'submit\'"\n    ></button>\n    <button\n      btn\n      [icon]="\'times\'"\n      [text]="\'Cancel\'"\n      [kind]="cancelButtonKind()"\n      [hotkey]="\'q\'"\n      [disabledHotkey]="disabledHotkeys()"\n      (hotkeyPressed)="cancelEdit()"\n      (clicked)="cancelEdit()"\n    ></button>\n  </div>\n</ng-template>\n\n<ng-template #textBody>\n  <app-html-text [text]="text() || placeholder()" />\n</ng-template>\n',changeDetection:core.ChangeDetectionStrategy.OnPush,styles:[editor_componentngResource_default()]})],EditorComponent)},"./src/app/design/organisms/encounter-accordion/encounter-accordion.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{x:()=>EncounterAccordionComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var encounter_accordion_componentngResource=__webpack_require__("./src/app/design/organisms/encounter-accordion/encounter-accordion.component.scss?ngResource"),encounter_accordion_componentngResource_default=__webpack_require__.n(encounter_accordion_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),ng_bootstrap=__webpack_require__("./node_modules/@ng-bootstrap/ng-bootstrap/fesm2022/ng-bootstrap.mjs"),heading_directive=__webpack_require__("./src/app/_directives/heading.directive.ts"),encounter_component=__webpack_require__("./src/app/design/organisms/encounter/encounter.component.ts");let EncounterAccordionComponent=class EncounterAccordionComponent{constructor(){this.encounters=core.input.required(),this.campaignLocations=core.input.required(),this.campaignCharacters=core.input.required(),this.serverModel=(0,core.input)(),this.canUpdate=(0,core.input)(!1),this.canCreate=(0,core.input)(!1),this.canDelete=(0,core.input)(!1),this.connectionDelete=(0,core.output)(),this.connectionCreate=(0,core.output)(),this.encounterDelete=(0,core.output)(),this.encounterUpdate=(0,core.output)()}static{this.propDecorators={encounters:[{type:core.Input,args:[{isSignal:!0,alias:"encounters",required:!0,transform:void 0}]}],campaignLocations:[{type:core.Input,args:[{isSignal:!0,alias:"campaignLocations",required:!0,transform:void 0}]}],campaignCharacters:[{type:core.Input,args:[{isSignal:!0,alias:"campaignCharacters",required:!0,transform:void 0}]}],serverModel:[{type:core.Input,args:[{isSignal:!0,alias:"serverModel",required:!1,transform:void 0}]}],canUpdate:[{type:core.Input,args:[{isSignal:!0,alias:"canUpdate",required:!1,transform:void 0}]}],canCreate:[{type:core.Input,args:[{isSignal:!0,alias:"canCreate",required:!1,transform:void 0}]}],canDelete:[{type:core.Input,args:[{isSignal:!0,alias:"canDelete",required:!1,transform:void 0}]}],connectionDelete:[{type:core.Output,args:["connectionDelete"]}],connectionCreate:[{type:core.Output,args:["connectionCreate"]}],encounterDelete:[{type:core.Output,args:["encounterDelete"]}],encounterUpdate:[{type:core.Output,args:["encounterUpdate"]}]}}};EncounterAccordionComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"app-encounter-accordion",template:'<div class="encounter-list mb-5 mt-3">\n  <div ngbAccordion [closeOthers]="true" [animation]="true">\n    @for (encounter of encounters(); track encounter.pk) {\n      @let headingId = "encounter-heading-" + $index;\n      <div ngbAccordionItem [id]="\'static-\' + $index">\n        <div ngbAccordionHeader [heading]="3" [id]="headingId">\n          <button ngbAccordionButton class="panel-title">\n            <strong\n              class="encounter-title"\n              [innerHTML]="encounter.name"\n            ></strong>\n          </button>\n        </div>\n\n        <div ngbAccordionCollapse>\n          <div ngbAccordionBody>\n            <app-encounter\n              class="panel-content"\n              [encounter]="encounter"\n              [locations]="campaignLocations()"\n              [characters]="campaignCharacters()"\n              [serverModel]="serverModel()"\n              [canUpdate]="canUpdate()"\n              [canDelete]="canDelete()"\n              [canCreate]="canCreate()"\n              [isInFocus]="false"\n              [headingId]="headingId"\n              (connectionDelete)="connectionDelete.emit($event)"\n              (connectionCreate)="connectionCreate.emit($event)"\n              (encounterDelete)="encounterDelete.emit($event)"\n              (encounterUpdate)="encounterUpdate.emit($event)"\n            ></app-encounter>\n          </div>\n        </div>\n      </div>\n    }\n  </div>\n</div>\n',changeDetection:core.ChangeDetectionStrategy.OnPush,imports:[ng_bootstrap._f,encounter_component.L,heading_directive.m],styles:[encounter_accordion_componentngResource_default()]})],EncounterAccordionComponent)},"./src/utils/array.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>sortByProp});const sortByProp=(list,prop,sortDirection="asc")=>{const newList=[...list];return newList.sort(((a,b)=>{const sortValue=a[prop]>b[prop]?1:-1;return"desc"===sortDirection?-1*sortValue:sortValue})),newList}},"./node_modules/@storybook/addon-actions/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{XI:()=>action});var external_STORYBOOK_MODULE_PREVIEW_API_=__webpack_require__("storybook/internal/preview-api"),external_STORYBOOK_MODULE_CORE_EVENTS_PREVIEW_ERRORS_=__webpack_require__("storybook/internal/preview-errors"),external_STORYBOOK_MODULE_GLOBAL_=__webpack_require__("@storybook/global"),v4=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js"),__defProp=Object.defineProperty,ADDON_ID="storybook/actions",EVENT_ID=`${ADDON_ID}/action-event`,config={depth:10,clearOnStoryChange:!0,limit:50},findProto=(obj,callback)=>{let proto=Object.getPrototypeOf(obj);return!proto||callback(proto)?proto:findProto(proto,callback)},serializeArg=a=>{if("object"==typeof(e=a)&&e&&findProto(e,(proto=>/^Synthetic(?:Base)?Event$/.test(proto.constructor.name)))&&"function"==typeof e.persist){let e=Object.create(a.constructor.prototype,Object.getOwnPropertyDescriptors(a));e.persist();let viewDescriptor=Object.getOwnPropertyDescriptor(e,"view"),view=viewDescriptor?.value;return"object"==typeof view&&"Window"===view?.constructor.name&&Object.defineProperty(e,"view",{...viewDescriptor,value:Object.create(view.constructor.prototype)}),e}var e;return a},generateId=()=>"object"==typeof crypto&&"function"==typeof crypto.getRandomValues?(0,v4.A)():Date.now().toString(36)+Math.random().toString(36).substring(2);function action(name,options={}){let actionOptions={...config,...options},handler=function(...args){if(options.implicit){let storyRenderer=("__STORYBOOK_PREVIEW__"in external_STORYBOOK_MODULE_GLOBAL_.global?external_STORYBOOK_MODULE_GLOBAL_.global.__STORYBOOK_PREVIEW__:void 0)?.storyRenders.find((render=>"playing"===render.phase||"rendering"===render.phase));if(storyRenderer){let deprecated=!globalThis?.FEATURES?.disallowImplicitActionsInRenderV8,error=new external_STORYBOOK_MODULE_CORE_EVENTS_PREVIEW_ERRORS_.ImplicitActionsDuringRendering({phase:storyRenderer.phase,name,deprecated});if(!deprecated)throw error;console.warn(error)}}let channel=external_STORYBOOK_MODULE_PREVIEW_API_.addons.getChannel(),id=generateId(),serializedArgs=args.map(serializeArg),normalizedArgs=args.length>1?serializedArgs:serializedArgs[0],actionDisplayToEmit={id,count:0,data:{name,args:normalizedArgs},options:{...actionOptions,maxDepth:5+(actionOptions.depth||3),allowFunction:actionOptions.allowFunction||!1}};channel.emit(EVENT_ID,actionDisplayToEmit)};return handler.isAction=!0,handler.implicit=options.implicit,handler}var preview_exports={};((target,all)=>{for(var name in all)__defProp(target,name,{get:all[name],enumerable:!0})})(preview_exports,{argsEnhancers:()=>argsEnhancers,loaders:()=>loaders});var isInInitialArgs=(name,initialArgs)=>typeof initialArgs[name]>"u"&&!(name in initialArgs),argsEnhancers=[context=>{let{initialArgs,argTypes,parameters:{actions:actions2}}=context;return actions2?.disable||!argTypes?{}:Object.entries(argTypes).filter((([name,argType])=>!!argType.action)).reduce(((acc,[name,argType])=>(isInInitialArgs(name,initialArgs)&&(acc[name]=action("string"==typeof argType.action?argType.action:name)),acc)),{})},context=>{let{initialArgs,argTypes,id,parameters:{actions:actions2}}=context;if(!actions2||actions2.disable||!actions2.argTypesRegex||!argTypes)return{};let argTypesRegex=new RegExp(actions2.argTypesRegex);return Object.entries(argTypes).filter((([name])=>!!argTypesRegex.test(name))).reduce(((acc,[name,argType])=>(isInInitialArgs(name,initialArgs)&&(acc[name]=action(name,{implicit:!0,id})),acc)),{})}],subscribed=!1,loaders=[context=>{let{parameters:{actions:actions2}}=context;if(!actions2?.disable&&!subscribed&&"__STORYBOOK_TEST_ON_MOCK_CALL__"in external_STORYBOOK_MODULE_GLOBAL_.global&&"function"==typeof external_STORYBOOK_MODULE_GLOBAL_.global.__STORYBOOK_TEST_ON_MOCK_CALL__){(0,external_STORYBOOK_MODULE_GLOBAL_.global.__STORYBOOK_TEST_ON_MOCK_CALL__)(((mock,args)=>{let name=mock.getMockName();"spy"!==name&&(!/^next\/.*::/.test(name)||["next/router::useRouter()","next/navigation::useRouter()","next/navigation::redirect","next/cache::","next/headers::cookies().set","next/headers::cookies().delete","next/headers::headers().set","next/headers::headers().delete"].some((prefix=>name.startsWith(prefix))))&&action(name)(args)})),subscribed=!0}}]},"./src/app/design/organisms/encounter-accordion/encounter-accordion.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,NoEncounters:()=>NoEncounters,NoPermissions:()=>NoPermissions,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var _angular_platform_browser_animations__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@angular/platform-browser/fesm2022/animations.mjs"),_angular_router_testing__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@angular/router/fesm2022/testing.mjs"),_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@storybook/addon-actions/dist/index.mjs"),_storybook_angular__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@storybook/angular/dist/index.mjs"),_tinymce_tinymce_angular__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@tinymce/tinymce-angular/fesm2020/tinymce-tinymce-angular.mjs"),src_app_modules_formly_constants__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/app/_modules/formly_constants.ts"),src_app_services_routing_mock_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/app/_services/routing.mock.service.ts"),src_app_services_routing_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/app/_services/routing.service.ts");__webpack_require__("./node_modules/tinymce/tinymce.js");const dummyEncounters=[{pk:1,description:"\n      <p>In this <strong>epic encounter</strong>, the adventurers find themselves facing a fearsome <em>red dragon</em> deep within the twisting caverns of the mountains. The air is thick with the stench of sulfur as the dragon's massive form looms before them, its scales glinting in the flickering light of the torches.</p>\n\n      <p>The dragon roars, its fiery breath scorching the stone walls and causing the ground to tremble beneath the adventurers' feet. But they stand firm, weapons at the ready, knowing that this is the moment they have been training for.</p>\n\n      <p>The battle is fierce, with the dragon lashing out with razor-sharp claws and blasting the adventurers with jets of searing flame. But they are determined to prevail, and with each blow they strike, they chip away at the dragon's armor and weaken its resolve.</p>\n\n      <p>Finally, with a mighty roar, the dragon falls, its lifeless body crashing to the ground in a thunderous heap. The adventurers are battered and bruised, but they emerge victorious, their spirits lifted by the knowledge that they have faced one of the greatest challenges of their lives and emerged triumphant.</p>\n    ",encounterConnections:[{pk:1,encounter:1,encounter_details:{name:"Dragon",name_full:"Red Dragon",pk:1},character:1,character_details:{name:"Adventurer",name_full:"Adventurer One",pk:1}},{pk:2,encounter:1,encounter_details:{name:"Dragon",name_full:"Red Dragon",pk:1},character:2,character_details:{name:"Adventurer",name_full:"Adventurer Two",pk:2}},{pk:1,encounter:4,encounter_details:{name:"Goblin Ambush",name_full:"Goblin Ambush",pk:4},character:4,character_details:{name:"Warrior",name_full:"Warrior Four",pk:4}},{pk:1,encounter:5,encounter_details:{name:"Treasure Hunt",name_full:"Treasure Hunt",pk:5},character:5,character_details:{name:"Wizard",name_full:"Wizard Five",pk:5}},{pk:1,encounter:6,encounter_details:{name:"Orc Battle",name_full:"Orc Battle",pk:6},character:6,character_details:{name:"Ranger",name_full:"Ranger Six",pk:6}},{pk:1,encounter:7,encounter_details:{name:"Bandit Raid",name_full:"Bandit Raid",pk:7},character:7,character_details:{name:"Paladin",name_full:"Paladin Seven",pk:7}}],location:1,location_details:{name:"Cave",pk:1,name_full:"Cave of the Red Dragon",parent_location_name:"Mountains"},title:"The Battle of the Red Dragon's Lair",diaryentry:1,diaryentry_details:{author_name:"Dungeon Master",is_main_session:1,session_number:1},order_index:1,name:"Encounter 1",creation_datetime:"2022-04-23T12:34:56.789Z",update_datetime:"2022-04-23T12:34:56.789Z",campaign:1,campaign_details:{id:1,name:"Campaign 1"},getAbsoluteRouterUrl:()=>"/encounters/1/"},{pk:2,description:"\n      <p>A group of adventurers are hired to retrieve a stolen artifact from a well-guarded tomb. The tomb is filled with traps and monsters, but the adventurers are determined to complete the job and earn their reward.</p>\n    ",encounterConnections:[{pk:1,encounter:2,encounter_details:{name:"Tomb",name_full:"The Tomb of the Lost Artifact",pk:2},character:1,character_details:{name:"Rogue",name_full:"Rogue One",pk:1}},{pk:2,encounter:2,encounter_details:{name:"Tomb",name_full:"The Tomb of the Lost Artifact",pk:2},character:2,character_details:{name:"Fighter",name_full:"Fighter Two",pk:2}},{pk:3,encounter:2,encounter_details:{name:"Tomb",name_full:"The Tomb of the Lost Artifact",pk:2},character:3,character_details:{name:"Cleric",name_full:"Cleric Three",pk:3}}],location:2,location_details:{name:"Tomb",pk:2,name_full:"The Tomb of the Lost Artifact",parent_location_name:"Desert"},title:"The Tomb of the Lost Artifact",diaryentry:2,diaryentry_details:{author_name:"Dungeon Master",is_main_session:1,session_number:2},order_index:2,name:"Encounter 2",creation_datetime:"2022-04-23T12:34:56.789Z",update_datetime:"2022-04-23T12:34:56.789Z",campaign:1,campaign_details:{id:1,name:"Campaign 1"},getAbsoluteRouterUrl:()=>"/encounters/2/"},{pk:2,description:"\n      <p>A peaceful meadow is disturbed by the sudden appearance of a swarm of angry bees. The buzzing grows louder as the bees form a whirlwind around the adventurers, stinging them fiercely. Despite the pain, the adventurers remain calm and work together to disperse the swarm.</p>\n    ",encounterConnections:[{pk:3,encounter:2,encounter_details:{name:"Bee Swarm",name_full:"Angry Bee Swarm",pk:2},character:3,character_details:{name:"Bard",name_full:"Bard Three",pk:3}},{pk:4,encounter:2,encounter_details:{name:"Bee Swarm",name_full:"Angry Bee Swarm",pk:2},character:4,character_details:{name:"Warrior",name_full:"Warrior Four",pk:4}}],location:2,location_details:{name:"Meadow",pk:2,name_full:"Meadow of the Angry Bees",parent_location_name:"Forest"},title:"The Bee Swarm Attack",diaryentry:2,diaryentry_details:{author_name:"Dungeon Master",is_main_session:0,session_number:2},order_index:2,name:"Encounter 2",creation_datetime:"2022-04-23T13:34:56.789Z",update_datetime:"2022-04-23T13:34:56.789Z",campaign:1,campaign_details:{id:1,name:"Campaign 1"},getAbsoluteRouterUrl:()=>"/encounters/2/"}],__WEBPACK_DEFAULT_EXPORT__={title:"DesignSystem/Organisms/EncounterAccordionComponent",component:__webpack_require__("./src/app/design/organisms/encounter-accordion/encounter-accordion.component.ts").x,decorators:[(0,_storybook_angular__WEBPACK_IMPORTED_MODULE_1__.moduleMetadata)({imports:[_tinymce_tinymce_angular__WEBPACK_IMPORTED_MODULE_7__.sv,_angular_router_testing__WEBPACK_IMPORTED_MODULE_8__.c,src_app_modules_formly_constants__WEBPACK_IMPORTED_MODULE_2__.d_,_angular_platform_browser_animations__WEBPACK_IMPORTED_MODULE_9__.BrowserAnimationsModule],providers:[{provide:src_app_services_routing_service__WEBPACK_IMPORTED_MODULE_4__.O,useClass:src_app_services_routing_mock_service__WEBPACK_IMPORTED_MODULE_3__.W}]})],args:{encounters:dummyEncounters,campaignCharacters:[{getAbsoluteRouterUrl:()=>"/search/character/123",article_type:"Character",name:"Gandalf",pk:1,name_full:"Gandalf the Grey",player_character:!0,images:["https://example.com/images/lirien1.jpg"],campaign_details:{id:1,name:"Aldrune"}},{getAbsoluteRouterUrl:()=>"/search/character/123",article_type:"Character",name:"Frodo",pk:2,name_full:"Frodo Baggins",player_character:!0,images:[],campaign_details:{id:1,name:"Aldrune"}},{getAbsoluteRouterUrl:()=>"/search/character/123",article_type:"Character",name:"Gimli",pk:3,name_full:"Gimli son of GlÃ³in",player_character:!1,images:[],campaign_details:{id:1,name:"Aldrune"}},{getAbsoluteRouterUrl:()=>"/search/character/123",article_type:"Character",name:"Legolas",pk:4,name_full:"Legolas Greenleaf",player_character:!1,images:["https://example.com/images/lirien1.jpg"],campaign_details:{id:1,name:"Aldrune"}},{getAbsoluteRouterUrl:()=>"/search/character/123",article_type:"Character",name:"Bilbo",pk:5,name_full:"Bilbo Baggins",player_character:!1,images:[],campaign_details:{id:1,name:"Aldrune"}},{getAbsoluteRouterUrl:()=>"/search/character/123",article_type:"Character",name:"Aragorn",pk:6,name_full:"Aragorn son of Arathorn",player_character:!1,images:["https://example.com/images/lirien1.jpg"],campaign_details:{id:1,name:"Aldrune"}},{getAbsoluteRouterUrl:()=>"/search/character/123",article_type:"Character",name:"Saruman",pk:7,name_full:"Saruman the White",player_character:!1,images:[],campaign_details:{id:1,name:"Aldrune"}},{getAbsoluteRouterUrl:()=>"/search/character/123",article_type:"Character",name:"Sif",pk:18,name_full:"Sif the Swift",description:"Sif is a skilled warrior known for her lightning-fast strikes and agility. She is fiercely loyal to her friends and will stop at nothing to protect them.",update_datetime:"2022-03-15T10:30:00.000Z",player_character:!0,images:[],campaign_details:{id:1,name:"Aldrune"}},{getAbsoluteRouterUrl:()=>"/search/character/123",article_type:"Character",name:"Gorin",pk:19,name_full:"Gorin Ironfist",description:"Gorin is a dwarf from the Iron Hills, known for his strength and unwavering determination. He has a fondness for ale and a good brawl.",update_datetime:"2022-02-23T14:15:00.000Z",player_character:!0,images:["https://example.com/images/lirien1.jpg","https://example.com/images/lirien1.jpg"],campaign_details:{id:1,name:"Aldrune"}},{getAbsoluteRouterUrl:()=>"/search/character/123",article_type:"Character",name:"Lirien",pk:20,name_full:"Lirien Windrider",description:"Lirien is an elven archer, renowned for her skill with the bow. She is fiercely independent and often clashes with authority figures.",update_datetime:"2022-03-20T08:45:00.000Z",player_character:!0,images:["https://example.com/images/lirien1.jpg"],campaign_details:{id:1,name:"Aldrune"}}],campaignLocations:[],campaignName:"Aldrune",serverModel:void 0,canCreate:!0,canUpdate:!0,canDelete:!0}},Template=args=>({props:{...args,connectionDelete:(0,_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_0__.XI)("connectionDelete"),connectionCreate:(0,_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_0__.XI)("connectionCreate"),encounterDelete:(0,_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_0__.XI)("encounterDelete"),encounterUpdate:(0,_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_0__.XI)("encounterUpdate")}}),Default=Template.bind({});Default.args={};const NoPermissions=Template.bind({});NoPermissions.args={canUpdate:!1,canCreate:!1,canDelete:!1};const NoEncounters=Template.bind({});NoEncounters.args={encounters:[]};const __namedExportsOrder=["Default","NoPermissions","NoEncounters"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"args => ({\n  props: {\n    ...args,\n    connectionDelete: action('connectionDelete'),\n    connectionCreate: action('connectionCreate'),\n    encounterDelete: action('encounterDelete'),\n    encounterUpdate: action('encounterUpdate')\n  }\n})",...Default.parameters?.docs?.source}}},NoPermissions.parameters={...NoPermissions.parameters,docs:{...NoPermissions.parameters?.docs,source:{originalSource:"args => ({\n  props: {\n    ...args,\n    connectionDelete: action('connectionDelete'),\n    connectionCreate: action('connectionCreate'),\n    encounterDelete: action('encounterDelete'),\n    encounterUpdate: action('encounterUpdate')\n  }\n})",...NoPermissions.parameters?.docs?.source}}},NoEncounters.parameters={...NoEncounters.parameters,docs:{...NoEncounters.parameters?.docs,source:{originalSource:"args => ({\n  props: {\n    ...args,\n    connectionDelete: action('connectionDelete'),\n    connectionCreate: action('connectionCreate'),\n    encounterDelete: action('encounterDelete'),\n    encounterUpdate: action('encounterUpdate')\n  }\n})",...NoEncounters.parameters?.docs?.source}}}},"./src/app/design/atoms/html-text/html-text.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,"",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./src/app/design/molecules/editor/editor.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,":host {\n  display: inline-block;\n  --bg-hover-color: var(--bs-secondary);\n}\n\n.field {\n  text-align: unset;\n  border-radius: var(--bs-border-radius);\n}\n.field--display {\n  min-height: 1rem;\n  width: 100%;\n  cursor: pointer;\n}\n.field--display:focus, .field--display:hover {\n  outline-offset: 4px;\n  color: unset;\n  background-color: var(--bg-hover-color);\n}\n.field--hidden {\n  display: none;\n}\n.field__buttons {\n  display: flex;\n  flex-direction: row;\n  gap: var(--spacer-3);\n}\n\n.editor--focus {\n  outline: var(--focus-outline);\n  border-radius: var(--bs-border-radius);\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./src/app/design/organisms/encounter-accordion/encounter-accordion.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,":host {\n  --bs-accordion-active-color: var(--bs-accordion);\n}\n\n.panel-title {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n.panel-title:focus, .panel-title:focus-within, .panel-title:hover, .panel-title:focus-visible {\n  outline: var(--focus-outline);\n}\n.panel-title .encounter-title,\n.panel-title .icon {\n  transition: color 0.2s;\n  color: var(--bs-white);\n}\n.panel-title:hover .encounter-title,\n.panel-title:hover .icon {\n  color: var(--bs-gray);\n}\n\n.encounter-title {\n  color: var(--bs-white);\n  width: 100%;\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()}}]);